(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function fv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dv={exports:{}},lu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DS=Symbol.for("react.transitional.element"),bS=Symbol.for("react.fragment");function hv(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:DS,type:t,key:i,ref:e!==void 0?e:null,props:n}}lu.Fragment=bS;lu.jsx=hv;lu.jsxs=hv;dv.exports=lu;var M=dv.exports,mv={exports:{}},W={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pd=Symbol.for("react.transitional.element"),VS=Symbol.for("react.portal"),PS=Symbol.for("react.fragment"),US=Symbol.for("react.strict_mode"),LS=Symbol.for("react.profiler"),kS=Symbol.for("react.consumer"),qS=Symbol.for("react.context"),BS=Symbol.for("react.forward_ref"),OS=Symbol.for("react.suspense"),GS=Symbol.for("react.memo"),pv=Symbol.for("react.lazy"),zS=Symbol.for("react.activity"),_p=Symbol.iterator;function HS(t){return t===null||typeof t!="object"?null:(t=_p&&t[_p]||t["@@iterator"],typeof t=="function"?t:null)}var gv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yv=Object.assign,_v={};function po(t,e,n){this.props=t,this.context=e,this.refs=_v,this.updater=n||gv}po.prototype.isReactComponent={};po.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};po.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vv(){}vv.prototype=po.prototype;function Ud(t,e,n){this.props=t,this.context=e,this.refs=_v,this.updater=n||gv}var Ld=Ud.prototype=new vv;Ld.constructor=Ud;yv(Ld,po.prototype);Ld.isPureReactComponent=!0;var vp=Array.isArray;function of(){}var De={H:null,A:null,T:null,S:null},Tv=Object.prototype.hasOwnProperty;function kd(t,e,n){var i=n.ref;return{$$typeof:Pd,type:t,key:e,ref:i!==void 0?i:null,props:n}}function FS(t,e){return kd(t.type,e,t.props)}function qd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pd}function YS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Tp=/\/+/g;function cc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YS(""+t.key):e.toString(36)}function JS(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(of,of):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function ys(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var r=!1;if(t===null)r=!0;else switch(o){case"bigint":case"string":case"number":r=!0;break;case"object":switch(t.$$typeof){case Pd:case VS:r=!0;break;case pv:return r=t._init,ys(r(t._payload),e,n,i,s)}}if(r)return s=s(t),r=i===""?"."+cc(t,0):i,vp(s)?(n="",r!=null&&(n=r.replace(Tp,"$&/")+"/"),ys(s,e,n,"",function(d){return d})):s!=null&&(qd(s)&&(s=FS(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(Tp,"$&/")+"/")+r)),e.push(s)),1;r=0;var l=i===""?".":i+":";if(vp(t))for(var c=0;c<t.length;c++)i=t[c],o=l+cc(i,c),r+=ys(i,e,n,o,s);else if(c=HS(t),typeof c=="function")for(t=c.call(t),c=0;!(i=t.next()).done;)i=i.value,o=l+cc(i,c++),r+=ys(i,e,n,o,s);else if(o==="object"){if(typeof t.then=="function")return ys(JS(t),e,n,i,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return r}function Nl(t,e,n){if(t==null)return t;var i=[],s=0;return ys(t,i,"","",function(o){return e.call(n,o,s++)}),i}function KS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ep=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},QS={map:Nl,forEach:function(t,e,n){Nl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nl(t,function(){e++}),e},toArray:function(t){return Nl(t,function(e){return e})||[]},only:function(t){if(!qd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};W.Activity=zS;W.Children=QS;W.Component=po;W.Fragment=PS;W.Profiler=LS;W.PureComponent=Ud;W.StrictMode=US;W.Suspense=OS;W.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=De;W.__COMPILER_RUNTIME={__proto__:null,c:function(t){return De.H.useMemoCache(t)}};W.cache=function(t){return function(){return t.apply(null,arguments)}};W.cacheSignal=function(){return null};W.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=yv({},t.props),s=t.key;if(e!=null)for(o in e.key!==void 0&&(s=""+e.key),e)!Tv.call(e,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&e.ref===void 0||(i[o]=e[o]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var r=Array(o),l=0;l<o;l++)r[l]=arguments[l+2];i.children=r}return kd(t.type,s,i)};W.createContext=function(t){return t={$$typeof:qS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:kS,_context:t},t};W.createElement=function(t,e,n){var i,s={},o=null;if(e!=null)for(i in e.key!==void 0&&(o=""+e.key),e)Tv.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=e[i]);var r=arguments.length-2;if(r===1)s.children=n;else if(1<r){for(var l=Array(r),c=0;c<r;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(i in r=t.defaultProps,r)s[i]===void 0&&(s[i]=r[i]);return kd(t,o,s)};W.createRef=function(){return{current:null}};W.forwardRef=function(t){return{$$typeof:BS,render:t}};W.isValidElement=qd;W.lazy=function(t){return{$$typeof:pv,_payload:{_status:-1,_result:t},_init:KS}};W.memo=function(t,e){return{$$typeof:GS,type:t,compare:e===void 0?null:e}};W.startTransition=function(t){var e=De.T,n={};De.T=n;try{var i=t(),s=De.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(of,Ep)}catch(o){Ep(o)}finally{e!==null&&n.types!==null&&(e.types=n.types),De.T=e}};W.unstable_useCacheRefresh=function(){return De.H.useCacheRefresh()};W.use=function(t){return De.H.use(t)};W.useActionState=function(t,e,n){return De.H.useActionState(t,e,n)};W.useCallback=function(t,e){return De.H.useCallback(t,e)};W.useContext=function(t){return De.H.useContext(t)};W.useDebugValue=function(){};W.useDeferredValue=function(t,e){return De.H.useDeferredValue(t,e)};W.useEffect=function(t,e){return De.H.useEffect(t,e)};W.useEffectEvent=function(t){return De.H.useEffectEvent(t)};W.useId=function(){return De.H.useId()};W.useImperativeHandle=function(t,e,n){return De.H.useImperativeHandle(t,e,n)};W.useInsertionEffect=function(t,e){return De.H.useInsertionEffect(t,e)};W.useLayoutEffect=function(t,e){return De.H.useLayoutEffect(t,e)};W.useMemo=function(t,e){return De.H.useMemo(t,e)};W.useOptimistic=function(t,e){return De.H.useOptimistic(t,e)};W.useReducer=function(t,e,n){return De.H.useReducer(t,e,n)};W.useRef=function(t){return De.H.useRef(t)};W.useState=function(t){return De.H.useState(t)};W.useSyncExternalStore=function(t,e,n){return De.H.useSyncExternalStore(t,e,n)};W.useTransition=function(){return De.H.useTransition()};W.version="19.2.0";mv.exports=W;var Re=mv.exports;const $S=fv(Re);var Ev={exports:{}},au={},Av={exports:{}},Sv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,Q){var X=H.length;H.push(Q);e:for(;0<X;){var Ee=X-1>>>1,te=H[Ee];if(0<s(te,Q))H[Ee]=Q,H[X]=te,X=Ee;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var Q=H[0],X=H.pop();if(X!==Q){H[0]=X;e:for(var Ee=0,te=H.length,_e=te>>>1;Ee<_e;){var pe=2*(Ee+1)-1,Ce=H[pe],Yt=pe+1,It=H[Yt];if(0>s(Ce,X))Yt<te&&0>s(It,Ce)?(H[Ee]=It,H[Yt]=X,Ee=Yt):(H[Ee]=Ce,H[pe]=X,Ee=pe);else if(Yt<te&&0>s(It,X))H[Ee]=It,H[Yt]=X,Ee=Yt;else break e}}return Q}function s(H,Q){var X=H.sortIndex-Q.sortIndex;return X!==0?X:H.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var r=Date,l=r.now();t.unstable_now=function(){return r.now()-l}}var c=[],d=[],h=1,p=null,g=3,_=!1,w=!1,D=!1,U=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function b(H){for(var Q=n(d);Q!==null;){if(Q.callback===null)i(d);else if(Q.startTime<=H)i(d),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=n(d)}}function k(H){if(D=!1,b(H),!w)if(n(c)!==null)w=!0,B||(B=!0,V());else{var Q=n(d);Q!==null&&Rt(k,Q.startTime-H)}}var B=!1,S=-1,E=5,A=-1;function I(){return U?!0:!(t.unstable_now()-A<E)}function N(){if(U=!1,B){var H=t.unstable_now();A=H;var Q=!0;try{e:{w=!1,D&&(D=!1,T(S),S=-1),_=!0;var X=g;try{t:{for(b(H),p=n(c);p!==null&&!(p.expirationTime>H&&I());){var Ee=p.callback;if(typeof Ee=="function"){p.callback=null,g=p.priorityLevel;var te=Ee(p.expirationTime<=H);if(H=t.unstable_now(),typeof te=="function"){p.callback=te,b(H),Q=!0;break t}p===n(c)&&i(c),b(H)}else i(c);p=n(c)}if(p!==null)Q=!0;else{var _e=n(d);_e!==null&&Rt(k,_e.startTime-H),Q=!1}}break e}finally{p=null,g=X,_=!1}Q=void 0}}finally{Q?V():B=!1}}}var V;if(typeof R=="function")V=function(){R(N)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,ft=x.port2;x.port1.onmessage=N,V=function(){ft.postMessage(null)}}else V=function(){C(N,0)};function Rt(H,Q){S=C(function(){H(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var X=g;g=Q;try{return H()}finally{g=X}},t.unstable_requestPaint=function(){U=!0},t.unstable_runWithPriority=function(H,Q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var X=g;g=H;try{return Q()}finally{g=X}},t.unstable_scheduleCallback=function(H,Q,X){var Ee=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Ee+X:Ee):X=Ee,H){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,H={id:h++,callback:Q,priorityLevel:H,startTime:X,expirationTime:te,sortIndex:-1},X>Ee?(H.sortIndex=X,e(d,H),n(c)===null&&H===n(d)&&(D?(T(S),S=-1):D=!0,Rt(k,X-Ee))):(H.sortIndex=te,e(c,H),w||_||(w=!0,B||(B=!0,V()))),H},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(H){var Q=g;return function(){var X=g;g=Q;try{return H.apply(this,arguments)}finally{g=X}}}})(Sv);Av.exports=Sv;var XS=Av.exports,Cv={exports:{}},Ct={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZS=Re;function Rv(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Qn(){}var St={d:{f:Qn,r:function(){throw Error(Rv(522))},D:Qn,C:Qn,L:Qn,m:Qn,X:Qn,S:Qn,M:Qn},p:0,findDOMNode:null},WS=Symbol.for("react.portal");function jS(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:WS,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var lr=ZS.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function uu(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=St;Ct.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Rv(299));return jS(t,e,null,n)};Ct.flushSync=function(t){var e=lr.T,n=St.p;try{if(lr.T=null,St.p=2,t)return t()}finally{lr.T=e,St.p=n,St.d.f()}};Ct.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,St.d.C(t,e))};Ct.prefetchDNS=function(t){typeof t=="string"&&St.d.D(t)};Ct.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=uu(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,o=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?St.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:o}):n==="script"&&St.d.X(t,{crossOrigin:i,integrity:s,fetchPriority:o,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Ct.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=uu(e.as,e.crossOrigin);St.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&St.d.M(t)};Ct.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=uu(n,e.crossOrigin);St.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Ct.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=uu(e.as,e.crossOrigin);St.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else St.d.m(t)};Ct.requestFormReset=function(t){St.d.r(t)};Ct.unstable_batchedUpdates=function(t,e){return t(e)};Ct.useFormState=function(t,e,n){return lr.H.useFormState(t,e,n)};Ct.useFormStatus=function(){return lr.H.useHostTransitionStatus()};Ct.version="19.2.0";function Iv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Iv)}catch(t){console.error(t)}}Iv(),Cv.exports=Ct;var eC=Cv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xe=XS,wv=Re,tC=eC;function q(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function xv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Mv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Nv(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ap(t){if(Jr(t)!==t)throw Error(q(188))}function nC(t){var e=t.alternate;if(!e){if(e=Jr(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Ap(s),t;if(o===i)return Ap(s),e;o=o.sibling}throw Error(q(188))}if(n.return!==i.return)n=s,i=o;else{for(var r=!1,l=s.child;l;){if(l===n){r=!0,n=s,i=o;break}if(l===i){r=!0,i=s,n=o;break}l=l.sibling}if(!r){for(l=o.child;l;){if(l===n){r=!0,n=o,i=s;break}if(l===i){r=!0,i=o,n=s;break}l=l.sibling}if(!r)throw Error(q(189))}}if(n.alternate!==i)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function Dv(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Dv(t),e!==null)return e;t=t.sibling}return null}var be=Object.assign,iC=Symbol.for("react.element"),Dl=Symbol.for("react.transitional.element"),jo=Symbol.for("react.portal"),Ss=Symbol.for("react.fragment"),bv=Symbol.for("react.strict_mode"),rf=Symbol.for("react.profiler"),Vv=Symbol.for("react.consumer"),xn=Symbol.for("react.context"),Bd=Symbol.for("react.forward_ref"),lf=Symbol.for("react.suspense"),af=Symbol.for("react.suspense_list"),Od=Symbol.for("react.memo"),$n=Symbol.for("react.lazy"),uf=Symbol.for("react.activity"),sC=Symbol.for("react.memo_cache_sentinel"),Sp=Symbol.iterator;function Fo(t){return t===null||typeof t!="object"?null:(t=Sp&&t[Sp]||t["@@iterator"],typeof t=="function"?t:null)}var oC=Symbol.for("react.client.reference");function cf(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===oC?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ss:return"Fragment";case rf:return"Profiler";case bv:return"StrictMode";case lf:return"Suspense";case af:return"SuspenseList";case uf:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case jo:return"Portal";case xn:return t.displayName||"Context";case Vv:return(t._context.displayName||"Context")+".Consumer";case Bd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Od:return e=t.displayName||null,e!==null?e:cf(t.type)||"Memo";case $n:e=t._payload,t=t._init;try{return cf(t(e))}catch{}}return null}var er=Array.isArray,$=wv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=tC.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,zi={pending:!1,data:null,method:null,action:null},ff=[],Cs=-1;function yn(t){return{current:t}}function et(t){0>Cs||(t.current=ff[Cs],ff[Cs]=null,Cs--)}function Ie(t,e){Cs++,ff[Cs]=t.current,t.current=e}var mn=yn(null),Ir=yn(null),ui=yn(null),va=yn(null);function Ta(t,e){switch(Ie(ui,e),Ie(Ir,t),Ie(mn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Mg(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Mg(e),t=j0(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}et(mn),Ie(mn,t)}function Xs(){et(mn),et(Ir),et(ui)}function df(t){t.memoizedState!==null&&Ie(va,t);var e=mn.current,n=j0(e,t.type);e!==n&&(Ie(Ir,t),Ie(mn,n))}function Ea(t){Ir.current===t&&(et(mn),et(Ir)),va.current===t&&(et(va),kr._currentValue=zi)}var fc,Cp;function Li(t){if(fc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fc=e&&e[1]||"",Cp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fc+t+Cp}var dc=!1;function hc(t,e){if(!t||dc)return"";dc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(_){var g=_}Reflect.construct(t,[],p)}else{try{p.call()}catch(_){g=_}t.call(p.prototype)}}else{try{throw Error()}catch(_){g=_}(p=t())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(_){if(_&&g&&typeof _.stack=="string")return[_.stack,g.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=i.DetermineComponentFrameRoot(),r=o[0],l=o[1];if(r&&l){var c=r.split(`
`),d=l.split(`
`);for(s=i=0;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;for(;s<d.length&&!d[s].includes("DetermineComponentFrameRoot");)s++;if(i===c.length||s===d.length)for(i=c.length-1,s=d.length-1;1<=i&&0<=s&&c[i]!==d[s];)s--;for(;1<=i&&0<=s;i--,s--)if(c[i]!==d[s]){if(i!==1||s!==1)do if(i--,s--,0>s||c[i]!==d[s]){var h=`
`+c[i].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=i&&0<=s);break}}}finally{dc=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Li(n):""}function rC(t,e){switch(t.tag){case 26:case 27:case 5:return Li(t.type);case 16:return Li("Lazy");case 13:return t.child!==e&&e!==null?Li("Suspense Fallback"):Li("Suspense");case 19:return Li("SuspenseList");case 0:case 15:return hc(t.type,!1);case 11:return hc(t.type.render,!1);case 1:return hc(t.type,!0);case 31:return Li("Activity");default:return""}}function Rp(t){try{var e="",n=null;do e+=rC(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var hf=Object.prototype.hasOwnProperty,Gd=Xe.unstable_scheduleCallback,mc=Xe.unstable_cancelCallback,lC=Xe.unstable_shouldYield,aC=Xe.unstable_requestPaint,Bt=Xe.unstable_now,uC=Xe.unstable_getCurrentPriorityLevel,Pv=Xe.unstable_ImmediatePriority,Uv=Xe.unstable_UserBlockingPriority,Aa=Xe.unstable_NormalPriority,cC=Xe.unstable_LowPriority,Lv=Xe.unstable_IdlePriority,fC=Xe.log,dC=Xe.unstable_setDisableYieldValue,Kr=null,Ot=null;function ti(t){if(typeof fC=="function"&&dC(t),Ot&&typeof Ot.setStrictMode=="function")try{Ot.setStrictMode(Kr,t)}catch{}}var Gt=Math.clz32?Math.clz32:pC,hC=Math.log,mC=Math.LN2;function pC(t){return t>>>=0,t===0?32:31-(hC(t)/mC|0)|0}var bl=256,Vl=262144,Pl=4194304;function ki(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function cu(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var s=0,o=t.suspendedLanes,r=t.pingedLanes;t=t.warmLanes;var l=i&134217727;return l!==0?(i=l&~o,i!==0?s=ki(i):(r&=l,r!==0?s=ki(r):n||(n=l&~t,n!==0&&(s=ki(n))))):(l=i&~o,l!==0?s=ki(l):r!==0?s=ki(r):n||(n=i&~t,n!==0&&(s=ki(n)))),s===0?0:e!==0&&e!==s&&!(e&o)&&(o=s&-s,n=e&-e,o>=n||o===32&&(n&4194048)!==0)?e:s}function Qr(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function gC(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kv(){var t=Pl;return Pl<<=1,!(Pl&62914560)&&(Pl=4194304),t}function pc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $r(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function yC(t,e,n,i,s,o){var r=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,c=t.expirationTimes,d=t.hiddenUpdates;for(n=r&~n;0<n;){var h=31-Gt(n),p=1<<h;l[h]=0,c[h]=-1;var g=d[h];if(g!==null)for(d[h]=null,h=0;h<g.length;h++){var _=g[h];_!==null&&(_.lane&=-536870913)}n&=~p}i!==0&&qv(t,i,0),o!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=o&~(r&~e))}function qv(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-Gt(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function Bv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Gt(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}function Ov(t,e){var n=e&-e;return n=n&42?1:zd(n),n&(t.suspendedLanes|e)?0:n}function zd(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Hd(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function Gv(){var t=me.p;return t!==0?t:(t=window.event,t===void 0?32:cE(t.type))}function Ip(t,e){var n=me.p;try{return me.p=t,e()}finally{me.p=n}}var wi=Math.random().toString(36).slice(2),ot="__reactFiber$"+wi,bt="__reactProps$"+wi,go="__reactContainer$"+wi,mf="__reactEvents$"+wi,_C="__reactListeners$"+wi,vC="__reactHandles$"+wi,wp="__reactResources$"+wi,Xr="__reactMarker$"+wi;function Fd(t){delete t[ot],delete t[bt],delete t[mf],delete t[_C],delete t[vC]}function Rs(t){var e=t[ot];if(e)return e;for(var n=t.parentNode;n;){if(e=n[go]||n[ot]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Pg(t);t!==null;){if(n=t[ot])return n;t=Pg(t)}return e}t=n,n=t.parentNode}return null}function yo(t){if(t=t[ot]||t[go]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function tr(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(q(33))}function Ls(t){var e=t[wp];return e||(e=t[wp]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function je(t){t[Xr]=!0}var zv=new Set,Hv={};function os(t,e){Zs(t,e),Zs(t+"Capture",e)}function Zs(t,e){for(Hv[t]=e,t=0;t<e.length;t++)zv.add(e[t])}var TC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xp={},Mp={};function EC(t){return hf.call(Mp,t)?!0:hf.call(xp,t)?!1:TC.test(t)?Mp[t]=!0:(xp[t]=!0,!1)}function Zl(t,e,n){if(EC(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Ul(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function En(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function Kt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function AC(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var s=i.get,o=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(r){n=""+r,o.call(this,r)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pf(t){if(!t._valueTracker){var e=Fv(t)?"checked":"value";t._valueTracker=AC(t,e,""+t[e])}}function Yv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Fv(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Sa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var SC=/[\n"\\]/g;function Xt(t){return t.replace(SC,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gf(t,e,n,i,s,o,r,l){t.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?t.type=r:t.removeAttribute("type"),e!=null?r==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Kt(e)):t.value!==""+Kt(e)&&(t.value=""+Kt(e)):r!=="submit"&&r!=="reset"||t.removeAttribute("value"),e!=null?yf(t,r,Kt(e)):n!=null?yf(t,r,Kt(n)):i!=null&&t.removeAttribute("value"),s==null&&o!=null&&(t.defaultChecked=!!o),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Kt(l):t.removeAttribute("name")}function Jv(t,e,n,i,s,o,r,l){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.type=o),e!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||e!=null)){pf(t);return}n=n!=null?""+Kt(n):"",e=e!=null?""+Kt(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.name=r),pf(t)}function yf(t,e,n){e==="number"&&Sa(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function ks(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Kt(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Kv(t,e,n){if(e!=null&&(e=""+Kt(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Kt(n):""}function Qv(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(q(92));if(er(i)){if(1<i.length)throw Error(q(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Kt(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),pf(t)}function Ws(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var CC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Np(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||CC.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function $v(t,e,n){if(e!=null&&typeof e!="object")throw Error(q(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var s in e)i=e[s],e.hasOwnProperty(s)&&n[s]!==i&&Np(t,s,i)}else for(var o in e)e.hasOwnProperty(o)&&Np(t,o,e[o])}function Yd(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),IC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wl(t){return IC.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Mn(){}var _f=null;function Jd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Is=null,qs=null;function Dp(t){var e=yo(t);if(e&&(t=e.stateNode)){var n=t[bt]||null;e:switch(t=e.stateNode,e.type){case"input":if(gf(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Xt(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=i[bt]||null;if(!s)throw Error(q(90));gf(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&Yv(i)}break e;case"textarea":Kv(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&ks(t,!!n.multiple,e,!1)}}}var gc=!1;function Xv(t,e,n){if(gc)return t(e,n);gc=!0;try{var i=t(e);return i}finally{if(gc=!1,(Is!==null||qs!==null)&&(Au(),Is&&(e=Is,t=qs,qs=Is=null,Dp(e),t)))for(e=0;e<t.length;e++)Dp(t[e])}}function wr(t,e){var n=t.stateNode;if(n===null)return null;var i=n[bt]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vf=!1;if(Pn)try{var Yo={};Object.defineProperty(Yo,"passive",{get:function(){vf=!0}}),window.addEventListener("test",Yo,Yo),window.removeEventListener("test",Yo,Yo)}catch{vf=!1}var ni=null,Kd=null,jl=null;function Zv(){if(jl)return jl;var t,e=Kd,n=e.length,i,s="value"in ni?ni.value:ni.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var r=n-t;for(i=1;i<=r&&e[n-i]===s[o-i];i++);return jl=s.slice(t,1<i?1-i:void 0)}function ea(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ll(){return!0}function bp(){return!1}function Vt(t){function e(n,i,s,o,r){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=r,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ll:bp,this.isPropagationStopped=bp,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ll)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ll)},persist:function(){},isPersistent:Ll}),e}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fu=Vt(rs),Zr=be({},rs,{view:0,detail:0}),wC=Vt(Zr),yc,_c,Jo,du=be({},Zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jo&&(Jo&&t.type==="mousemove"?(yc=t.screenX-Jo.screenX,_c=t.screenY-Jo.screenY):_c=yc=0,Jo=t),yc)},movementY:function(t){return"movementY"in t?t.movementY:_c}}),Vp=Vt(du),xC=be({},du,{dataTransfer:0}),MC=Vt(xC),NC=be({},Zr,{relatedTarget:0}),vc=Vt(NC),DC=be({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),bC=Vt(DC),VC=be({},rs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),PC=Vt(VC),UC=be({},rs,{data:0}),Pp=Vt(UC),LC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qC[t])?!!e[t]:!1}function Qd(){return BC}var OC=be({},Zr,{key:function(t){if(t.key){var e=LC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ea(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qd,charCode:function(t){return t.type==="keypress"?ea(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ea(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GC=Vt(OC),zC=be({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Up=Vt(zC),HC=be({},Zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qd}),FC=Vt(HC),YC=be({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),JC=Vt(YC),KC=be({},du,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QC=Vt(KC),$C=be({},rs,{newState:0,oldState:0}),XC=Vt($C),ZC=[9,13,27,32],$d=Pn&&"CompositionEvent"in window,ar=null;Pn&&"documentMode"in document&&(ar=document.documentMode);var WC=Pn&&"TextEvent"in window&&!ar,Wv=Pn&&(!$d||ar&&8<ar&&11>=ar),Lp=" ",kp=!1;function jv(t,e){switch(t){case"keyup":return ZC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ws=!1;function jC(t,e){switch(t){case"compositionend":return eT(e);case"keypress":return e.which!==32?null:(kp=!0,Lp);case"textInput":return t=e.data,t===Lp&&kp?null:t;default:return null}}function eR(t,e){if(ws)return t==="compositionend"||!$d&&jv(t,e)?(t=Zv(),jl=Kd=ni=null,ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Wv&&e.locale!=="ko"?null:e.data;default:return null}}var tR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tR[t.type]:e==="textarea"}function tT(t,e,n,i){Is?qs?qs.push(i):qs=[i]:Is=i,e=Ga(e,"onChange"),0<e.length&&(n=new fu("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ur=null,xr=null;function nR(t){X0(t,0)}function hu(t){var e=tr(t);if(Yv(e))return t}function Bp(t,e){if(t==="change")return e}var nT=!1;if(Pn){var Tc;if(Pn){var Ec="oninput"in document;if(!Ec){var Op=document.createElement("div");Op.setAttribute("oninput","return;"),Ec=typeof Op.oninput=="function"}Tc=Ec}else Tc=!1;nT=Tc&&(!document.documentMode||9<document.documentMode)}function Gp(){ur&&(ur.detachEvent("onpropertychange",iT),xr=ur=null)}function iT(t){if(t.propertyName==="value"&&hu(xr)){var e=[];tT(e,xr,t,Jd(t)),Xv(nR,e)}}function iR(t,e,n){t==="focusin"?(Gp(),ur=e,xr=n,ur.attachEvent("onpropertychange",iT)):t==="focusout"&&Gp()}function sR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hu(xr)}function oR(t,e){if(t==="click")return hu(e)}function rR(t,e){if(t==="input"||t==="change")return hu(e)}function lR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ht=typeof Object.is=="function"?Object.is:lR;function Mr(t,e){if(Ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!hf.call(e,s)||!Ht(t[s],e[s]))return!1}return!0}function zp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hp(t,e){var n=zp(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zp(n)}}function sT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oT(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Sa(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Sa(t.document)}return e}function Xd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var aR=Pn&&"documentMode"in document&&11>=document.documentMode,xs=null,Tf=null,cr=null,Ef=!1;function Fp(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ef||xs==null||xs!==Sa(i)||(i=xs,"selectionStart"in i&&Xd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),cr&&Mr(cr,i)||(cr=i,i=Ga(Tf,"onSelect"),0<i.length&&(e=new fu("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=xs)))}function Ui(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ms={animationend:Ui("Animation","AnimationEnd"),animationiteration:Ui("Animation","AnimationIteration"),animationstart:Ui("Animation","AnimationStart"),transitionrun:Ui("Transition","TransitionRun"),transitionstart:Ui("Transition","TransitionStart"),transitioncancel:Ui("Transition","TransitionCancel"),transitionend:Ui("Transition","TransitionEnd")},Ac={},rT={};Pn&&(rT=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function ls(t){if(Ac[t])return Ac[t];if(!Ms[t])return t;var e=Ms[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rT)return Ac[t]=e[n];return t}var lT=ls("animationend"),aT=ls("animationiteration"),uT=ls("animationstart"),uR=ls("transitionrun"),cR=ls("transitionstart"),fR=ls("transitioncancel"),cT=ls("transitionend"),fT=new Map,Af="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Af.push("scrollEnd");function an(t,e){fT.set(t,e),os(e,[t])}var Ca=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Jt=[],Ns=0,Zd=0;function mu(){for(var t=Ns,e=Zd=Ns=0;e<t;){var n=Jt[e];Jt[e++]=null;var i=Jt[e];Jt[e++]=null;var s=Jt[e];Jt[e++]=null;var o=Jt[e];if(Jt[e++]=null,i!==null&&s!==null){var r=i.pending;r===null?s.next=s:(s.next=r.next,r.next=s),i.pending=s}o!==0&&dT(n,s,o)}}function pu(t,e,n,i){Jt[Ns++]=t,Jt[Ns++]=e,Jt[Ns++]=n,Jt[Ns++]=i,Zd|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Wd(t,e,n,i){return pu(t,e,n,i),Ra(t)}function as(t,e){return pu(t,null,null,e),Ra(t)}function dT(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var s=!1,o=t.return;o!==null;)o.childLanes|=n,i=o.alternate,i!==null&&(i.childLanes|=n),o.tag===22&&(t=o.stateNode,t===null||t._visibility&1||(s=!0)),t=o,o=o.return;return t.tag===3?(o=t.stateNode,s&&e!==null&&(s=31-Gt(n),t=o.hiddenUpdates,i=t[s],i===null?t[s]=[e]:i.push(e),e.lane=n|536870912),o):null}function Ra(t){if(50<vr)throw vr=0,Hf=null,Error(q(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Ds={};function dR(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(t,e,n,i){return new dR(t,e,n,i)}function jd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Dn(t,e){var n=t.alternate;return n===null?(n=kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function hT(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function ta(t,e,n,i,s,o){var r=0;if(i=t,typeof t=="function")jd(t)&&(r=1);else if(typeof t=="string")r=yI(t,n,mn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case uf:return t=kt(31,n,e,s),t.elementType=uf,t.lanes=o,t;case Ss:return Hi(n.children,s,o,e);case bv:r=8,s|=24;break;case rf:return t=kt(12,n,e,s|2),t.elementType=rf,t.lanes=o,t;case lf:return t=kt(13,n,e,s),t.elementType=lf,t.lanes=o,t;case af:return t=kt(19,n,e,s),t.elementType=af,t.lanes=o,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xn:r=10;break e;case Vv:r=9;break e;case Bd:r=11;break e;case Od:r=14;break e;case $n:r=16,i=null;break e}r=29,n=Error(q(130,t===null?"null":typeof t,"")),i=null}return e=kt(r,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function Hi(t,e,n,i){return t=kt(7,t,i,e),t.lanes=n,t}function Sc(t,e,n){return t=kt(6,t,null,e),t.lanes=n,t}function mT(t){var e=kt(18,null,null,0);return e.stateNode=t,e}function Cc(t,e,n){return e=kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Yp=new WeakMap;function Zt(t,e){if(typeof t=="object"&&t!==null){var n=Yp.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Rp(e)},Yp.set(t,e),e)}return{value:t,source:e,stack:Rp(e)}}var bs=[],Vs=0,Ia=null,Nr=0,Qt=[],$t=0,Ti=null,fn=1,dn="";function In(t,e){bs[Vs++]=Nr,bs[Vs++]=Ia,Ia=t,Nr=e}function pT(t,e,n){Qt[$t++]=fn,Qt[$t++]=dn,Qt[$t++]=Ti,Ti=t;var i=fn;t=dn;var s=32-Gt(i)-1;i&=~(1<<s),n+=1;var o=32-Gt(e)+s;if(30<o){var r=s-s%5;o=(i&(1<<r)-1).toString(32),i>>=r,s-=r,fn=1<<32-Gt(e)+s|n<<s|i,dn=o+t}else fn=1<<o|n<<s|i,dn=t}function eh(t){t.return!==null&&(In(t,1),pT(t,1,0))}function th(t){for(;t===Ia;)Ia=bs[--Vs],bs[Vs]=null,Nr=bs[--Vs],bs[Vs]=null;for(;t===Ti;)Ti=Qt[--$t],Qt[$t]=null,dn=Qt[--$t],Qt[$t]=null,fn=Qt[--$t],Qt[$t]=null}function gT(t,e){Qt[$t++]=fn,Qt[$t++]=dn,Qt[$t++]=Ti,fn=e.id,dn=e.overflow,Ti=t}var rt=null,Ne=null,oe=!1,ci=null,Wt=!1,Sf=Error(q(519));function Ei(t){var e=Error(q(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Dr(Zt(e,t)),Sf}function Jp(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[ot]=t,e[bt]=i,n){case"dialog":ne("cancel",e),ne("close",e);break;case"iframe":case"object":case"embed":ne("load",e);break;case"video":case"audio":for(n=0;n<Ur.length;n++)ne(Ur[n],e);break;case"source":ne("error",e);break;case"img":case"image":case"link":ne("error",e),ne("load",e);break;case"details":ne("toggle",e);break;case"input":ne("invalid",e),Jv(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":ne("invalid",e);break;case"textarea":ne("invalid",e),Qv(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||W0(e.textContent,n)?(i.popover!=null&&(ne("beforetoggle",e),ne("toggle",e)),i.onScroll!=null&&ne("scroll",e),i.onScrollEnd!=null&&ne("scrollend",e),i.onClick!=null&&(e.onclick=Mn),e=!0):e=!1,e||Ei(t,!0)}function Kp(t){for(rt=t.return;rt;)switch(rt.tag){case 5:case 31:case 13:Wt=!1;return;case 27:case 3:Wt=!0;return;default:rt=rt.return}}function ps(t){if(t!==rt)return!1;if(!oe)return Kp(t),oe=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Qf(t.type,t.memoizedProps)),n=!n),n&&Ne&&Ei(t),Kp(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));Ne=Vg(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));Ne=Vg(t)}else e===27?(e=Ne,xi(t.type)?(t=Wf,Wf=null,Ne=t):Ne=e):Ne=rt?en(t.stateNode.nextSibling):null;return!0}function Xi(){Ne=rt=null,oe=!1}function Rc(){var t=ci;return t!==null&&(Nt===null?Nt=t:Nt.push.apply(Nt,t),ci=null),t}function Dr(t){ci===null?ci=[t]:ci.push(t)}var Cf=yn(null),us=null,Nn=null;function Zn(t,e,n){Ie(Cf,e._currentValue),e._currentValue=n}function bn(t){t._currentValue=Cf.current,et(Cf)}function Rf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function If(t,e,n,i){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){var r=s.child;o=o.firstContext;e:for(;o!==null;){var l=o;o=s;for(var c=0;c<e.length;c++)if(l.context===e[c]){o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Rf(o.return,n,t),i||(r=null);break e}o=l.next}}else if(s.tag===18){if(r=s.return,r===null)throw Error(q(341));r.lanes|=n,o=r.alternate,o!==null&&(o.lanes|=n),Rf(r,n,t),r=null}else r=s.child;if(r!==null)r.return=s;else for(r=s;r!==null;){if(r===t){r=null;break}if(s=r.sibling,s!==null){s.return=r.return,r=s;break}r=r.return}s=r}}function _o(t,e,n,i){t=null;for(var s=e,o=!1;s!==null;){if(!o){if(s.flags&524288)o=!0;else if(s.flags&262144)break}if(s.tag===10){var r=s.alternate;if(r===null)throw Error(q(387));if(r=r.memoizedProps,r!==null){var l=s.type;Ht(s.pendingProps.value,r.value)||(t!==null?t.push(l):t=[l])}}else if(s===va.current){if(r=s.alternate,r===null)throw Error(q(387));r.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(kr):t=[kr])}s=s.return}t!==null&&If(e,t,n,i),e.flags|=262144}function wa(t){for(t=t.firstContext;t!==null;){if(!Ht(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Zi(t){us=t,Nn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function lt(t){return yT(us,t)}function kl(t,e){return us===null&&Zi(t),yT(t,e)}function yT(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Nn===null){if(t===null)throw Error(q(308));Nn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Nn=Nn.next=e;return n}var hR=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},mR=Xe.unstable_scheduleCallback,pR=Xe.unstable_NormalPriority,Je={$$typeof:xn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nh(){return{controller:new hR,data:new Map,refCount:0}}function Wr(t){t.refCount--,t.refCount===0&&mR(pR,function(){t.controller.abort()})}var fr=null,wf=0,js=0,Bs=null;function gR(t,e){if(fr===null){var n=fr=[];wf=0,js=wh(),Bs={status:"pending",value:void 0,then:function(i){n.push(i)}}}return wf++,e.then(Qp,Qp),e}function Qp(){if(--wf===0&&fr!==null){Bs!==null&&(Bs.status="fulfilled");var t=fr;fr=null,js=0,Bs=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function yR(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var $p=$.S;$.S=function(t,e){D0=Bt(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&gR(t,e),$p!==null&&$p(t,e)};var Fi=yn(null);function ih(){var t=Fi.current;return t!==null?t:Se.pooledCache}function na(t,e){e===null?Ie(Fi,Fi.current):Ie(Fi,e.pool)}function _T(){var t=ih();return t===null?null:{parent:Je._currentValue,pool:t}}var vo=Error(q(460)),sh=Error(q(474)),gu=Error(q(542)),xa={then:function(){}};function Xp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function vT(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Mn,Mn),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Wp(t),t;default:if(typeof e.status=="string")e.then(Mn,Mn);else{if(t=Se,t!==null&&100<t.shellSuspendCounter)throw Error(q(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=i}},function(i){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Wp(t),t}throw Yi=e,vo}}function qi(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Yi=n,vo):n}}var Yi=null;function Zp(){if(Yi===null)throw Error(q(459));var t=Yi;return Yi=null,t}function Wp(t){if(t===vo||t===gu)throw Error(q(483))}var Os=null,br=0;function ql(t){var e=br;return br+=1,Os===null&&(Os=[]),vT(Os,t,e)}function Ko(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Bl(t,e){throw e.$$typeof===iC?Error(q(525)):(t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function TT(t){function e(C,T){if(t){var R=C.deletions;R===null?(C.deletions=[T],C.flags|=16):R.push(T)}}function n(C,T){if(!t)return null;for(;T!==null;)e(C,T),T=T.sibling;return null}function i(C){for(var T=new Map;C!==null;)C.key!==null?T.set(C.key,C):T.set(C.index,C),C=C.sibling;return T}function s(C,T){return C=Dn(C,T),C.index=0,C.sibling=null,C}function o(C,T,R){return C.index=R,t?(R=C.alternate,R!==null?(R=R.index,R<T?(C.flags|=67108866,T):R):(C.flags|=67108866,T)):(C.flags|=1048576,T)}function r(C){return t&&C.alternate===null&&(C.flags|=67108866),C}function l(C,T,R,b){return T===null||T.tag!==6?(T=Sc(R,C.mode,b),T.return=C,T):(T=s(T,R),T.return=C,T)}function c(C,T,R,b){var k=R.type;return k===Ss?h(C,T,R.props.children,b,R.key):T!==null&&(T.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===$n&&qi(k)===T.type)?(T=s(T,R.props),Ko(T,R),T.return=C,T):(T=ta(R.type,R.key,R.props,null,C.mode,b),Ko(T,R),T.return=C,T)}function d(C,T,R,b){return T===null||T.tag!==4||T.stateNode.containerInfo!==R.containerInfo||T.stateNode.implementation!==R.implementation?(T=Cc(R,C.mode,b),T.return=C,T):(T=s(T,R.children||[]),T.return=C,T)}function h(C,T,R,b,k){return T===null||T.tag!==7?(T=Hi(R,C.mode,b,k),T.return=C,T):(T=s(T,R),T.return=C,T)}function p(C,T,R){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Sc(""+T,C.mode,R),T.return=C,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Dl:return R=ta(T.type,T.key,T.props,null,C.mode,R),Ko(R,T),R.return=C,R;case jo:return T=Cc(T,C.mode,R),T.return=C,T;case $n:return T=qi(T),p(C,T,R)}if(er(T)||Fo(T))return T=Hi(T,C.mode,R,null),T.return=C,T;if(typeof T.then=="function")return p(C,ql(T),R);if(T.$$typeof===xn)return p(C,kl(C,T),R);Bl(C,T)}return null}function g(C,T,R,b){var k=T!==null?T.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return k!==null?null:l(C,T,""+R,b);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Dl:return R.key===k?c(C,T,R,b):null;case jo:return R.key===k?d(C,T,R,b):null;case $n:return R=qi(R),g(C,T,R,b)}if(er(R)||Fo(R))return k!==null?null:h(C,T,R,b,null);if(typeof R.then=="function")return g(C,T,ql(R),b);if(R.$$typeof===xn)return g(C,T,kl(C,R),b);Bl(C,R)}return null}function _(C,T,R,b,k){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return C=C.get(R)||null,l(T,C,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Dl:return C=C.get(b.key===null?R:b.key)||null,c(T,C,b,k);case jo:return C=C.get(b.key===null?R:b.key)||null,d(T,C,b,k);case $n:return b=qi(b),_(C,T,R,b,k)}if(er(b)||Fo(b))return C=C.get(R)||null,h(T,C,b,k,null);if(typeof b.then=="function")return _(C,T,R,ql(b),k);if(b.$$typeof===xn)return _(C,T,R,kl(T,b),k);Bl(T,b)}return null}function w(C,T,R,b){for(var k=null,B=null,S=T,E=T=0,A=null;S!==null&&E<R.length;E++){S.index>E?(A=S,S=null):A=S.sibling;var I=g(C,S,R[E],b);if(I===null){S===null&&(S=A);break}t&&S&&I.alternate===null&&e(C,S),T=o(I,T,E),B===null?k=I:B.sibling=I,B=I,S=A}if(E===R.length)return n(C,S),oe&&In(C,E),k;if(S===null){for(;E<R.length;E++)S=p(C,R[E],b),S!==null&&(T=o(S,T,E),B===null?k=S:B.sibling=S,B=S);return oe&&In(C,E),k}for(S=i(S);E<R.length;E++)A=_(S,C,E,R[E],b),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?E:A.key),T=o(A,T,E),B===null?k=A:B.sibling=A,B=A);return t&&S.forEach(function(N){return e(C,N)}),oe&&In(C,E),k}function D(C,T,R,b){if(R==null)throw Error(q(151));for(var k=null,B=null,S=T,E=T=0,A=null,I=R.next();S!==null&&!I.done;E++,I=R.next()){S.index>E?(A=S,S=null):A=S.sibling;var N=g(C,S,I.value,b);if(N===null){S===null&&(S=A);break}t&&S&&N.alternate===null&&e(C,S),T=o(N,T,E),B===null?k=N:B.sibling=N,B=N,S=A}if(I.done)return n(C,S),oe&&In(C,E),k;if(S===null){for(;!I.done;E++,I=R.next())I=p(C,I.value,b),I!==null&&(T=o(I,T,E),B===null?k=I:B.sibling=I,B=I);return oe&&In(C,E),k}for(S=i(S);!I.done;E++,I=R.next())I=_(S,C,E,I.value,b),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?E:I.key),T=o(I,T,E),B===null?k=I:B.sibling=I,B=I);return t&&S.forEach(function(V){return e(C,V)}),oe&&In(C,E),k}function U(C,T,R,b){if(typeof R=="object"&&R!==null&&R.type===Ss&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Dl:e:{for(var k=R.key;T!==null;){if(T.key===k){if(k=R.type,k===Ss){if(T.tag===7){n(C,T.sibling),b=s(T,R.props.children),b.return=C,C=b;break e}}else if(T.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===$n&&qi(k)===T.type){n(C,T.sibling),b=s(T,R.props),Ko(b,R),b.return=C,C=b;break e}n(C,T);break}else e(C,T);T=T.sibling}R.type===Ss?(b=Hi(R.props.children,C.mode,b,R.key),b.return=C,C=b):(b=ta(R.type,R.key,R.props,null,C.mode,b),Ko(b,R),b.return=C,C=b)}return r(C);case jo:e:{for(k=R.key;T!==null;){if(T.key===k)if(T.tag===4&&T.stateNode.containerInfo===R.containerInfo&&T.stateNode.implementation===R.implementation){n(C,T.sibling),b=s(T,R.children||[]),b.return=C,C=b;break e}else{n(C,T);break}else e(C,T);T=T.sibling}b=Cc(R,C.mode,b),b.return=C,C=b}return r(C);case $n:return R=qi(R),U(C,T,R,b)}if(er(R))return w(C,T,R,b);if(Fo(R)){if(k=Fo(R),typeof k!="function")throw Error(q(150));return R=k.call(R),D(C,T,R,b)}if(typeof R.then=="function")return U(C,T,ql(R),b);if(R.$$typeof===xn)return U(C,T,kl(C,R),b);Bl(C,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,T!==null&&T.tag===6?(n(C,T.sibling),b=s(T,R),b.return=C,C=b):(n(C,T),b=Sc(R,C.mode,b),b.return=C,C=b),r(C)):n(C,T)}return function(C,T,R,b){try{br=0;var k=U(C,T,R,b);return Os=null,k}catch(S){if(S===vo||S===gu)throw S;var B=kt(29,S,null,C.mode);return B.lanes=b,B.return=C,B}finally{}}}var Wi=TT(!0),ET=TT(!1),Xn=!1;function oh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function fi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function di(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,he&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,e=Ra(t),dT(t,null,n),e}return pu(t,i,e,n),Ra(t)}function dr(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Bv(t,n)}}function Ic(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?s=o=r:o=o.next=r,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Mf=!1;function hr(){if(Mf){var t=Bs;if(t!==null)throw t}}function mr(t,e,n,i){Mf=!1;var s=t.updateQueue;Xn=!1;var o=s.firstBaseUpdate,r=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,r===null?o=d:r.next=d,r=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==r&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(o!==null){var p=s.baseState;r=0,h=d=c=null,l=o;do{var g=l.lane&-536870913,_=g!==l.lane;if(_?(se&g)===g:(i&g)===g){g!==0&&g===js&&(Mf=!0),h!==null&&(h=h.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var w=t,D=l;g=e;var U=n;switch(D.tag){case 1:if(w=D.payload,typeof w=="function"){p=w.call(U,p,g);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=D.payload,g=typeof w=="function"?w.call(U,p,g):w,g==null)break e;p=be({},p,g);break e;case 2:Xn=!0}}g=l.callback,g!==null&&(t.flags|=64,_&&(t.flags|=8192),_=s.callbacks,_===null?s.callbacks=[g]:_.push(g))}else _={lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=_,c=p):h=h.next=_,r|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);h===null&&(c=p),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,o===null&&(s.shared.lanes=0),Si|=r,t.lanes=r,t.memoizedState=p}}function AT(t,e){if(typeof t!="function")throw Error(q(191,t));t.call(e)}function ST(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)AT(n[t],e)}var eo=yn(null),Ma=yn(0);function jp(t,e){t=qn,Ie(Ma,t),Ie(eo,e),qn=t|e.baseLanes}function Nf(){Ie(Ma,qn),Ie(eo,eo.current)}function rh(){qn=Ma.current,et(eo),et(Ma)}var Ft=yn(null),jt=null;function Wn(t){var e=t.alternate;Ie(Oe,Oe.current&1),Ie(Ft,t),jt===null&&(e===null||eo.current!==null||e.memoizedState!==null)&&(jt=t)}function Df(t){Ie(Oe,Oe.current),Ie(Ft,t),jt===null&&(jt=t)}function CT(t){t.tag===22?(Ie(Oe,Oe.current),Ie(Ft,t),jt===null&&(jt=t)):jn()}function jn(){Ie(Oe,Oe.current),Ie(Ft,Ft.current)}function Lt(t){et(Ft),jt===t&&(jt=null),et(Oe)}var Oe=yn(0);function Na(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Xf(n)||Zf(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Un=0,j=null,Te=null,Fe=null,Da=!1,Gs=!1,ji=!1,ba=0,Vr=0,zs=null,_R=0;function Le(){throw Error(q(321))}function lh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ht(t[n],e[n]))return!1;return!0}function ah(t,e,n,i,s,o){return Un=o,j=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$.H=t===null||t.memoizedState===null?t0:vh,ji=!1,o=n(i,s),ji=!1,Gs&&(o=IT(e,n,i,s)),RT(t),o}function RT(t){$.H=Pr;var e=Te!==null&&Te.next!==null;if(Un=0,Fe=Te=j=null,Da=!1,Vr=0,zs=null,e)throw Error(q(300));t===null||Qe||(t=t.dependencies,t!==null&&wa(t)&&(Qe=!0))}function IT(t,e,n,i){j=t;var s=0;do{if(Gs&&(zs=null),Vr=0,Gs=!1,25<=s)throw Error(q(301));if(s+=1,Fe=Te=null,t.updateQueue!=null){var o=t.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}$.H=n0,o=e(n,i)}while(Gs);return o}function vR(){var t=$.H,e=t.useState()[0];return e=typeof e.then=="function"?jr(e):e,t=t.useState()[0],(Te!==null?Te.memoizedState:null)!==t&&(j.flags|=1024),e}function uh(){var t=ba!==0;return ba=0,t}function ch(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function fh(t){if(Da){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Da=!1}Un=0,Fe=Te=j=null,Gs=!1,Vr=ba=0,zs=null}function At(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?j.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function Ge(){if(Te===null){var t=j.alternate;t=t!==null?t.memoizedState:null}else t=Te.next;var e=Fe===null?j.memoizedState:Fe.next;if(e!==null)Fe=e,Te=t;else{if(t===null)throw j.alternate===null?Error(q(467)):Error(q(310));Te=t,t={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Fe===null?j.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}function yu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jr(t){var e=Vr;return Vr+=1,zs===null&&(zs=[]),t=vT(zs,t,e),e=j,(Fe===null?e.memoizedState:Fe.next)===null&&(e=e.alternate,$.H=e===null||e.memoizedState===null?t0:vh),t}function _u(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return jr(t);if(t.$$typeof===xn)return lt(t)}throw Error(q(438,String(t)))}function dh(t){var e=null,n=j.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=j.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=yu(),j.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=sC;return e.index++,n}function Ln(t,e){return typeof e=="function"?e(t):e}function ia(t){var e=Ge();return hh(e,Te,t)}function hh(t,e,n){var i=t.queue;if(i===null)throw Error(q(311));i.lastRenderedReducer=n;var s=t.baseQueue,o=i.pending;if(o!==null){if(s!==null){var r=s.next;s.next=o.next,o.next=r}e.baseQueue=s=o,i.pending=null}if(o=t.baseState,s===null)t.memoizedState=o;else{e=s.next;var l=r=null,c=null,d=e,h=!1;do{var p=d.lane&-536870913;if(p!==d.lane?(se&p)===p:(Un&p)===p){var g=d.revertLane;if(g===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),p===js&&(h=!0);else if((Un&g)===g){d=d.next,g===js&&(h=!0);continue}else p={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=p,r=o):c=c.next=p,j.lanes|=g,Si|=g;p=d.action,ji&&n(o,p),o=d.hasEagerState?d.eagerState:n(o,p)}else g={lane:p,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=g,r=o):c=c.next=g,j.lanes|=p,Si|=p;d=d.next}while(d!==null&&d!==e);if(c===null?r=o:c.next=l,!Ht(o,t.memoizedState)&&(Qe=!0,h&&(n=Bs,n!==null)))throw n;t.memoizedState=o,t.baseState=r,t.baseQueue=c,i.lastRenderedState=o}return s===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function wc(t){var e=Ge(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var r=s=s.next;do o=t(o,r.action),r=r.next;while(r!==s);Ht(o,e.memoizedState)||(Qe=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function wT(t,e,n){var i=j,s=Ge(),o=oe;if(o){if(n===void 0)throw Error(q(407));n=n()}else n=e();var r=!Ht((Te||s).memoizedState,n);if(r&&(s.memoizedState=n,Qe=!0),s=s.queue,mh(NT.bind(null,i,s,t),[t]),s.getSnapshot!==e||r||Fe!==null&&Fe.memoizedState.tag&1){if(i.flags|=2048,to(9,{destroy:void 0},MT.bind(null,i,s,n,e),null),Se===null)throw Error(q(349));o||Un&127||xT(i,e,n)}return n}function xT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=j.updateQueue,e===null?(e=yu(),j.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function MT(t,e,n,i){e.value=n,e.getSnapshot=i,DT(e)&&bT(t)}function NT(t,e,n){return n(function(){DT(e)&&bT(t)})}function DT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ht(t,n)}catch{return!0}}function bT(t){var e=as(t,2);e!==null&&Dt(e,t,2)}function bf(t){var e=At();if(typeof t=="function"){var n=t;if(t=n(),ji){ti(!0);try{n()}finally{ti(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:t},e}function VT(t,e,n,i){return t.baseState=n,hh(t,Te,typeof i=="function"?i:Ln)}function TR(t,e,n,i,s){if(Tu(t))throw Error(q(485));if(t=e.action,t!==null){var o={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){o.listeners.push(r)}};$.T!==null?n(!0):o.isTransition=!1,i(o),n=e.pending,n===null?(o.next=e.pending=o,PT(e,o)):(o.next=n.next,e.pending=n.next=o)}}function PT(t,e){var n=e.action,i=e.payload,s=t.state;if(e.isTransition){var o=$.T,r={};$.T=r;try{var l=n(s,i),c=$.S;c!==null&&c(r,l),eg(t,e,l)}catch(d){Vf(t,e,d)}finally{o!==null&&r.types!==null&&(o.types=r.types),$.T=o}}else try{o=n(s,i),eg(t,e,o)}catch(d){Vf(t,e,d)}}function eg(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){tg(t,e,i)},function(i){return Vf(t,e,i)}):tg(t,e,n)}function tg(t,e,n){e.status="fulfilled",e.value=n,UT(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,PT(t,n)))}function Vf(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,UT(e),e=e.next;while(e!==i)}t.action=null}function UT(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function LT(t,e){return e}function ng(t,e){if(oe){var n=Se.formState;if(n!==null){e:{var i=j;if(oe){if(Ne){t:{for(var s=Ne,o=Wt;s.nodeType!==8;){if(!o){s=null;break t}if(s=en(s.nextSibling),s===null){s=null;break t}}o=s.data,s=o==="F!"||o==="F"?s:null}if(s){Ne=en(s.nextSibling),i=s.data==="F!";break e}}Ei(i)}i=!1}i&&(e=n[0])}}return n=At(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:LT,lastRenderedState:e},n.queue=i,n=WT.bind(null,j,i),i.dispatch=n,i=bf(!1),o=_h.bind(null,j,!1,i.queue),i=At(),s={state:e,dispatch:null,action:t,pending:null},i.queue=s,n=TR.bind(null,j,s,o,n),s.dispatch=n,i.memoizedState=t,[e,n,!1]}function ig(t){var e=Ge();return kT(e,Te,t)}function kT(t,e,n){if(e=hh(t,e,LT)[0],t=ia(Ln)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=jr(e)}catch(r){throw r===vo?gu:r}else i=e;e=Ge();var s=e.queue,o=s.dispatch;return n!==e.memoizedState&&(j.flags|=2048,to(9,{destroy:void 0},ER.bind(null,s,n),null)),[i,o,t]}function ER(t,e){t.action=e}function sg(t){var e=Ge(),n=Te;if(n!==null)return kT(e,n,t);Ge(),e=e.memoizedState,n=Ge();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function to(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=j.updateQueue,e===null&&(e=yu(),j.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function qT(){return Ge().memoizedState}function sa(t,e,n,i){var s=At();j.flags|=t,s.memoizedState=to(1|e,{destroy:void 0},n,i===void 0?null:i)}function vu(t,e,n,i){var s=Ge();i=i===void 0?null:i;var o=s.memoizedState.inst;Te!==null&&i!==null&&lh(i,Te.memoizedState.deps)?s.memoizedState=to(e,o,n,i):(j.flags|=t,s.memoizedState=to(1|e,o,n,i))}function og(t,e){sa(8390656,8,t,e)}function mh(t,e){vu(2048,8,t,e)}function AR(t){j.flags|=4;var e=j.updateQueue;if(e===null)e=yu(),j.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function BT(t){var e=Ge().memoizedState;return AR({ref:e,nextImpl:t}),function(){if(he&2)throw Error(q(440));return e.impl.apply(void 0,arguments)}}function OT(t,e){return vu(4,2,t,e)}function GT(t,e){return vu(4,4,t,e)}function zT(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function HT(t,e,n){n=n!=null?n.concat([t]):null,vu(4,4,zT.bind(null,e,t),n)}function ph(){}function FT(t,e){var n=Ge();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&lh(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function YT(t,e){var n=Ge();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&lh(e,i[1]))return i[0];if(i=t(),ji){ti(!0);try{t()}finally{ti(!1)}}return n.memoizedState=[i,e],i}function gh(t,e,n){return n===void 0||Un&1073741824&&!(se&261930)?t.memoizedState=e:(t.memoizedState=n,t=V0(),j.lanes|=t,Si|=t,n)}function JT(t,e,n,i){return Ht(n,e)?n:eo.current!==null?(t=gh(t,n,i),Ht(t,e)||(Qe=!0),t):!(Un&42)||Un&1073741824&&!(se&261930)?(Qe=!0,t.memoizedState=n):(t=V0(),j.lanes|=t,Si|=t,e)}function KT(t,e,n,i,s){var o=me.p;me.p=o!==0&&8>o?o:8;var r=$.T,l={};$.T=l,_h(t,!1,e,n);try{var c=s(),d=$.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=yR(c,i);pr(t,e,h,zt(t))}else pr(t,e,i,zt(t))}catch(p){pr(t,e,{then:function(){},status:"rejected",reason:p},zt())}finally{me.p=o,r!==null&&l.types!==null&&(r.types=l.types),$.T=r}}function SR(){}function Pf(t,e,n,i){if(t.tag!==5)throw Error(q(476));var s=QT(t).queue;KT(t,s,e,zi,n===null?SR:function(){return $T(t),n(i)})}function QT(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:zi,baseState:zi,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:zi},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function $T(t){var e=QT(t);e.next===null&&(e=t.alternate.memoizedState),pr(t,e.next.queue,{},zt())}function yh(){return lt(kr)}function XT(){return Ge().memoizedState}function ZT(){return Ge().memoizedState}function CR(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=zt();t=fi(n);var i=di(e,t,n);i!==null&&(Dt(i,e,n),dr(i,e,n)),e={cache:nh()},t.payload=e;return}e=e.return}}function RR(t,e,n){var i=zt();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Tu(t)?jT(e,n):(n=Wd(t,e,n,i),n!==null&&(Dt(n,t,i),e0(n,e,i)))}function WT(t,e,n){var i=zt();pr(t,e,n,i)}function pr(t,e,n,i){var s={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tu(t))jT(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var r=e.lastRenderedState,l=o(r,n);if(s.hasEagerState=!0,s.eagerState=l,Ht(l,r))return pu(t,e,s,0),Se===null&&mu(),!1}catch{}finally{}if(n=Wd(t,e,s,i),n!==null)return Dt(n,t,i),e0(n,e,i),!0}return!1}function _h(t,e,n,i){if(i={lane:2,revertLane:wh(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Tu(t)){if(e)throw Error(q(479))}else e=Wd(t,n,i,2),e!==null&&Dt(e,t,2)}function Tu(t){var e=t.alternate;return t===j||e!==null&&e===j}function jT(t,e){Gs=Da=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function e0(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Bv(t,n)}}var Pr={readContext:lt,use:_u,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useLayoutEffect:Le,useInsertionEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useSyncExternalStore:Le,useId:Le,useHostTransitionStatus:Le,useFormState:Le,useActionState:Le,useOptimistic:Le,useMemoCache:Le,useCacheRefresh:Le};Pr.useEffectEvent=Le;var t0={readContext:lt,use:_u,useCallback:function(t,e){return At().memoizedState=[t,e===void 0?null:e],t},useContext:lt,useEffect:og,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,sa(4194308,4,zT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sa(4194308,4,t,e)},useInsertionEffect:function(t,e){sa(4,2,t,e)},useMemo:function(t,e){var n=At();e=e===void 0?null:e;var i=t();if(ji){ti(!0);try{t()}finally{ti(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=At();if(n!==void 0){var s=n(e);if(ji){ti(!0);try{n(e)}finally{ti(!1)}}}else s=e;return i.memoizedState=i.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=RR.bind(null,j,t),[i.memoizedState,t]},useRef:function(t){var e=At();return t={current:t},e.memoizedState=t},useState:function(t){t=bf(t);var e=t.queue,n=WT.bind(null,j,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:ph,useDeferredValue:function(t,e){var n=At();return gh(n,t,e)},useTransition:function(){var t=bf(!1);return t=KT.bind(null,j,t.queue,!0,!1),At().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=j,s=At();if(oe){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Se===null)throw Error(q(349));se&127||xT(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,og(NT.bind(null,i,o,t),[t]),i.flags|=2048,to(9,{destroy:void 0},MT.bind(null,i,o,n,e),null),n},useId:function(){var t=At(),e=Se.identifierPrefix;if(oe){var n=dn,i=fn;n=(i&~(1<<32-Gt(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=ba++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=_R++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:yh,useFormState:ng,useActionState:ng,useOptimistic:function(t){var e=At();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=_h.bind(null,j,!0,n),n.dispatch=e,[t,e]},useMemoCache:dh,useCacheRefresh:function(){return At().memoizedState=CR.bind(null,j)},useEffectEvent:function(t){var e=At(),n={impl:t};return e.memoizedState=n,function(){if(he&2)throw Error(q(440));return n.impl.apply(void 0,arguments)}}},vh={readContext:lt,use:_u,useCallback:FT,useContext:lt,useEffect:mh,useImperativeHandle:HT,useInsertionEffect:OT,useLayoutEffect:GT,useMemo:YT,useReducer:ia,useRef:qT,useState:function(){return ia(Ln)},useDebugValue:ph,useDeferredValue:function(t,e){var n=Ge();return JT(n,Te.memoizedState,t,e)},useTransition:function(){var t=ia(Ln)[0],e=Ge().memoizedState;return[typeof t=="boolean"?t:jr(t),e]},useSyncExternalStore:wT,useId:XT,useHostTransitionStatus:yh,useFormState:ig,useActionState:ig,useOptimistic:function(t,e){var n=Ge();return VT(n,Te,t,e)},useMemoCache:dh,useCacheRefresh:ZT};vh.useEffectEvent=BT;var n0={readContext:lt,use:_u,useCallback:FT,useContext:lt,useEffect:mh,useImperativeHandle:HT,useInsertionEffect:OT,useLayoutEffect:GT,useMemo:YT,useReducer:wc,useRef:qT,useState:function(){return wc(Ln)},useDebugValue:ph,useDeferredValue:function(t,e){var n=Ge();return Te===null?gh(n,t,e):JT(n,Te.memoizedState,t,e)},useTransition:function(){var t=wc(Ln)[0],e=Ge().memoizedState;return[typeof t=="boolean"?t:jr(t),e]},useSyncExternalStore:wT,useId:XT,useHostTransitionStatus:yh,useFormState:sg,useActionState:sg,useOptimistic:function(t,e){var n=Ge();return Te!==null?VT(n,Te,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:dh,useCacheRefresh:ZT};n0.useEffectEvent=BT;function xc(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Uf={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=zt(),s=fi(i);s.payload=e,n!=null&&(s.callback=n),e=di(t,s,i),e!==null&&(Dt(e,t,i),dr(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=zt(),s=fi(i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=di(t,s,i),e!==null&&(Dt(e,t,i),dr(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zt(),i=fi(n);i.tag=2,e!=null&&(i.callback=e),e=di(t,i,n),e!==null&&(Dt(e,t,n),dr(e,t,n))}};function rg(t,e,n,i,s,o,r){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,r):e.prototype&&e.prototype.isPureReactComponent?!Mr(n,i)||!Mr(s,o):!0}function lg(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Uf.enqueueReplaceState(e,e.state,null)}function es(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=be({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}function i0(t){Ca(t)}function s0(t){console.error(t)}function o0(t){Ca(t)}function Va(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function ag(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Lf(t,e,n){return n=fi(n),n.tag=3,n.payload={element:null},n.callback=function(){Va(t,e)},n}function r0(t){return t=fi(t),t.tag=3,t}function l0(t,e,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var o=i.value;t.payload=function(){return s(o)},t.callback=function(){ag(e,n,i)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){ag(e,n,i),typeof s!="function"&&(hi===null?hi=new Set([this]):hi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function IR(t,e,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&_o(e,n,s,!0),n=Ft.current,n!==null){switch(n.tag){case 31:case 13:return jt===null?qa():n.alternate===null&&ke===0&&(ke=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===xa?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Bc(t,i,s)),!1;case 22:return n.flags|=65536,i===xa?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Bc(t,i,s)),!1}throw Error(q(435,n.tag))}return Bc(t,i,s),qa(),!1}if(oe)return e=Ft.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,i!==Sf&&(t=Error(q(422),{cause:i}),Dr(Zt(t,n)))):(i!==Sf&&(e=Error(q(423),{cause:i}),Dr(Zt(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,i=Zt(i,n),s=Lf(t.stateNode,i,s),Ic(t,s),ke!==4&&(ke=2)),!1;var o=Error(q(520),{cause:i});if(o=Zt(o,n),_r===null?_r=[o]:_r.push(o),ke!==4&&(ke=2),e===null)return!0;i=Zt(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=Lf(n.stateNode,i,t),Ic(n,t),!1;case 1:if(e=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(hi===null||!hi.has(o))))return n.flags|=65536,s&=-s,n.lanes|=s,s=r0(s),l0(s,t,n,i),Ic(n,s),!1}n=n.return}while(n!==null);return!1}var Th=Error(q(461)),Qe=!1;function it(t,e,n,i){e.child=t===null?ET(e,null,n,i):Wi(e,t.child,n,i)}function ug(t,e,n,i,s){n=n.render;var o=e.ref;if("ref"in i){var r={};for(var l in i)l!=="ref"&&(r[l]=i[l])}else r=i;return Zi(e),i=ah(t,e,n,r,o,s),l=uh(),t!==null&&!Qe?(ch(t,e,s),kn(t,e,s)):(oe&&l&&eh(e),e.flags|=1,it(t,e,i,s),e.child)}function cg(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!jd(o)&&o.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=o,a0(t,e,o,i,s)):(t=ta(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!Eh(t,s)){var r=o.memoizedProps;if(n=n.compare,n=n!==null?n:Mr,n(r,i)&&t.ref===e.ref)return kn(t,e,s)}return e.flags|=1,t=Dn(o,i),t.ref=e.ref,t.return=e,e.child=t}function a0(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(Mr(o,i)&&t.ref===e.ref)if(Qe=!1,e.pendingProps=i=o,Eh(t,s))t.flags&131072&&(Qe=!0);else return e.lanes=t.lanes,kn(t,e,s)}return kf(t,e,n,i,s)}function u0(t,e,n,i){var s=i.children,o=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(o=o!==null?o.baseLanes|n:n,t!==null){for(i=e.child=t.child,s=0;i!==null;)s=s|i.lanes|i.childLanes,i=i.sibling;i=s&~o}else i=0,e.child=null;return fg(t,e,o,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&na(e,o!==null?o.cachePool:null),o!==null?jp(e,o):Nf(),CT(e);else return i=e.lanes=536870912,fg(t,e,o!==null?o.baseLanes|n:n,n,i)}else o!==null?(na(e,o.cachePool),jp(e,o),jn(),e.memoizedState=null):(t!==null&&na(e,null),Nf(),jn());return it(t,e,s,n),e.child}function nr(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function fg(t,e,n,i,s){var o=ih();return o=o===null?null:{parent:Je._currentValue,pool:o},e.memoizedState={baseLanes:n,cachePool:o},t!==null&&na(e,null),Nf(),CT(e),t!==null&&_o(t,e,i,!0),e.childLanes=s,null}function oa(t,e){return e=Pa({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function dg(t,e,n){return Wi(e,t.child,null,n),t=oa(e,e.pendingProps),t.flags|=2,Lt(e),e.memoizedState=null,t}function wR(t,e,n){var i=e.pendingProps,s=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(oe){if(i.mode==="hidden")return t=oa(e,i),e.lanes=536870912,nr(null,t);if(Df(e),(t=Ne)?(t=tE(t,Wt),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ti!==null?{id:fn,overflow:dn}:null,retryLane:536870912,hydrationErrors:null},n=mT(t),n.return=e,e.child=n,rt=e,Ne=null)):t=null,t===null)throw Ei(e);return e.lanes=536870912,null}return oa(e,i)}var o=t.memoizedState;if(o!==null){var r=o.dehydrated;if(Df(e),s)if(e.flags&256)e.flags&=-257,e=dg(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(q(558));else if(Qe||_o(t,e,n,!1),s=(n&t.childLanes)!==0,Qe||s){if(i=Se,i!==null&&(r=Ov(i,n),r!==0&&r!==o.retryLane))throw o.retryLane=r,as(t,r),Dt(i,t,r),Th;qa(),e=dg(t,e,n)}else t=o.treeContext,Ne=en(r.nextSibling),rt=e,oe=!0,ci=null,Wt=!1,t!==null&&gT(e,t),e=oa(e,i),e.flags|=4096;return e}return t=Dn(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function ra(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(q(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function kf(t,e,n,i,s){return Zi(e),n=ah(t,e,n,i,void 0,s),i=uh(),t!==null&&!Qe?(ch(t,e,s),kn(t,e,s)):(oe&&i&&eh(e),e.flags|=1,it(t,e,n,s),e.child)}function hg(t,e,n,i,s,o){return Zi(e),e.updateQueue=null,n=IT(e,i,n,s),RT(t),i=uh(),t!==null&&!Qe?(ch(t,e,o),kn(t,e,o)):(oe&&i&&eh(e),e.flags|=1,it(t,e,n,o),e.child)}function mg(t,e,n,i,s){if(Zi(e),e.stateNode===null){var o=Ds,r=n.contextType;typeof r=="object"&&r!==null&&(o=lt(r)),o=new n(i,o),e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Uf,e.stateNode=o,o._reactInternals=e,o=e.stateNode,o.props=i,o.state=e.memoizedState,o.refs={},oh(e),r=n.contextType,o.context=typeof r=="object"&&r!==null?lt(r):Ds,o.state=e.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(xc(e,n,r,i),o.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(r=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),r!==o.state&&Uf.enqueueReplaceState(o,o.state,null),mr(e,i,o,s),hr(),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){o=e.stateNode;var l=e.memoizedProps,c=es(n,l);o.props=c;var d=o.context,h=n.contextType;r=Ds,typeof h=="object"&&h!==null&&(r=lt(h));var p=n.getDerivedStateFromProps;h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l||d!==r)&&lg(e,o,i,r),Xn=!1;var g=e.memoizedState;o.state=g,mr(e,i,o,s),hr(),d=e.memoizedState,l||g!==d||Xn?(typeof p=="function"&&(xc(e,n,p,i),d=e.memoizedState),(c=Xn||rg(e,n,c,i,g,d,r))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),o.props=i,o.state=d,o.context=r,i=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,xf(t,e),r=e.memoizedProps,h=es(n,r),o.props=h,p=e.pendingProps,g=o.context,d=n.contextType,c=Ds,typeof d=="object"&&d!==null&&(c=lt(d)),l=n.getDerivedStateFromProps,(d=typeof l=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(r!==p||g!==c)&&lg(e,o,i,c),Xn=!1,g=e.memoizedState,o.state=g,mr(e,i,o,s),hr();var _=e.memoizedState;r!==p||g!==_||Xn||t!==null&&t.dependencies!==null&&wa(t.dependencies)?(typeof l=="function"&&(xc(e,n,l,i),_=e.memoizedState),(h=Xn||rg(e,n,h,i,g,_,c)||t!==null&&t.dependencies!==null&&wa(t.dependencies))?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,_,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||r===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),o.props=i,o.state=_,o.context=c,i=h):(typeof o.componentDidUpdate!="function"||r===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),i=!1)}return o=i,ra(t,e),i=(e.flags&128)!==0,o||i?(o=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:o.render(),e.flags|=1,t!==null&&i?(e.child=Wi(e,t.child,null,s),e.child=Wi(e,null,n,s)):it(t,e,n,s),e.memoizedState=o.state,t=e.child):t=kn(t,e,s),t}function pg(t,e,n,i){return Xi(),e.flags|=256,it(t,e,n,i),e.child}var Mc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nc(t){return{baseLanes:t,cachePool:_T()}}function Dc(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=qt),t}function c0(t,e,n){var i=e.pendingProps,s=!1,o=(e.flags&128)!==0,r;if((r=o)||(r=t!==null&&t.memoizedState===null?!1:(Oe.current&2)!==0),r&&(s=!0,e.flags&=-129),r=(e.flags&32)!==0,e.flags&=-33,t===null){if(oe){if(s?Wn(e):jn(),(t=Ne)?(t=tE(t,Wt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ti!==null?{id:fn,overflow:dn}:null,retryLane:536870912,hydrationErrors:null},n=mT(t),n.return=e,e.child=n,rt=e,Ne=null)):t=null,t===null)throw Ei(e);return Zf(t)?e.lanes=32:e.lanes=536870912,null}var l=i.children;return i=i.fallback,s?(jn(),s=e.mode,l=Pa({mode:"hidden",children:l},s),i=Hi(i,s,n,null),l.return=e,i.return=e,l.sibling=i,e.child=l,i=e.child,i.memoizedState=Nc(n),i.childLanes=Dc(t,r,n),e.memoizedState=Mc,nr(null,i)):(Wn(e),qf(e,l))}var c=t.memoizedState;if(c!==null&&(l=c.dehydrated,l!==null)){if(o)e.flags&256?(Wn(e),e.flags&=-257,e=bc(t,e,n)):e.memoizedState!==null?(jn(),e.child=t.child,e.flags|=128,e=null):(jn(),l=i.fallback,s=e.mode,i=Pa({mode:"visible",children:i.children},s),l=Hi(l,s,n,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,Wi(e,t.child,null,n),i=e.child,i.memoizedState=Nc(n),i.childLanes=Dc(t,r,n),e.memoizedState=Mc,e=nr(null,i));else if(Wn(e),Zf(l)){if(r=l.nextSibling&&l.nextSibling.dataset,r)var d=r.dgst;r=d,i=Error(q(419)),i.stack="",i.digest=r,Dr({value:i,source:null,stack:null}),e=bc(t,e,n)}else if(Qe||_o(t,e,n,!1),r=(n&t.childLanes)!==0,Qe||r){if(r=Se,r!==null&&(i=Ov(r,n),i!==0&&i!==c.retryLane))throw c.retryLane=i,as(t,i),Dt(r,t,i),Th;Xf(l)||qa(),e=bc(t,e,n)}else Xf(l)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,Ne=en(l.nextSibling),rt=e,oe=!0,ci=null,Wt=!1,t!==null&&gT(e,t),e=qf(e,i.children),e.flags|=4096);return e}return s?(jn(),l=i.fallback,s=e.mode,c=t.child,d=c.sibling,i=Dn(c,{mode:"hidden",children:i.children}),i.subtreeFlags=c.subtreeFlags&65011712,d!==null?l=Dn(d,l):(l=Hi(l,s,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,nr(null,i),i=e.child,l=t.child.memoizedState,l===null?l=Nc(n):(s=l.cachePool,s!==null?(c=Je._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=_T(),l={baseLanes:l.baseLanes|n,cachePool:s}),i.memoizedState=l,i.childLanes=Dc(t,r,n),e.memoizedState=Mc,nr(t.child,i)):(Wn(e),n=t.child,t=n.sibling,n=Dn(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n)}function qf(t,e){return e=Pa({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Pa(t,e){return t=kt(22,t,null,e),t.lanes=0,t}function bc(t,e,n){return Wi(e,t.child,null,n),t=qf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gg(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Rf(t.return,e,n)}function Vc(t,e,n,i,s,o){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s,treeForkCount:o}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s,r.treeForkCount=o)}function f0(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;i=i.children;var r=Oe.current,l=(r&2)!==0;if(l?(r=r&1|2,e.flags|=128):r&=1,Ie(Oe,r),it(t,e,i,n),i=oe?Nr:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gg(t,n,e);else if(t.tag===19)gg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Na(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Vc(e,!1,s,n,o,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Na(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Vc(e,!0,n,null,o,i);break;case"together":Vc(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Si|=e.lanes,!(n&e.childLanes))if(t!==null){if(_o(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=Dn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Dn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Eh(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&wa(t)))}function xR(t,e,n){switch(e.tag){case 3:Ta(e,e.stateNode.containerInfo),Zn(e,Je,t.memoizedState.cache),Xi();break;case 27:case 5:df(e);break;case 4:Ta(e,e.stateNode.containerInfo);break;case 10:Zn(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Df(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Wn(e),e.flags|=128,null):n&e.child.childLanes?c0(t,e,n):(Wn(e),t=kn(t,e,n),t!==null?t.sibling:null);Wn(e);break;case 19:var s=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(_o(t,e,n,!1),i=(n&e.childLanes)!==0),s){if(i)return f0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Oe,Oe.current),i)break;return null;case 22:return e.lanes=0,u0(t,e,n,e.pendingProps);case 24:Zn(e,Je,t.memoizedState.cache)}return kn(t,e,n)}function d0(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Qe=!0;else{if(!Eh(t,n)&&!(e.flags&128))return Qe=!1,xR(t,e,n);Qe=!!(t.flags&131072)}else Qe=!1,oe&&e.flags&1048576&&pT(e,Nr,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=qi(e.elementType),e.type=t,typeof t=="function")jd(t)?(i=es(t,i),e.tag=1,e=mg(null,e,t,i,n)):(e.tag=0,e=kf(null,e,t,i,n));else{if(t!=null){var s=t.$$typeof;if(s===Bd){e.tag=11,e=ug(null,e,t,i,n);break e}else if(s===Od){e.tag=14,e=cg(null,e,t,i,n);break e}}throw e=cf(t)||t,Error(q(306,e,""))}}return e;case 0:return kf(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,s=es(i,e.pendingProps),mg(t,e,i,s,n);case 3:e:{if(Ta(e,e.stateNode.containerInfo),t===null)throw Error(q(387));i=e.pendingProps;var o=e.memoizedState;s=o.element,xf(t,e),mr(e,i,null,n);var r=e.memoizedState;if(i=r.cache,Zn(e,Je,i),i!==o.cache&&If(e,[Je],n,!0),hr(),i=r.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:r.cache},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){e=pg(t,e,i,n);break e}else if(i!==s){s=Zt(Error(q(424)),e),Dr(s),e=pg(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ne=en(t.firstChild),rt=e,oe=!0,ci=null,Wt=!0,n=ET(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Xi(),i===s){e=kn(t,e,n);break e}it(t,e,i,n)}e=e.child}return e;case 26:return ra(t,e),t===null?(n=Lg(e.type,null,e.pendingProps,null))?e.memoizedState=n:oe||(n=e.type,t=e.pendingProps,i=za(ui.current).createElement(n),i[ot]=e,i[bt]=t,at(i,n,t),je(i),e.stateNode=i):e.memoizedState=Lg(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return df(e),t===null&&oe&&(i=e.stateNode=nE(e.type,e.pendingProps,ui.current),rt=e,Wt=!0,s=Ne,xi(e.type)?(Wf=s,Ne=en(i.firstChild)):Ne=s),it(t,e,e.pendingProps.children,n),ra(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&oe&&((s=i=Ne)&&(i=sI(i,e.type,e.pendingProps,Wt),i!==null?(e.stateNode=i,rt=e,Ne=en(i.firstChild),Wt=!1,s=!0):s=!1),s||Ei(e)),df(e),s=e.type,o=e.pendingProps,r=t!==null?t.memoizedProps:null,i=o.children,Qf(s,o)?i=null:r!==null&&Qf(s,r)&&(e.flags|=32),e.memoizedState!==null&&(s=ah(t,e,vR,null,null,n),kr._currentValue=s),ra(t,e),it(t,e,i,n),e.child;case 6:return t===null&&oe&&((t=n=Ne)&&(n=oI(n,e.pendingProps,Wt),n!==null?(e.stateNode=n,rt=e,Ne=null,t=!0):t=!1),t||Ei(e)),null;case 13:return c0(t,e,n);case 4:return Ta(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Wi(e,null,i,n):it(t,e,i,n),e.child;case 11:return ug(t,e,e.type,e.pendingProps,n);case 7:return it(t,e,e.pendingProps,n),e.child;case 8:return it(t,e,e.pendingProps.children,n),e.child;case 12:return it(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Zn(e,e.type,i.value),it(t,e,i.children,n),e.child;case 9:return s=e.type._context,i=e.pendingProps.children,Zi(e),s=lt(s),i=i(s),e.flags|=1,it(t,e,i,n),e.child;case 14:return cg(t,e,e.type,e.pendingProps,n);case 15:return a0(t,e,e.type,e.pendingProps,n);case 19:return f0(t,e,n);case 31:return wR(t,e,n);case 22:return u0(t,e,n,e.pendingProps);case 24:return Zi(e),i=lt(Je),t===null?(s=ih(),s===null&&(s=Se,o=nh(),s.pooledCache=o,o.refCount++,o!==null&&(s.pooledCacheLanes|=n),s=o),e.memoizedState={parent:i,cache:s},oh(e),Zn(e,Je,s)):(t.lanes&n&&(xf(t,e),mr(e,null,null,n),hr()),s=t.memoizedState,o=e.memoizedState,s.parent!==i?(s={parent:i,cache:i},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),Zn(e,Je,i)):(i=o.cache,Zn(e,Je,i),i!==s.cache&&If(e,[Je],n,!0))),it(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(q(156,e.tag))}function An(t){t.flags|=4}function Pc(t,e,n,i,s){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(s&335544128)===s)if(t.stateNode.complete)t.flags|=8192;else if(L0())t.flags|=8192;else throw Yi=xa,sh}else t.flags&=-16777217}function yg(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!oE(e))if(L0())t.flags|=8192;else throw Yi=xa,sh}function Ol(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?kv():536870912,t.lanes|=e,no|=e)}function Qo(t,e){if(!oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function MR(t,e,n){var i=e.pendingProps;switch(th(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xe(e),null;case 1:return xe(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),bn(Je),Xs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ps(e)?An(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rc())),xe(e),null;case 26:var s=e.type,o=e.memoizedState;return t===null?(An(e),o!==null?(xe(e),yg(e,o)):(xe(e),Pc(e,s,null,i,n))):o?o!==t.memoizedState?(An(e),xe(e),yg(e,o)):(xe(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&An(e),xe(e),Pc(e,s,t,i,n)),null;case 27:if(Ea(e),n=ui.current,s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&An(e);else{if(!i){if(e.stateNode===null)throw Error(q(166));return xe(e),null}t=mn.current,ps(e)?Jp(e):(t=nE(s,i,n),e.stateNode=t,An(e))}return xe(e),null;case 5:if(Ea(e),s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&An(e);else{if(!i){if(e.stateNode===null)throw Error(q(166));return xe(e),null}if(o=mn.current,ps(e))Jp(e);else{var r=za(ui.current);switch(o){case 1:o=r.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:o=r.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":o=r.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":o=r.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":o=r.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?o.multiple=!0:i.size&&(o.size=i.size);break;default:o=typeof i.is=="string"?r.createElement(s,{is:i.is}):r.createElement(s)}}o[ot]=e,o[bt]=i;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)o.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=o;e:switch(at(o,s,i),s){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&An(e)}}return xe(e),Pc(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&An(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(q(166));if(t=ui.current,ps(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,s=rt,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}t[ot]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||W0(t.nodeValue,n)),t||Ei(e,!0)}else t=za(t).createTextNode(i),t[ot]=e,e.stateNode=t}return xe(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=ps(e),n!==null){if(t===null){if(!i)throw Error(q(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(557));t[ot]=e}else Xi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xe(e),t=!1}else n=Rc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Lt(e),e):(Lt(e),null);if(e.flags&128)throw Error(q(558))}return xe(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=ps(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[ot]=e}else Xi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xe(e),s=!1}else s=Rc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?(Lt(e),e):(Lt(e),null)}return Lt(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==s&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Ol(e,e.updateQueue),xe(e),null);case 4:return Xs(),t===null&&xh(e.stateNode.containerInfo),xe(e),null;case 10:return bn(e.type),xe(e),null;case 19:if(et(Oe),i=e.memoizedState,i===null)return xe(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Qo(i,!1);else{if(ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Na(t),o!==null){for(e.flags|=128,Qo(i,!1),t=o.updateQueue,e.updateQueue=t,Ol(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)hT(n,t),n=n.sibling;return Ie(Oe,Oe.current&1|2),oe&&In(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&Bt()>La&&(e.flags|=128,s=!0,Qo(i,!1),e.lanes=4194304)}else{if(!s)if(t=Na(o),t!==null){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,Ol(e,t),Qo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!oe)return xe(e),null}else 2*Bt()-i.renderingStartTime>La&&n!==536870912&&(e.flags|=128,s=!0,Qo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Bt(),t.sibling=null,n=Oe.current,Ie(Oe,s?n&1|2:n&1),oe&&In(e,i.treeForkCount),t):(xe(e),null);case 22:case 23:return Lt(e),rh(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(xe(e),e.subtreeFlags&6&&(e.flags|=8192)):xe(e),n=e.updateQueue,n!==null&&Ol(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&et(Fi),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),bn(Je),xe(e),null;case 25:return null;case 30:return null}throw Error(q(156,e.tag))}function NR(t,e){switch(th(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bn(Je),Xs(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Ea(e),null;case 31:if(e.memoizedState!==null){if(Lt(e),e.alternate===null)throw Error(q(340));Xi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Lt(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Xi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return et(Oe),null;case 4:return Xs(),null;case 10:return bn(e.type),null;case 22:case 23:return Lt(e),rh(),t!==null&&et(Fi),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return bn(Je),null;case 25:return null;default:return null}}function h0(t,e){switch(th(e),e.tag){case 3:bn(Je),Xs();break;case 26:case 27:case 5:Ea(e);break;case 4:Xs();break;case 31:e.memoizedState!==null&&Lt(e);break;case 13:Lt(e);break;case 19:et(Oe);break;case 10:bn(e.type);break;case 22:case 23:Lt(e),rh(),t!==null&&et(Fi);break;case 24:bn(Je)}}function el(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&t)===t){i=void 0;var o=n.create,r=n.inst;i=o(),r.destroy=i}n=n.next}while(n!==s)}}catch(l){ye(e,e.return,l)}}function Ai(t,e,n){try{var i=e.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var o=s.next;i=o;do{if((i.tag&t)===t){var r=i.inst,l=r.destroy;if(l!==void 0){r.destroy=void 0,s=e;var c=n,d=l;try{d()}catch(h){ye(s,c,h)}}}i=i.next}while(i!==o)}}catch(h){ye(e,e.return,h)}}function m0(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{ST(e,n)}catch(i){ye(t,t.return,i)}}}function p0(t,e,n){n.props=es(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){ye(t,e,i)}}function gr(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(s){ye(t,e,s)}}function hn(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){ye(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){ye(t,e,s)}else n.current=null}function g0(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){ye(t,t.return,s)}}function Uc(t,e,n){try{var i=t.stateNode;WR(i,t.type,n,e),i[bt]=e}catch(s){ye(t,t.return,s)}}function y0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&xi(t.type)||t.tag===4}function Lc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||y0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&xi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mn));else if(i!==4&&(i===27&&xi(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Bf(t,e,n),t=t.sibling;t!==null;)Bf(t,e,n),t=t.sibling}function Ua(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&xi(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Ua(t,e,n),t=t.sibling;t!==null;)Ua(t,e,n),t=t.sibling}function _0(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);at(e,i,n),e[ot]=t,e[bt]=n}catch(o){ye(t,t.return,o)}}var wn=!1,Ye=!1,kc=!1,_g=typeof WeakSet=="function"?WeakSet:Set,We=null;function DR(t,e){if(t=t.containerInfo,Jf=Ja,t=oT(t),Xd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var r=0,l=-1,c=-1,d=0,h=0,p=t,g=null;t:for(;;){for(var _;p!==n||s!==0&&p.nodeType!==3||(l=r+s),p!==o||i!==0&&p.nodeType!==3||(c=r+i),p.nodeType===3&&(r+=p.nodeValue.length),(_=p.firstChild)!==null;)g=p,p=_;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=r),g===o&&++h===i&&(c=r),(_=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=_}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kf={focusedElem:t,selectionRange:n},Ja=!1,We=e;We!==null;)if(e=We,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,We=t;else for(;We!==null;){switch(e=We,o=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)s=t[n],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&o!==null){t=void 0,n=e,s=o.memoizedProps,o=o.memoizedState,i=n.stateNode;try{var w=es(n.type,s);t=i.getSnapshotBeforeUpdate(w,o),i.__reactInternalSnapshotBeforeUpdate=t}catch(D){ye(n,n.return,D)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)$f(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":$f(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(q(163))}if(t=e.sibling,t!==null){t.return=e.return,We=t;break}We=e.return}}function v0(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Cn(t,n),i&4&&el(5,n);break;case 1:if(Cn(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(r){ye(n,n.return,r)}else{var s=es(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(r){ye(n,n.return,r)}}i&64&&m0(n),i&512&&gr(n,n.return);break;case 3:if(Cn(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{ST(t,e)}catch(r){ye(n,n.return,r)}}break;case 27:e===null&&i&4&&_0(n);case 26:case 5:Cn(t,n),e===null&&i&4&&g0(n),i&512&&gr(n,n.return);break;case 12:Cn(t,n);break;case 31:Cn(t,n),i&4&&A0(t,n);break;case 13:Cn(t,n),i&4&&S0(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=OR.bind(null,n),rI(t,n))));break;case 22:if(i=n.memoizedState!==null||wn,!i){e=e!==null&&e.memoizedState!==null||Ye,s=wn;var o=Ye;wn=i,(Ye=e)&&!o?Rn(t,n,(n.subtreeFlags&8772)!==0):Cn(t,n),wn=s,Ye=o}break;case 30:break;default:Cn(t,n)}}function T0(t){var e=t.alternate;e!==null&&(t.alternate=null,T0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Fd(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ve=null,Mt=!1;function Sn(t,e,n){for(n=n.child;n!==null;)E0(t,e,n),n=n.sibling}function E0(t,e,n){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Kr,n)}catch{}switch(n.tag){case 26:Ye||hn(n,e),Sn(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ye||hn(n,e);var i=Ve,s=Mt;xi(n.type)&&(Ve=n.stateNode,Mt=!1),Sn(t,e,n),Tr(n.stateNode),Ve=i,Mt=s;break;case 5:Ye||hn(n,e);case 6:if(i=Ve,s=Mt,Ve=null,Sn(t,e,n),Ve=i,Mt=s,Ve!==null)if(Mt)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(n.stateNode)}catch(o){ye(n,e,o)}else try{Ve.removeChild(n.stateNode)}catch(o){ye(n,e,o)}break;case 18:Ve!==null&&(Mt?(t=Ve,Dg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),ro(t)):Dg(Ve,n.stateNode));break;case 4:i=Ve,s=Mt,Ve=n.stateNode.containerInfo,Mt=!0,Sn(t,e,n),Ve=i,Mt=s;break;case 0:case 11:case 14:case 15:Ai(2,n,e),Ye||Ai(4,n,e),Sn(t,e,n);break;case 1:Ye||(hn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&p0(n,e,i)),Sn(t,e,n);break;case 21:Sn(t,e,n);break;case 22:Ye=(i=Ye)||n.memoizedState!==null,Sn(t,e,n),Ye=i;break;default:Sn(t,e,n)}}function A0(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ro(t)}catch(n){ye(e,e.return,n)}}}function S0(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ro(t)}catch(n){ye(e,e.return,n)}}function bR(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new _g),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new _g),e;default:throw Error(q(435,t.tag))}}function Gl(t,e){var n=bR(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var s=GR.bind(null,t,i);i.then(s,s)}})}function wt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],o=t,r=e,l=r;e:for(;l!==null;){switch(l.tag){case 27:if(xi(l.type)){Ve=l.stateNode,Mt=!1;break e}break;case 5:Ve=l.stateNode,Mt=!1;break e;case 3:case 4:Ve=l.stateNode.containerInfo,Mt=!0;break e}l=l.return}if(Ve===null)throw Error(q(160));E0(o,r,s),Ve=null,Mt=!1,o=s.alternate,o!==null&&(o.return=null),s.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)C0(e,t),e=e.sibling}var rn=null;function C0(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:wt(e,t),xt(t),i&4&&(Ai(3,t,t.return),el(3,t),Ai(5,t,t.return));break;case 1:wt(e,t),xt(t),i&512&&(Ye||n===null||hn(n,n.return)),i&64&&wn&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=rn;if(wt(e,t),xt(t),i&512&&(Ye||n===null||hn(n,n.return)),i&4){var o=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":o=s.getElementsByTagName("title")[0],(!o||o[Xr]||o[ot]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=s.createElement(i),s.head.insertBefore(o,s.querySelector("head > title"))),at(o,i,n),o[ot]=t,je(o),i=o;break e;case"link":var r=qg("link","href",s).get(i+(n.href||""));if(r){for(var l=0;l<r.length;l++)if(o=r[l],o.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(l,1);break t}}o=s.createElement(i),at(o,i,n),s.head.appendChild(o);break;case"meta":if(r=qg("meta","content",s).get(i+(n.content||""))){for(l=0;l<r.length;l++)if(o=r[l],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(l,1);break t}}o=s.createElement(i),at(o,i,n),s.head.appendChild(o);break;default:throw Error(q(468,i))}o[ot]=t,je(o),i=o}t.stateNode=i}else Bg(s,t.type,t.stateNode);else t.stateNode=kg(s,i,t.memoizedProps);else o!==i?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,i===null?Bg(s,t.type,t.stateNode):kg(s,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Uc(t,t.memoizedProps,n.memoizedProps)}break;case 27:wt(e,t),xt(t),i&512&&(Ye||n===null||hn(n,n.return)),n!==null&&i&4&&Uc(t,t.memoizedProps,n.memoizedProps);break;case 5:if(wt(e,t),xt(t),i&512&&(Ye||n===null||hn(n,n.return)),t.flags&32){s=t.stateNode;try{Ws(s,"")}catch(w){ye(t,t.return,w)}}i&4&&t.stateNode!=null&&(s=t.memoizedProps,Uc(t,s,n!==null?n.memoizedProps:s)),i&1024&&(kc=!0);break;case 6:if(wt(e,t),xt(t),i&4){if(t.stateNode===null)throw Error(q(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(w){ye(t,t.return,w)}}break;case 3:if(ua=null,s=rn,rn=Ha(e.containerInfo),wt(e,t),rn=s,xt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ro(e.containerInfo)}catch(w){ye(t,t.return,w)}kc&&(kc=!1,R0(t));break;case 4:i=rn,rn=Ha(t.stateNode.containerInfo),wt(e,t),xt(t),rn=i;break;case 12:wt(e,t),xt(t);break;case 31:wt(e,t),xt(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Gl(t,i)));break;case 13:wt(e,t),xt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Eu=Bt()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Gl(t,i)));break;case 22:s=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,d=wn,h=Ye;if(wn=d||s,Ye=h||c,wt(e,t),Ye=h,wn=d,xt(t),i&8192)e:for(e=t.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(n===null||c||wn||Ye||Bi(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(o=c.stateNode,s)r=o.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{l=c.stateNode;var p=c.memoizedProps.style,g=p!=null&&p.hasOwnProperty("display")?p.display:null;l.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(w){ye(c,c.return,w)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(w){ye(c,c.return,w)}}}else if(e.tag===18){if(n===null){c=e;try{var _=c.stateNode;s?bg(_,!0):bg(c.stateNode,!1)}catch(w){ye(c,c.return,w)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Gl(t,n))));break;case 19:wt(e,t),xt(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Gl(t,i)));break;case 30:break;case 21:break;default:wt(e,t),xt(t)}}function xt(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(y0(i)){n=i;break}i=i.return}if(n==null)throw Error(q(160));switch(n.tag){case 27:var s=n.stateNode,o=Lc(t);Ua(t,o,s);break;case 5:var r=n.stateNode;n.flags&32&&(Ws(r,""),n.flags&=-33);var l=Lc(t);Ua(t,l,r);break;case 3:case 4:var c=n.stateNode.containerInfo,d=Lc(t);Bf(t,d,c);break;default:throw Error(q(161))}}catch(h){ye(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function R0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;R0(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Cn(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)v0(t,e.alternate,e),e=e.sibling}function Bi(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ai(4,e,e.return),Bi(e);break;case 1:hn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&p0(e,e.return,n),Bi(e);break;case 27:Tr(e.stateNode);case 26:case 5:hn(e,e.return),Bi(e);break;case 22:e.memoizedState===null&&Bi(e);break;case 30:Bi(e);break;default:Bi(e)}t=t.sibling}}function Rn(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,s=t,o=e,r=o.flags;switch(o.tag){case 0:case 11:case 15:Rn(s,o,n),el(4,o);break;case 1:if(Rn(s,o,n),i=o,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(d){ye(i,i.return,d)}if(i=o,s=i.updateQueue,s!==null){var l=i.stateNode;try{var c=s.shared.hiddenCallbacks;if(c!==null)for(s.shared.hiddenCallbacks=null,s=0;s<c.length;s++)AT(c[s],l)}catch(d){ye(i,i.return,d)}}n&&r&64&&m0(o),gr(o,o.return);break;case 27:_0(o);case 26:case 5:Rn(s,o,n),n&&i===null&&r&4&&g0(o),gr(o,o.return);break;case 12:Rn(s,o,n);break;case 31:Rn(s,o,n),n&&r&4&&A0(s,o);break;case 13:Rn(s,o,n),n&&r&4&&S0(s,o);break;case 22:o.memoizedState===null&&Rn(s,o,n),gr(o,o.return);break;case 30:break;default:Rn(s,o,n)}e=e.sibling}}function Ah(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Wr(n))}function Sh(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Wr(t))}function on(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)I0(t,e,n,i),e=e.sibling}function I0(t,e,n,i){var s=e.flags;switch(e.tag){case 0:case 11:case 15:on(t,e,n,i),s&2048&&el(9,e);break;case 1:on(t,e,n,i);break;case 3:on(t,e,n,i),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Wr(t)));break;case 12:if(s&2048){on(t,e,n,i),t=e.stateNode;try{var o=e.memoizedProps,r=o.id,l=o.onPostCommit;typeof l=="function"&&l(r,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){ye(e,e.return,c)}}else on(t,e,n,i);break;case 31:on(t,e,n,i);break;case 13:on(t,e,n,i);break;case 23:break;case 22:o=e.stateNode,r=e.alternate,e.memoizedState!==null?o._visibility&2?on(t,e,n,i):yr(t,e):o._visibility&2?on(t,e,n,i):(o._visibility|=2,_s(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),s&2048&&Ah(r,e);break;case 24:on(t,e,n,i),s&2048&&Sh(e.alternate,e);break;default:on(t,e,n,i)}}function _s(t,e,n,i,s){for(s=s&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var o=t,r=e,l=n,c=i,d=r.flags;switch(r.tag){case 0:case 11:case 15:_s(o,r,l,c,s),el(8,r);break;case 23:break;case 22:var h=r.stateNode;r.memoizedState!==null?h._visibility&2?_s(o,r,l,c,s):yr(o,r):(h._visibility|=2,_s(o,r,l,c,s)),s&&d&2048&&Ah(r.alternate,r);break;case 24:_s(o,r,l,c,s),s&&d&2048&&Sh(r.alternate,r);break;default:_s(o,r,l,c,s)}e=e.sibling}}function yr(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,s=i.flags;switch(i.tag){case 22:yr(n,i),s&2048&&Ah(i.alternate,i);break;case 24:yr(n,i),s&2048&&Sh(i.alternate,i);break;default:yr(n,i)}e=e.sibling}}var ir=8192;function gs(t,e,n){if(t.subtreeFlags&ir)for(t=t.child;t!==null;)w0(t,e,n),t=t.sibling}function w0(t,e,n){switch(t.tag){case 26:gs(t,e,n),t.flags&ir&&t.memoizedState!==null&&_I(n,rn,t.memoizedState,t.memoizedProps);break;case 5:gs(t,e,n);break;case 3:case 4:var i=rn;rn=Ha(t.stateNode.containerInfo),gs(t,e,n),rn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=ir,ir=16777216,gs(t,e,n),ir=i):gs(t,e,n));break;default:gs(t,e,n)}}function x0(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function $o(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];We=i,N0(i,t)}x0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)M0(t),t=t.sibling}function M0(t){switch(t.tag){case 0:case 11:case 15:$o(t),t.flags&2048&&Ai(9,t,t.return);break;case 3:$o(t);break;case 12:$o(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,la(t)):$o(t);break;default:$o(t)}}function la(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];We=i,N0(i,t)}x0(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ai(8,e,e.return),la(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,la(e));break;default:la(e)}t=t.sibling}}function N0(t,e){for(;We!==null;){var n=We;switch(n.tag){case 0:case 11:case 15:Ai(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Wr(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,We=i;else e:for(n=t;We!==null;){i=We;var s=i.sibling,o=i.return;if(T0(i),i===n){We=null;break e}if(s!==null){s.return=o,We=s;break e}We=o}}}var VR={getCacheForType:function(t){var e=lt(Je),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return lt(Je).controller.signal}},PR=typeof WeakMap=="function"?WeakMap:Map,he=0,Se=null,ie=null,se=0,ge=0,Ut=null,ii=!1,To=!1,Ch=!1,qn=0,ke=0,Si=0,Ji=0,Rh=0,qt=0,no=0,_r=null,Nt=null,Of=!1,Eu=0,D0=0,La=1/0,ka=null,hi=null,$e=0,mi=null,io=null,Vn=0,Gf=0,zf=null,b0=null,vr=0,Hf=null;function zt(){return he&2&&se!==0?se&-se:$.T!==null?wh():Gv()}function V0(){if(qt===0)if(!(se&536870912)||oe){var t=Vl;Vl<<=1,!(Vl&3932160)&&(Vl=262144),qt=t}else qt=536870912;return t=Ft.current,t!==null&&(t.flags|=32),qt}function Dt(t,e,n){(t===Se&&(ge===2||ge===9)||t.cancelPendingCommit!==null)&&(so(t,0),si(t,se,qt,!1)),$r(t,n),(!(he&2)||t!==Se)&&(t===Se&&(!(he&2)&&(Ji|=n),ke===4&&si(t,se,qt,!1)),_n(t))}function P0(t,e,n){if(he&6)throw Error(q(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Qr(t,e),s=i?kR(t,e):qc(t,e,!0),o=i;do{if(s===0){To&&!i&&si(t,e,0,!1);break}else{if(n=t.current.alternate,o&&!UR(n)){s=qc(t,e,!1),o=!1;continue}if(s===2){if(o=e,t.errorRecoveryDisabledLanes&o)var r=0;else r=t.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){e=r;e:{var l=t;s=_r;var c=l.current.memoizedState.isDehydrated;if(c&&(so(l,r).flags|=256),r=qc(l,r,!1),r!==2){if(Ch&&!c){l.errorRecoveryDisabledLanes|=o,Ji|=o,s=4;break e}o=Nt,Nt=s,o!==null&&(Nt===null?Nt=o:Nt.push.apply(Nt,o))}s=r}if(o=!1,s!==2)continue}}if(s===1){so(t,0),si(t,e,0,!0);break}e:{switch(i=t,o=s,o){case 0:case 1:throw Error(q(345));case 4:if((e&4194048)!==e)break;case 6:si(i,e,qt,!ii);break e;case 2:Nt=null;break;case 3:case 5:break;default:throw Error(q(329))}if((e&62914560)===e&&(s=Eu+300-Bt(),10<s)){if(si(i,e,qt,!ii),cu(i,0,!0)!==0)break e;Vn=e,i.timeoutHandle=eE(vg.bind(null,i,n,Nt,ka,Of,e,qt,Ji,no,ii,o,"Throttled",-0,0),s);break e}vg(i,n,Nt,ka,Of,e,qt,Ji,no,ii,o,null,-0,0)}}break}while(!0);_n(t)}function vg(t,e,n,i,s,o,r,l,c,d,h,p,g,_){if(t.timeoutHandle=-1,p=e.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mn},w0(e,o,p);var w=(o&62914560)===o?Eu-Bt():(o&4194048)===o?D0-Bt():0;if(w=vI(p,w),w!==null){Vn=o,t.cancelPendingCommit=w(Eg.bind(null,t,e,o,n,i,s,r,l,c,h,p,null,g,_)),si(t,o,r,!d);return}}Eg(t,e,o,n,i,s,r,l,c)}function UR(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!Ht(o(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function si(t,e,n,i){e&=~Rh,e&=~Ji,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var s=e;0<s;){var o=31-Gt(s),r=1<<o;i[o]=-1,s&=~r}n!==0&&qv(t,n,e)}function Au(){return he&6?!0:(tl(0),!1)}function Ih(){if(ie!==null){if(ge===0)var t=ie.return;else t=ie,Nn=us=null,fh(t),Os=null,br=0,t=ie;for(;t!==null;)h0(t.alternate,t),t=t.return;ie=null}}function so(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,tI(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Vn=0,Ih(),Se=t,ie=n=Dn(t.current,null),se=e,ge=0,Ut=null,ii=!1,To=Qr(t,e),Ch=!1,no=qt=Rh=Ji=Si=ke=0,Nt=_r=null,Of=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var s=31-Gt(i),o=1<<s;e|=t[s],i&=~o}return qn=e,mu(),n}function U0(t,e){j=null,$.H=Pr,e===vo||e===gu?(e=Zp(),ge=3):e===sh?(e=Zp(),ge=4):ge=e===Th?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Ut=e,ie===null&&(ke=1,Va(t,Zt(e,t.current)))}function L0(){var t=Ft.current;return t===null?!0:(se&4194048)===se?jt===null:(se&62914560)===se||se&536870912?t===jt:!1}function k0(){var t=$.H;return $.H=Pr,t===null?Pr:t}function q0(){var t=$.A;return $.A=VR,t}function qa(){ke=4,ii||(se&4194048)!==se&&Ft.current!==null||(To=!0),!(Si&134217727)&&!(Ji&134217727)||Se===null||si(Se,se,qt,!1)}function qc(t,e,n){var i=he;he|=2;var s=k0(),o=q0();(Se!==t||se!==e)&&(ka=null,so(t,e)),e=!1;var r=ke;e:do try{if(ge!==0&&ie!==null){var l=ie,c=Ut;switch(ge){case 8:Ih(),r=6;break e;case 3:case 2:case 9:case 6:Ft.current===null&&(e=!0);var d=ge;if(ge=0,Ut=null,Ps(t,l,c,d),n&&To){r=0;break e}break;default:d=ge,ge=0,Ut=null,Ps(t,l,c,d)}}LR(),r=ke;break}catch(h){U0(t,h)}while(!0);return e&&t.shellSuspendCounter++,Nn=us=null,he=i,$.H=s,$.A=o,ie===null&&(Se=null,se=0,mu()),r}function LR(){for(;ie!==null;)B0(ie)}function kR(t,e){var n=he;he|=2;var i=k0(),s=q0();Se!==t||se!==e?(ka=null,La=Bt()+500,so(t,e)):To=Qr(t,e);e:do try{if(ge!==0&&ie!==null){e=ie;var o=Ut;t:switch(ge){case 1:ge=0,Ut=null,Ps(t,e,o,1);break;case 2:case 9:if(Xp(o)){ge=0,Ut=null,Tg(e);break}e=function(){ge!==2&&ge!==9||Se!==t||(ge=7),_n(t)},o.then(e,e);break e;case 3:ge=7;break e;case 4:ge=5;break e;case 7:Xp(o)?(ge=0,Ut=null,Tg(e)):(ge=0,Ut=null,Ps(t,e,o,7));break;case 5:var r=null;switch(ie.tag){case 26:r=ie.memoizedState;case 5:case 27:var l=ie;if(r?oE(r):l.stateNode.complete){ge=0,Ut=null;var c=l.sibling;if(c!==null)ie=c;else{var d=l.return;d!==null?(ie=d,Su(d)):ie=null}break t}}ge=0,Ut=null,Ps(t,e,o,5);break;case 6:ge=0,Ut=null,Ps(t,e,o,6);break;case 8:Ih(),ke=6;break e;default:throw Error(q(462))}}qR();break}catch(h){U0(t,h)}while(!0);return Nn=us=null,$.H=i,$.A=s,he=n,ie!==null?0:(Se=null,se=0,mu(),ke)}function qR(){for(;ie!==null&&!lC();)B0(ie)}function B0(t){var e=d0(t.alternate,t,qn);t.memoizedProps=t.pendingProps,e===null?Su(t):ie=e}function Tg(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=hg(n,e,e.pendingProps,e.type,void 0,se);break;case 11:e=hg(n,e,e.pendingProps,e.type.render,e.ref,se);break;case 5:fh(e);default:h0(n,e),e=ie=hT(e,qn),e=d0(n,e,qn)}t.memoizedProps=t.pendingProps,e===null?Su(t):ie=e}function Ps(t,e,n,i){Nn=us=null,fh(e),Os=null,br=0;var s=e.return;try{if(IR(t,s,e,n,se)){ke=1,Va(t,Zt(n,t.current)),ie=null;return}}catch(o){if(s!==null)throw ie=s,o;ke=1,Va(t,Zt(n,t.current)),ie=null;return}e.flags&32768?(oe||i===1?t=!0:To||se&536870912?t=!1:(ii=t=!0,(i===2||i===9||i===3||i===6)&&(i=Ft.current,i!==null&&i.tag===13&&(i.flags|=16384))),O0(e,t)):Su(e)}function Su(t){var e=t;do{if(e.flags&32768){O0(e,ii);return}t=e.return;var n=MR(e.alternate,e,qn);if(n!==null){ie=n;return}if(e=e.sibling,e!==null){ie=e;return}ie=e=t}while(e!==null);ke===0&&(ke=5)}function O0(t,e){do{var n=NR(t.alternate,t);if(n!==null){n.flags&=32767,ie=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ie=t;return}ie=t=n}while(t!==null);ke=6,ie=null}function Eg(t,e,n,i,s,o,r,l,c){t.cancelPendingCommit=null;do Cu();while($e!==0);if(he&6)throw Error(q(327));if(e!==null){if(e===t.current)throw Error(q(177));if(o=e.lanes|e.childLanes,o|=Zd,yC(t,n,o,r,l,c),t===Se&&(ie=Se=null,se=0),io=e,mi=t,Vn=n,Gf=o,zf=s,b0=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,zR(Aa,function(){return Y0(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=$.T,$.T=null,s=me.p,me.p=2,r=he,he|=4;try{DR(t,e,n)}finally{he=r,me.p=s,$.T=i}}$e=1,G0(),z0(),H0()}}function G0(){if($e===1){$e=0;var t=mi,e=io,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=$.T,$.T=null;var i=me.p;me.p=2;var s=he;he|=4;try{C0(e,t);var o=Kf,r=oT(t.containerInfo),l=o.focusedElem,c=o.selectionRange;if(r!==l&&l&&l.ownerDocument&&sT(l.ownerDocument.documentElement,l)){if(c!==null&&Xd(l)){var d=c.start,h=c.end;if(h===void 0&&(h=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(h,l.value.length);else{var p=l.ownerDocument||document,g=p&&p.defaultView||window;if(g.getSelection){var _=g.getSelection(),w=l.textContent.length,D=Math.min(c.start,w),U=c.end===void 0?D:Math.min(c.end,w);!_.extend&&D>U&&(r=U,U=D,D=r);var C=Hp(l,D),T=Hp(l,U);if(C&&T&&(_.rangeCount!==1||_.anchorNode!==C.node||_.anchorOffset!==C.offset||_.focusNode!==T.node||_.focusOffset!==T.offset)){var R=p.createRange();R.setStart(C.node,C.offset),_.removeAllRanges(),D>U?(_.addRange(R),_.extend(T.node,T.offset)):(R.setEnd(T.node,T.offset),_.addRange(R))}}}}for(p=[],_=l;_=_.parentNode;)_.nodeType===1&&p.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<p.length;l++){var b=p[l];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}Ja=!!Jf,Kf=Jf=null}finally{he=s,me.p=i,$.T=n}}t.current=e,$e=2}}function z0(){if($e===2){$e=0;var t=mi,e=io,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=$.T,$.T=null;var i=me.p;me.p=2;var s=he;he|=4;try{v0(t,e.alternate,e)}finally{he=s,me.p=i,$.T=n}}$e=3}}function H0(){if($e===4||$e===3){$e=0,aC();var t=mi,e=io,n=Vn,i=b0;e.subtreeFlags&10256||e.flags&10256?$e=5:($e=0,io=mi=null,F0(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&(hi=null),Hd(n),e=e.stateNode,Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Kr,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=$.T,s=me.p,me.p=2,$.T=null;try{for(var o=t.onRecoverableError,r=0;r<i.length;r++){var l=i[r];o(l.value,{componentStack:l.stack})}}finally{$.T=e,me.p=s}}Vn&3&&Cu(),_n(t),s=t.pendingLanes,n&261930&&s&42?t===Hf?vr++:(vr=0,Hf=t):vr=0,tl(0)}}function F0(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Wr(e)))}function Cu(){return G0(),z0(),H0(),Y0()}function Y0(){if($e!==5)return!1;var t=mi,e=Gf;Gf=0;var n=Hd(Vn),i=$.T,s=me.p;try{me.p=32>n?32:n,$.T=null,n=zf,zf=null;var o=mi,r=Vn;if($e=0,io=mi=null,Vn=0,he&6)throw Error(q(331));var l=he;if(he|=4,M0(o.current),I0(o,o.current,r,n),he=l,tl(0,!1),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Kr,o)}catch{}return!0}finally{me.p=s,$.T=i,F0(t,e)}}function Ag(t,e,n){e=Zt(n,e),e=Lf(t.stateNode,e,2),t=di(t,e,2),t!==null&&($r(t,2),_n(t))}function ye(t,e,n){if(t.tag===3)Ag(t,t,n);else for(;e!==null;){if(e.tag===3){Ag(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(hi===null||!hi.has(i))){t=Zt(n,t),n=r0(2),i=di(e,n,2),i!==null&&(l0(n,i,e,t),$r(i,2),_n(i));break}}e=e.return}}function Bc(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new PR;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(Ch=!0,s.add(n),t=BR.bind(null,t,e,n),e.then(t,t))}function BR(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Se===t&&(se&n)===n&&(ke===4||ke===3&&(se&62914560)===se&&300>Bt()-Eu?!(he&2)&&so(t,0):Rh|=n,no===se&&(no=0)),_n(t)}function J0(t,e){e===0&&(e=kv()),t=as(t,e),t!==null&&($r(t,e),_n(t))}function OR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),J0(t,n)}function GR(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(q(314))}i!==null&&i.delete(e),J0(t,n)}function zR(t,e){return Gd(t,e)}var Ba=null,vs=null,Ff=!1,Oa=!1,Oc=!1,oi=0;function _n(t){t!==vs&&t.next===null&&(vs===null?Ba=vs=t:vs=vs.next=t),Oa=!0,Ff||(Ff=!0,FR())}function tl(t,e){if(!Oc&&Oa){Oc=!0;do for(var n=!1,i=Ba;i!==null;){if(t!==0){var s=i.pendingLanes;if(s===0)var o=0;else{var r=i.suspendedLanes,l=i.pingedLanes;o=(1<<31-Gt(42|t)+1)-1,o&=s&~(r&~l),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(n=!0,Sg(i,o))}else o=se,o=cu(i,i===Se?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(o&3)||Qr(i,o)||(n=!0,Sg(i,o));i=i.next}while(n);Oc=!1}}function HR(){K0()}function K0(){Oa=Ff=!1;var t=0;oi!==0&&eI()&&(t=oi);for(var e=Bt(),n=null,i=Ba;i!==null;){var s=i.next,o=Q0(i,e);o===0?(i.next=null,n===null?Ba=s:n.next=s,s===null&&(vs=n)):(n=i,(t!==0||o&3)&&(Oa=!0)),i=s}$e!==0&&$e!==5||tl(t),oi!==0&&(oi=0)}function Q0(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes&-62914561;0<o;){var r=31-Gt(o),l=1<<r,c=s[r];c===-1?(!(l&n)||l&i)&&(s[r]=gC(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}if(e=Se,n=se,n=cu(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(ge===2||ge===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&mc(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Qr(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&mc(i),Hd(n)){case 2:case 8:n=Uv;break;case 32:n=Aa;break;case 268435456:n=Lv;break;default:n=Aa}return i=$0.bind(null,t),n=Gd(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&mc(i),t.callbackPriority=2,t.callbackNode=null,2}function $0(t,e){if($e!==0&&$e!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Cu()&&t.callbackNode!==n)return null;var i=se;return i=cu(t,t===Se?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(P0(t,i,e),Q0(t,Bt()),t.callbackNode!=null&&t.callbackNode===n?$0.bind(null,t):null)}function Sg(t,e){if(Cu())return null;P0(t,e,!0)}function FR(){nI(function(){he&6?Gd(Pv,HR):K0()})}function wh(){if(oi===0){var t=js;t===0&&(t=bl,bl<<=1,!(bl&261888)&&(bl=256)),oi=t}return oi}function Cg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Wl(""+t)}function Rg(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function YR(t,e,n,i,s){if(e==="submit"&&n&&n.stateNode===s){var o=Cg((s[bt]||null).action),r=i.submitter;r&&(e=(e=r[bt]||null)?Cg(e.formAction):r.getAttribute("formAction"),e!==null&&(o=e,r=null));var l=new fu("action","action",null,i,s);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(oi!==0){var c=r?Rg(s,r):new FormData(s);Pf(n,{pending:!0,data:c,method:s.method,action:o},null,c)}}else typeof o=="function"&&(l.preventDefault(),c=r?Rg(s,r):new FormData(s),Pf(n,{pending:!0,data:c,method:s.method,action:o},o,c))},currentTarget:s}]})}}for(var Gc=0;Gc<Af.length;Gc++){var zc=Af[Gc],JR=zc.toLowerCase(),KR=zc[0].toUpperCase()+zc.slice(1);an(JR,"on"+KR)}an(lT,"onAnimationEnd");an(aT,"onAnimationIteration");an(uT,"onAnimationStart");an("dblclick","onDoubleClick");an("focusin","onFocus");an("focusout","onBlur");an(uR,"onTransitionRun");an(cR,"onTransitionStart");an(fR,"onTransitionCancel");an(cT,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));os("onBeforeInput",["compositionend","keypress","textInput","paste"]);os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ur="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ur));function X0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var r=i.length-1;0<=r;r--){var l=i[r],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;o=l,s.currentTarget=d;try{o(s)}catch(h){Ca(h)}s.currentTarget=null,o=c}else for(r=0;r<i.length;r++){if(l=i[r],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;o=l,s.currentTarget=d;try{o(s)}catch(h){Ca(h)}s.currentTarget=null,o=c}}}}function ne(t,e){var n=e[mf];n===void 0&&(n=e[mf]=new Set);var i=t+"__bubble";n.has(i)||(Z0(e,t,2,!1),n.add(i))}function Hc(t,e,n){var i=0;e&&(i|=4),Z0(n,t,i,e)}var zl="_reactListening"+Math.random().toString(36).slice(2);function xh(t){if(!t[zl]){t[zl]=!0,zv.forEach(function(n){n!=="selectionchange"&&(QR.has(n)||Hc(n,!1,t),Hc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zl]||(e[zl]=!0,Hc("selectionchange",!1,e))}}function Z0(t,e,n,i){switch(cE(e)){case 2:var s=AI;break;case 8:s=SI;break;default:s=bh}n=s.bind(null,e,n,t),s=void 0,!vf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Fc(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var l=i.stateNode.containerInfo;if(l===s)break;if(r===4)for(r=i.return;r!==null;){var c=r.tag;if((c===3||c===4)&&r.stateNode.containerInfo===s)return;r=r.return}for(;l!==null;){if(r=Rs(l),r===null)return;if(c=r.tag,c===5||c===6||c===26||c===27){i=o=r;continue e}l=l.parentNode}}i=i.return}Xv(function(){var d=o,h=Jd(n),p=[];e:{var g=fT.get(t);if(g!==void 0){var _=fu,w=t;switch(t){case"keypress":if(ea(n)===0)break e;case"keydown":case"keyup":_=GC;break;case"focusin":w="focus",_=vc;break;case"focusout":w="blur",_=vc;break;case"beforeblur":case"afterblur":_=vc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Vp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=MC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=FC;break;case lT:case aT:case uT:_=bC;break;case cT:_=JC;break;case"scroll":case"scrollend":_=wC;break;case"wheel":_=QC;break;case"copy":case"cut":case"paste":_=PC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Up;break;case"toggle":case"beforetoggle":_=XC}var D=(e&4)!==0,U=!D&&(t==="scroll"||t==="scrollend"),C=D?g!==null?g+"Capture":null:g;D=[];for(var T=d,R;T!==null;){var b=T;if(R=b.stateNode,b=b.tag,b!==5&&b!==26&&b!==27||R===null||C===null||(b=wr(T,C),b!=null&&D.push(Lr(T,b,R))),U)break;T=T.return}0<D.length&&(g=new _(g,w,null,n,h),p.push({event:g,listeners:D}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==_f&&(w=n.relatedTarget||n.fromElement)&&(Rs(w)||w[go]))break e;if((_||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,_?(w=n.relatedTarget||n.toElement,_=d,w=w?Rs(w):null,w!==null&&(U=Jr(w),D=w.tag,w!==U||D!==5&&D!==27&&D!==6)&&(w=null)):(_=null,w=d),_!==w)){if(D=Vp,b="onMouseLeave",C="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(D=Up,b="onPointerLeave",C="onPointerEnter",T="pointer"),U=_==null?g:tr(_),R=w==null?g:tr(w),g=new D(b,T+"leave",_,n,h),g.target=U,g.relatedTarget=R,b=null,Rs(h)===d&&(D=new D(C,T+"enter",w,n,h),D.target=R,D.relatedTarget=U,b=D),U=b,_&&w)t:{for(D=$R,C=_,T=w,R=0,b=C;b;b=D(b))R++;b=0;for(var k=T;k;k=D(k))b++;for(;0<R-b;)C=D(C),R--;for(;0<b-R;)T=D(T),b--;for(;R--;){if(C===T||T!==null&&C===T.alternate){D=C;break t}C=D(C),T=D(T)}D=null}else D=null;_!==null&&Ig(p,g,_,D,!1),w!==null&&U!==null&&Ig(p,U,w,D,!0)}}e:{if(g=d?tr(d):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var B=Bp;else if(qp(g))if(nT)B=rR;else{B=sR;var S=iR}else _=g.nodeName,!_||_.toLowerCase()!=="input"||g.type!=="checkbox"&&g.type!=="radio"?d&&Yd(d.elementType)&&(B=Bp):B=oR;if(B&&(B=B(t,d))){tT(p,B,n,h);break e}S&&S(t,g,d),t==="focusout"&&d&&g.type==="number"&&d.memoizedProps.value!=null&&yf(g,"number",g.value)}switch(S=d?tr(d):window,t){case"focusin":(qp(S)||S.contentEditable==="true")&&(xs=S,Tf=d,cr=null);break;case"focusout":cr=Tf=xs=null;break;case"mousedown":Ef=!0;break;case"contextmenu":case"mouseup":case"dragend":Ef=!1,Fp(p,n,h);break;case"selectionchange":if(aR)break;case"keydown":case"keyup":Fp(p,n,h)}var E;if($d)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ws?jv(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Wv&&n.locale!=="ko"&&(ws||A!=="onCompositionStart"?A==="onCompositionEnd"&&ws&&(E=Zv()):(ni=h,Kd="value"in ni?ni.value:ni.textContent,ws=!0)),S=Ga(d,A),0<S.length&&(A=new Pp(A,t,null,n,h),p.push({event:A,listeners:S}),E?A.data=E:(E=eT(n),E!==null&&(A.data=E)))),(E=WC?jC(t,n):eR(t,n))&&(A=Ga(d,"onBeforeInput"),0<A.length&&(S=new Pp("onBeforeInput","beforeinput",null,n,h),p.push({event:S,listeners:A}),S.data=E)),YR(p,t,d,n,h)}X0(p,e)})}function Lr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ga(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||o===null||(s=wr(t,n),s!=null&&i.unshift(Lr(t,s,o)),s=wr(t,e),s!=null&&i.push(Lr(t,s,o))),t.tag===3)return i;t=t.return}return[]}function $R(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ig(t,e,n,i,s){for(var o=e._reactName,r=[];n!==null&&n!==i;){var l=n,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===i)break;l!==5&&l!==26&&l!==27||d===null||(c=d,s?(d=wr(n,o),d!=null&&r.unshift(Lr(n,d,c))):s||(d=wr(n,o),d!=null&&r.push(Lr(n,d,c)))),n=n.return}r.length!==0&&t.push({event:e,listeners:r})}var XR=/\r\n?/g,ZR=/\u0000|\uFFFD/g;function wg(t){return(typeof t=="string"?t:""+t).replace(XR,`
`).replace(ZR,"")}function W0(t,e){return e=wg(e),wg(t)===e}function ve(t,e,n,i,s,o){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Ws(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Ws(t,""+i);break;case"className":Ul(t,"class",i);break;case"tabIndex":Ul(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Ul(t,n,i);break;case"style":$v(t,i,o);break;case"data":if(e!=="object"){Ul(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Wl(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(e!=="input"&&ve(t,e,"name",s.name,s,null),ve(t,e,"formEncType",s.formEncType,s,null),ve(t,e,"formMethod",s.formMethod,s,null),ve(t,e,"formTarget",s.formTarget,s,null)):(ve(t,e,"encType",s.encType,s,null),ve(t,e,"method",s.method,s,null),ve(t,e,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Wl(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Mn);break;case"onScroll":i!=null&&ne("scroll",t);break;case"onScrollEnd":i!=null&&ne("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(q(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(q(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Wl(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":ne("beforetoggle",t),ne("toggle",t),Zl(t,"popover",i);break;case"xlinkActuate":En(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":En(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":En(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":En(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":En(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":En(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":En(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":En(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":En(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Zl(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=RC.get(n)||n,Zl(t,n,i))}}function Yf(t,e,n,i,s,o){switch(n){case"style":$v(t,i,o);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(q(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(q(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Ws(t,i):(typeof i=="number"||typeof i=="bigint")&&Ws(t,""+i);break;case"onScroll":i!=null&&ne("scroll",t);break;case"onScrollEnd":i!=null&&ne("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hv.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),o=t[bt]||null,o=o!=null?o[n]:null,typeof o=="function"&&t.removeEventListener(e,o,s),typeof i=="function")){typeof o!="function"&&o!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,s);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Zl(t,n,i)}}}function at(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ne("error",t),ne("load",t);var i=!1,s=!1,o;for(o in n)if(n.hasOwnProperty(o)){var r=n[o];if(r!=null)switch(o){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(q(137,e));default:ve(t,e,o,r,n,null)}}s&&ve(t,e,"srcSet",n.srcSet,n,null),i&&ve(t,e,"src",n.src,n,null);return;case"input":ne("invalid",t);var l=o=r=s=null,c=null,d=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(h!=null)switch(i){case"name":s=h;break;case"type":r=h;break;case"checked":c=h;break;case"defaultChecked":d=h;break;case"value":o=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(q(137,e));break;default:ve(t,e,i,h,n,null)}}Jv(t,o,l,c,d,r,s,!1);return;case"select":ne("invalid",t),i=r=o=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":o=l;break;case"defaultValue":r=l;break;case"multiple":i=l;default:ve(t,e,s,l,n,null)}e=o,n=r,t.multiple=!!i,e!=null?ks(t,!!i,e,!1):n!=null&&ks(t,!!i,n,!0);return;case"textarea":ne("invalid",t),o=s=i=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":i=l;break;case"defaultValue":s=l;break;case"children":o=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(q(91));break;default:ve(t,e,r,l,n,null)}Qv(t,i,s,o);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:ve(t,e,c,i,n,null)}return;case"dialog":ne("beforetoggle",t),ne("toggle",t),ne("cancel",t),ne("close",t);break;case"iframe":case"object":ne("load",t);break;case"video":case"audio":for(i=0;i<Ur.length;i++)ne(Ur[i],t);break;case"image":ne("error",t),ne("load",t);break;case"details":ne("toggle",t);break;case"embed":case"source":case"link":ne("error",t),ne("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(i=n[d],i!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(q(137,e));default:ve(t,e,d,i,n,null)}return;default:if(Yd(e)){for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!==void 0&&Yf(t,e,h,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&ve(t,e,l,i,n,null))}function WR(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,o=null,r=null,l=null,c=null,d=null,h=null;for(_ in n){var p=n[_];if(n.hasOwnProperty(_)&&p!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":c=p;default:i.hasOwnProperty(_)||ve(t,e,_,null,i,p)}}for(var g in i){var _=i[g];if(p=n[g],i.hasOwnProperty(g)&&(_!=null||p!=null))switch(g){case"type":o=_;break;case"name":s=_;break;case"checked":d=_;break;case"defaultChecked":h=_;break;case"value":r=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(q(137,e));break;default:_!==p&&ve(t,e,g,_,i,p)}}gf(t,r,l,c,d,h,o,s);return;case"select":_=r=l=g=null;for(o in n)if(c=n[o],n.hasOwnProperty(o)&&c!=null)switch(o){case"value":break;case"multiple":_=c;default:i.hasOwnProperty(o)||ve(t,e,o,null,i,c)}for(s in i)if(o=i[s],c=n[s],i.hasOwnProperty(s)&&(o!=null||c!=null))switch(s){case"value":g=o;break;case"defaultValue":l=o;break;case"multiple":r=o;default:o!==c&&ve(t,e,s,o,i,c)}e=l,n=r,i=_,g!=null?ks(t,!!n,g,!1):!!i!=!!n&&(e!=null?ks(t,!!n,e,!0):ks(t,!!n,n?[]:"",!1));return;case"textarea":_=g=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:ve(t,e,l,null,i,s)}for(r in i)if(s=i[r],o=n[r],i.hasOwnProperty(r)&&(s!=null||o!=null))switch(r){case"value":g=s;break;case"defaultValue":_=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(q(91));break;default:s!==o&&ve(t,e,r,s,i,o)}Kv(t,g,_);return;case"option":for(var w in n)if(g=n[w],n.hasOwnProperty(w)&&g!=null&&!i.hasOwnProperty(w))switch(w){case"selected":t.selected=!1;break;default:ve(t,e,w,null,i,g)}for(c in i)if(g=i[c],_=n[c],i.hasOwnProperty(c)&&g!==_&&(g!=null||_!=null))switch(c){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:ve(t,e,c,g,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var D in n)g=n[D],n.hasOwnProperty(D)&&g!=null&&!i.hasOwnProperty(D)&&ve(t,e,D,null,i,g);for(d in i)if(g=i[d],_=n[d],i.hasOwnProperty(d)&&g!==_&&(g!=null||_!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(q(137,e));break;default:ve(t,e,d,g,i,_)}return;default:if(Yd(e)){for(var U in n)g=n[U],n.hasOwnProperty(U)&&g!==void 0&&!i.hasOwnProperty(U)&&Yf(t,e,U,void 0,i,g);for(h in i)g=i[h],_=n[h],!i.hasOwnProperty(h)||g===_||g===void 0&&_===void 0||Yf(t,e,h,g,i,_);return}}for(var C in n)g=n[C],n.hasOwnProperty(C)&&g!=null&&!i.hasOwnProperty(C)&&ve(t,e,C,null,i,g);for(p in i)g=i[p],_=n[p],!i.hasOwnProperty(p)||g===_||g==null&&_==null||ve(t,e,p,g,i,_)}function xg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jR(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var s=n[i],o=s.transferSize,r=s.initiatorType,l=s.duration;if(o&&l&&xg(r)){for(r=0,l=s.responseEnd,i+=1;i<n.length;i++){var c=n[i],d=c.startTime;if(d>l)break;var h=c.transferSize,p=c.initiatorType;h&&xg(p)&&(c=c.responseEnd,r+=h*(c<l?1:(l-d)/(c-d)))}if(--i,e+=8*(o+r)/(s.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Jf=null,Kf=null;function za(t){return t.nodeType===9?t:t.ownerDocument}function Mg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function j0(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Qf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yc=null;function eI(){var t=window.event;return t&&t.type==="popstate"?t===Yc?!1:(Yc=t,!0):(Yc=null,!1)}var eE=typeof setTimeout=="function"?setTimeout:void 0,tI=typeof clearTimeout=="function"?clearTimeout:void 0,Ng=typeof Promise=="function"?Promise:void 0,nI=typeof queueMicrotask=="function"?queueMicrotask:typeof Ng<"u"?function(t){return Ng.resolve(null).then(t).catch(iI)}:eE;function iI(t){setTimeout(function(){throw t})}function xi(t){return t==="head"}function Dg(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(s),ro(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Tr(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Tr(n);for(var o=n.firstChild;o;){var r=o.nextSibling,l=o.nodeName;o[Xr]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&o.rel.toLowerCase()==="stylesheet"||n.removeChild(o),o=r}}else n==="body"&&Tr(t.ownerDocument.body);n=s}while(n);ro(e)}function bg(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function $f(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":$f(n),Fd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function sI(t,e,n,i){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[Xr])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(o=t.getAttribute("rel"),o==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(o!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(o=t.getAttribute("src"),(o!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&o&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var o=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===o)return t}else return t;if(t=en(t.nextSibling),t===null)break}return null}function oI(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=en(t.nextSibling),t===null))return null;return t}function tE(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=en(t.nextSibling),t===null))return null;return t}function Xf(t){return t.data==="$?"||t.data==="$~"}function Zf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function rI(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function en(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Wf=null;function Vg(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return en(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Pg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function nE(t,e,n){switch(e=za(n),t){case"html":if(t=e.documentElement,!t)throw Error(q(452));return t;case"head":if(t=e.head,!t)throw Error(q(453));return t;case"body":if(t=e.body,!t)throw Error(q(454));return t;default:throw Error(q(451))}}function Tr(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Fd(t)}var nn=new Map,Ug=new Set;function Ha(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Gn=me.d;me.d={f:lI,r:aI,D:uI,C:cI,L:fI,m:dI,X:mI,S:hI,M:pI};function lI(){var t=Gn.f(),e=Au();return t||e}function aI(t){var e=yo(t);e!==null&&e.tag===5&&e.type==="form"?$T(e):Gn.r(t)}var Eo=typeof document>"u"?null:document;function iE(t,e,n){var i=Eo;if(i&&typeof e=="string"&&e){var s=Xt(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),Ug.has(s)||(Ug.add(s),t={rel:t,crossOrigin:n,href:e},i.querySelector(s)===null&&(e=i.createElement("link"),at(e,"link",t),je(e),i.head.appendChild(e)))}}function uI(t){Gn.D(t),iE("dns-prefetch",t,null)}function cI(t,e){Gn.C(t,e),iE("preconnect",t,e)}function fI(t,e,n){Gn.L(t,e,n);var i=Eo;if(i&&t&&e){var s='link[rel="preload"][as="'+Xt(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+Xt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+Xt(n.imageSizes)+'"]')):s+='[href="'+Xt(t)+'"]';var o=s;switch(e){case"style":o=oo(t);break;case"script":o=Ao(t)}nn.has(o)||(t=be({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),nn.set(o,t),i.querySelector(s)!==null||e==="style"&&i.querySelector(nl(o))||e==="script"&&i.querySelector(il(o))||(e=i.createElement("link"),at(e,"link",t),je(e),i.head.appendChild(e)))}}function dI(t,e){Gn.m(t,e);var n=Eo;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+Xt(i)+'"][href="'+Xt(t)+'"]',o=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Ao(t)}if(!nn.has(o)&&(t=be({rel:"modulepreload",href:t},e),nn.set(o,t),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(il(o)))return}i=n.createElement("link"),at(i,"link",t),je(i),n.head.appendChild(i)}}}function hI(t,e,n){Gn.S(t,e,n);var i=Eo;if(i&&t){var s=Ls(i).hoistableStyles,o=oo(t);e=e||"default";var r=s.get(o);if(!r){var l={loading:0,preload:null};if(r=i.querySelector(nl(o)))l.loading=5;else{t=be({rel:"stylesheet",href:t,"data-precedence":e},n),(n=nn.get(o))&&Mh(t,n);var c=r=i.createElement("link");je(c),at(c,"link",t),c._p=new Promise(function(d,h){c.onload=d,c.onerror=h}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,aa(r,e,i)}r={type:"stylesheet",instance:r,count:1,state:l},s.set(o,r)}}}function mI(t,e){Gn.X(t,e);var n=Eo;if(n&&t){var i=Ls(n).hoistableScripts,s=Ao(t),o=i.get(s);o||(o=n.querySelector(il(s)),o||(t=be({src:t,async:!0},e),(e=nn.get(s))&&Nh(t,e),o=n.createElement("script"),je(o),at(o,"link",t),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(s,o))}}function pI(t,e){Gn.M(t,e);var n=Eo;if(n&&t){var i=Ls(n).hoistableScripts,s=Ao(t),o=i.get(s);o||(o=n.querySelector(il(s)),o||(t=be({src:t,async:!0,type:"module"},e),(e=nn.get(s))&&Nh(t,e),o=n.createElement("script"),je(o),at(o,"link",t),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(s,o))}}function Lg(t,e,n,i){var s=(s=ui.current)?Ha(s):null;if(!s)throw Error(q(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=oo(n.href),n=Ls(s).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=oo(n.href);var o=Ls(s).hoistableStyles,r=o.get(t);if(r||(s=s.ownerDocument||s,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(t,r),(o=s.querySelector(nl(t)))&&!o._p&&(r.instance=o,r.state.loading=5),nn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},nn.set(t,n),o||gI(s,t,n,r.state))),e&&i===null)throw Error(q(528,""));return r}if(e&&i!==null)throw Error(q(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Ao(n),n=Ls(s).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(q(444,t))}}function oo(t){return'href="'+Xt(t)+'"'}function nl(t){return'link[rel="stylesheet"]['+t+"]"}function sE(t){return be({},t,{"data-precedence":t.precedence,precedence:null})}function gI(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),at(e,"link",n),je(e),t.head.appendChild(e))}function Ao(t){return'[src="'+Xt(t)+'"]'}function il(t){return"script[async]"+t}function kg(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+Xt(n.href)+'"]');if(i)return e.instance=i,je(i),i;var s=be({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),je(i),at(i,"style",s),aa(i,n.precedence,t),e.instance=i;case"stylesheet":s=oo(n.href);var o=t.querySelector(nl(s));if(o)return e.state.loading|=4,e.instance=o,je(o),o;i=sE(n),(s=nn.get(s))&&Mh(i,s),o=(t.ownerDocument||t).createElement("link"),je(o);var r=o;return r._p=new Promise(function(l,c){r.onload=l,r.onerror=c}),at(o,"link",i),e.state.loading|=4,aa(o,n.precedence,t),e.instance=o;case"script":return o=Ao(n.src),(s=t.querySelector(il(o)))?(e.instance=s,je(s),s):(i=n,(s=nn.get(o))&&(i=be({},n),Nh(i,s)),t=t.ownerDocument||t,s=t.createElement("script"),je(s),at(s,"link",i),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(q(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,aa(i,n.precedence,t));return e.instance}function aa(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,o=s,r=0;r<i.length;r++){var l=i[r];if(l.dataset.precedence===e)o=l;else if(o!==s)break}o?o.parentNode.insertBefore(t,o.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Mh(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Nh(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var ua=null;function qg(t,e,n){if(ua===null){var i=new Map,s=ua=new Map;s.set(n,i)}else s=ua,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var o=n[s];if(!(o[Xr]||o[ot]||t==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var r=o.getAttribute(e)||"";r=t+r;var l=i.get(r);l?l.push(o):i.set(r,[o])}}return i}function Bg(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function yI(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function oE(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function _I(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var s=oo(i.href),o=e.querySelector(nl(s));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Fa.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=o,je(o);return}o=e.ownerDocument||e,i=sE(i),(s=nn.get(s))&&Mh(i,s),o=o.createElement("link"),je(o);var r=o;r._p=new Promise(function(l,c){r.onload=l,r.onerror=c}),at(o,"link",i),n.instance=o}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Fa.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Jc=0;function vI(t,e){return t.stylesheets&&t.count===0&&ca(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&ca(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4+e);0<t.imgBytes&&Jc===0&&(Jc=62500*jR());var s=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&ca(t,t.stylesheets),t.unsuspend)){var o=t.unsuspend;t.unsuspend=null,o()}},(t.imgBytes>Jc?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(s)}}:null}function Fa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ca(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ya=null;function ca(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ya=new Map,e.forEach(TI,t),Ya=null,Fa.call(t))}function TI(t,e){if(!(e.state.loading&4)){var n=Ya.get(t);if(n)var i=n.get(null);else{n=new Map,Ya.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<s.length;o++){var r=s[o];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),i=r)}i&&n.set(null,i)}s=e.instance,r=s.getAttribute("data-precedence"),o=n.get(r)||i,o===i&&n.set(null,s),n.set(r,s),this.count++,i=Fa.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),o?o.parentNode.insertBefore(s,o.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var kr={$$typeof:xn,Provider:null,Consumer:null,_currentValue:zi,_currentValue2:zi,_threadCount:0};function EI(t,e,n,i,s,o,r,l,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pc(0),this.hiddenUpdates=pc(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=o,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function rE(t,e,n,i,s,o,r,l,c,d,h,p){return t=new EI(t,e,n,r,c,d,h,p,l),e=1,o===!0&&(e|=24),o=kt(3,null,null,e),t.current=o,o.stateNode=t,e=nh(),e.refCount++,t.pooledCache=e,e.refCount++,o.memoizedState={element:i,isDehydrated:n,cache:e},oh(o),t}function lE(t){return t?(t=Ds,t):Ds}function aE(t,e,n,i,s,o){s=lE(s),i.context===null?i.context=s:i.pendingContext=s,i=fi(e),i.payload={element:n},o=o===void 0?null:o,o!==null&&(i.callback=o),n=di(t,i,e),n!==null&&(Dt(n,t,e),dr(n,t,e))}function Og(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dh(t,e){Og(t,e),(t=t.alternate)&&Og(t,e)}function uE(t){if(t.tag===13||t.tag===31){var e=as(t,67108864);e!==null&&Dt(e,t,67108864),Dh(t,67108864)}}function Gg(t){if(t.tag===13||t.tag===31){var e=zt();e=zd(e);var n=as(t,e);n!==null&&Dt(n,t,e),Dh(t,e)}}var Ja=!0;function AI(t,e,n,i){var s=$.T;$.T=null;var o=me.p;try{me.p=2,bh(t,e,n,i)}finally{me.p=o,$.T=s}}function SI(t,e,n,i){var s=$.T;$.T=null;var o=me.p;try{me.p=8,bh(t,e,n,i)}finally{me.p=o,$.T=s}}function bh(t,e,n,i){if(Ja){var s=jf(i);if(s===null)Fc(t,e,i,Ka,n),zg(t,i);else if(RI(s,t,e,n,i))i.stopPropagation();else if(zg(t,i),e&4&&-1<CI.indexOf(t)){for(;s!==null;){var o=yo(s);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var r=ki(o.pendingLanes);if(r!==0){var l=o;for(l.pendingLanes|=2,l.entangledLanes|=2;r;){var c=1<<31-Gt(r);l.entanglements[1]|=c,r&=~c}_n(o),!(he&6)&&(La=Bt()+500,tl(0))}}break;case 31:case 13:l=as(o,2),l!==null&&Dt(l,o,2),Au(),Dh(o,2)}if(o=jf(i),o===null&&Fc(t,e,i,Ka,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else Fc(t,e,i,null,n)}}function jf(t){return t=Jd(t),Vh(t)}var Ka=null;function Vh(t){if(Ka=null,t=Rs(t),t!==null){var e=Jr(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Mv(e),t!==null)return t;t=null}else if(n===31){if(t=Nv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Ka=t,null}function cE(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(uC()){case Pv:return 2;case Uv:return 8;case Aa:case cC:return 32;case Lv:return 268435456;default:return 32}default:return 32}}var ed=!1,pi=null,gi=null,yi=null,qr=new Map,Br=new Map,ei=[],CI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zg(t,e){switch(t){case"focusin":case"focusout":pi=null;break;case"dragenter":case"dragleave":gi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":qr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Br.delete(e.pointerId)}}function Xo(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=yo(e),e!==null&&uE(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function RI(t,e,n,i,s){switch(e){case"focusin":return pi=Xo(pi,t,e,n,i,s),!0;case"dragenter":return gi=Xo(gi,t,e,n,i,s),!0;case"mouseover":return yi=Xo(yi,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return qr.set(o,Xo(qr.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,Br.set(o,Xo(Br.get(o)||null,t,e,n,i,s)),!0}return!1}function fE(t){var e=Rs(t.target);if(e!==null){var n=Jr(e);if(n!==null){if(e=n.tag,e===13){if(e=Mv(n),e!==null){t.blockedOn=e,Ip(t.priority,function(){Gg(n)});return}}else if(e===31){if(e=Nv(n),e!==null){t.blockedOn=e,Ip(t.priority,function(){Gg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jf(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);_f=i,n.target.dispatchEvent(i),_f=null}else return e=yo(n),e!==null&&uE(e),t.blockedOn=n,!1;e.shift()}return!0}function Hg(t,e,n){fa(t)&&n.delete(e)}function II(){ed=!1,pi!==null&&fa(pi)&&(pi=null),gi!==null&&fa(gi)&&(gi=null),yi!==null&&fa(yi)&&(yi=null),qr.forEach(Hg),Br.forEach(Hg)}function Hl(t,e){t.blockedOn===e&&(t.blockedOn=null,ed||(ed=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,II)))}var Fl=null;function Fg(t){Fl!==t&&(Fl=t,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,function(){Fl===t&&(Fl=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],s=t[e+2];if(typeof i!="function"){if(Vh(i||n)===null)continue;break}var o=yo(n);o!==null&&(t.splice(e,3),e-=3,Pf(o,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function ro(t){function e(c){return Hl(c,t)}pi!==null&&Hl(pi,t),gi!==null&&Hl(gi,t),yi!==null&&Hl(yi,t),qr.forEach(e),Br.forEach(e);for(var n=0;n<ei.length;n++){var i=ei[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<ei.length&&(n=ei[0],n.blockedOn===null);)fE(n),n.blockedOn===null&&ei.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],o=n[i+1],r=s[bt]||null;if(typeof o=="function")r||Fg(n);else if(r){var l=null;if(o&&o.hasAttribute("formAction")){if(s=o,r=o[bt]||null)l=r.formAction;else if(Vh(s)!==null)continue}else l=r.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Fg(n)}}}function dE(){function t(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(r){return s=r})},focusReset:"manual",scroll:"manual"})}function e(){s!==null&&(s(),s=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,s=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),s!==null&&(s(),s=null)}}}function Ph(t){this._internalRoot=t}Ru.prototype.render=Ph.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));var n=e.current,i=zt();aE(n,i,t,e,null,null)};Ru.prototype.unmount=Ph.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;aE(t.current,2,null,t,null,null),Au(),e[go]=null}};function Ru(t){this._internalRoot=t}Ru.prototype.unstable_scheduleHydration=function(t){if(t){var e=Gv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ei.length&&e!==0&&e<ei[n].priority;n++);ei.splice(n,0,t),n===0&&fE(t)}};var Yg=wv.version;if(Yg!=="19.2.0")throw Error(q(527,Yg,"19.2.0"));me.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=nC(e),t=t!==null?Dv(t):null,t=t===null?null:t.stateNode,t};var wI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yl.isDisabled&&Yl.supportsFiber)try{Kr=Yl.inject(wI),Ot=Yl}catch{}}au.createRoot=function(t,e){if(!xv(t))throw Error(q(299));var n=!1,i="",s=i0,o=s0,r=o0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(o=e.onCaughtError),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=rE(t,1,!1,null,null,n,i,null,s,o,r,dE),t[go]=e.current,xh(t),new Ph(e)};au.hydrateRoot=function(t,e,n){if(!xv(t))throw Error(q(299));var i=!1,s="",o=i0,r=s0,l=o0,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=rE(t,1,!0,e,n??null,i,s,c,o,r,l,dE),e.context=lE(null),n=e.current,i=zt(),i=zd(i),s=fi(i),s.callback=null,di(n,s,i),n=i,e.current.lanes=n,$r(e,n),_n(e),t[go]=e.current,xh(t),new Ru(e)};au.version="19.2.0";function hE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hE)}catch(t){console.error(t)}}hE(),Ev.exports=au;var xI=Ev.exports;const MI=fv(xI);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let NI,DI;function bI(){return{geminiUrl:NI,vertexUrl:DI}}function VI(t,e,n,i){var s,o;if(!(t!=null&&t.baseUrl)){const r=bI();return e?(s=r.vertexUrl)!==null&&s!==void 0?s:n:(o=r.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cs{}function F(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const o=e[s];return o!=null?String(o):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function f(t,e,n){for(let o=0;o<e.length-1;o++){const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${r}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let d=0;d<c.length;d++){const h=c[d];f(h,e.slice(o+1),n[d])}else for(const d of c)f(d,e.slice(o+1),n)}return}else if(r.endsWith("[0]")){const l=r.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];f(c[0],e.slice(o+1),n);return}(!t[r]||typeof t[r]!="object")&&(t[r]={}),t=t[r]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const s=e[i];if(s.endsWith("[]")){const o=s.slice(0,-2);if(o in t){const r=t[o];return Array.isArray(r)?r.map(l=>a(l,e.slice(i+1),n)):n}else return n}else t=t[s]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function PI(t,e){for(const[n,i]of Object.entries(e)){const s=n.split("."),o=i.split("."),r=new Set;let l=-1;for(let c=0;c<s.length;c++)if(s[c]==="*"){l=c;break}if(l!==-1&&o.length>l)for(let c=l;c<o.length;c++){const d=o[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&r.add(d)}td(t,s,o,0,r)}}function td(t,e,n,i,s){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const r=o.slice(0,-2),l=t;if(r in l&&Array.isArray(l[r]))for(const c of l[r])td(c,e,n,i+1,s)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const r=t,l=Object.keys(r).filter(d=>!d.startsWith("_")&&!s.has(d)),c={};for(const d of l)c[d]=r[d];for(const[d,h]of Object.entries(c)){const p=[];for(const g of n.slice(i))g==="*"?p.push(d):p.push(g);f(r,p,h)}for(const d of l)delete r[d]}}else{const r=t;o in r&&td(r[o],e,n,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uh(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UI(t){const e={},n=a(t,["operationName"]);n!=null&&f(e,["operationName"],n);const i=a(t,["resourceName"]);return i!=null&&f(e,["_url","resourceName"],i),e}function LI(t){const e={},n=a(t,["name"]);n!=null&&f(e,["name"],n);const i=a(t,["metadata"]);i!=null&&f(e,["metadata"],i);const s=a(t,["done"]);s!=null&&f(e,["done"],s);const o=a(t,["error"]);o!=null&&f(e,["error"],o);const r=a(t,["response","generateVideoResponse"]);return r!=null&&f(e,["response"],qI(r)),e}function kI(t){const e={},n=a(t,["name"]);n!=null&&f(e,["name"],n);const i=a(t,["metadata"]);i!=null&&f(e,["metadata"],i);const s=a(t,["done"]);s!=null&&f(e,["done"],s);const o=a(t,["error"]);o!=null&&f(e,["error"],o);const r=a(t,["response"]);return r!=null&&f(e,["response"],BI(r)),e}function qI(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>OI(r))),f(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const s=a(t,["raiMediaFilteredReasons"]);return s!=null&&f(e,["raiMediaFilteredReasons"],s),e}function BI(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>GI(r))),f(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const s=a(t,["raiMediaFilteredReasons"]);return s!=null&&f(e,["raiMediaFilteredReasons"],s),e}function OI(t){const e={},n=a(t,["video"]);return n!=null&&f(e,["video"],FI(n)),e}function GI(t){const e={},n=a(t,["_self"]);return n!=null&&f(e,["video"],YI(n)),e}function zI(t){const e={},n=a(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function HI(t){const e={},n=a(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function FI(t){const e={},n=a(t,["uri"]);n!=null&&f(e,["uri"],n);const i=a(t,["encodedVideo"]);i!=null&&f(e,["videoBytes"],Uh(i));const s=a(t,["encoding"]);return s!=null&&f(e,["mimeType"],s),e}function YI(t){const e={},n=a(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=a(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],Uh(i));const s=a(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Jg;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Jg||(Jg={}));var Kg;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Kg||(Kg={}));var ri;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ri||(ri={}));var Qg;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Qg||(Qg={}));var $g;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})($g||($g={}));var Xg;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Xg||(Xg={}));var Zg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Zg||(Zg={}));var Wg;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Wg||(Wg={}));var jg;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(jg||(jg={}));var ey;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ey||(ey={}));var ty;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(ty||(ty={}));var ny;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ny||(ny={}));var iy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(iy||(iy={}));var sy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(sy||(sy={}));var oy;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(oy||(oy={}));var Qa;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Qa||(Qa={}));var ry;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ry||(ry={}));var nd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(nd||(nd={}));var ly;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ly||(ly={}));var ay;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ay||(ay={}));var uy;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(uy||(uy={}));var cy;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(cy||(cy={}));var fy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(fy||(fy={}));var dy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(dy||(dy={}));var hy;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(hy||(hy={}));var my;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(my||(my={}));var py;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(py||(py={}));var gy;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(gy||(gy={}));var yy;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(yy||(yy={}));var _y;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(_y||(_y={}));var vy;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(vy||(vy={}));var Ty;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ty||(Ty={}));var Ey;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Ey||(Ey={}));var Ay;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Ay||(Ay={}));var Sy;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Sy||(Sy={}));var Cy;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Cy||(Cy={}));var Ry;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Ry||(Ry={}));var Iy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Iy||(Iy={}));var wy;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(wy||(wy={}));var xy;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(xy||(xy={}));var My;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(My||(My={}));var Ny;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ny||(Ny={}));var Dy;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Dy||(Dy={}));var by;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(by||(by={}));var Vy;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Vy||(Vy={}));var Py;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Py||(Py={}));var Uy;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Uy||(Uy={}));var Ly;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Ly||(Ly={}));var Us;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Us||(Us={}));class id{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Zo{get text(){var e,n,i,s,o,r,l,c;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",h=!1;const p=[];for(const g of(c=(l=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[_,w]of Object.entries(g))_!=="text"&&_!=="thought"&&(w!==null||w!==void 0)&&p.push(_);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;h=!0,d+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?d:void 0}get data(){var e,n,i,s,o,r,l,c;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const h=[];for(const p of(c=(l=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,_]of Object.entries(p))g!=="inlineData"&&(_!==null||_!==void 0)&&h.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,s,o,r,l,c;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(l=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,i,s,o,r,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(l=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,s,o,r,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(l=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.output}}class ky{}class qy{}class JI{}class KI{}class QI{}class $I{}class By{}class Oy{}class Gy{}class XI{}class $a{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const i=new $a;let s;const o=e;return n?s=kI(o):s=LI(o),Object.assign(i,s),i}}class zy{}class Hy{}class Fy{}class ZI{}class WI{}class jI{}class Yy{}class ew{get text(){var e,n,i;let s="",o=!1;const r=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="text"&&c!=="thought"&&d!==null&&r.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;o=!0,s+=l.text}}return r.length>0&&console.warn(`there are non-text parts ${r} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?s:void 0}get data(){var e,n,i;let s="";const o=[];for(const r of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,c]of Object.entries(r))l!=="inlineData"&&c!==null&&o.push(l);r.inlineData&&typeof r.inlineData.data=="string"&&(s+=atob(r.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class tw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function mE(t,e){const n=fe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function pE(t){return Array.isArray(t)?t.map(e=>Xa(e)):[Xa(t)]}function Xa(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function gE(t){const e=Xa(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function yE(t){const e=Xa(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Jy(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function _E(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Jy(e)):[Jy(t)]}function sd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Ky(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Qy(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function vt(t){if(t==null)throw new Error("ContentUnion is required");return sd(t)?t:{role:"user",parts:_E(t)}}function Lh(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=vt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=vt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>vt(n)):[vt(e)]}function tn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Ky(t)||Qy(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[vt(t)]}const e=[],n=[],i=sd(t[0]);for(const s of t){const o=sd(s);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(s);else{if(Ky(s)||Qy(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return i||e.push({role:"user",parts:_E(n)}),e}function nw(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(ri).includes(n[0].toUpperCase())?n[0].toUpperCase():ri.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(ri).includes(i.toUpperCase())?i.toUpperCase():ri.TYPE_UNSPECIFIED})}}function Hs(t){const e={},n=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&nw(t.type,e);for(const[r,l]of Object.entries(t))if(l!=null)if(r=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(ri).includes(l.toUpperCase())?l.toUpperCase():ri.TYPE_UNSPECIFIED}else if(n.includes(r))e[r]=Hs(l);else if(i.includes(r)){const c=[];for(const d of l){if(d.type=="null"){e.nullable=!0;continue}c.push(Hs(d))}e[r]=c}else if(s.includes(r)){const c={};for(const[d,h]of Object.entries(l))c[d]=Hs(h);e[r]=c}else{if(r==="additionalProperties")continue;e[r]=l}return e}function kh(t){return Hs(t)}function qh(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Bh(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function So(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Hs(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Hs(e.response));return t}function Co(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function iw(t,e,n,i=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function zn(t,e){if(typeof e!="string")throw new Error("name must be a string");return iw(t,e,"cachedContents")}function vE(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Mi(t){return Uh(t)}function sw(t){return t!=null&&typeof t=="object"&&"name"in t}function ow(t){return t!=null&&typeof t=="object"&&"video"in t}function rw(t){return t!=null&&typeof t=="object"&&"uri"in t}function TE(t){var e;let n;if(sw(t)&&(n=t.name),!(rw(t)&&(n=t.uri,n===void 0))&&!(ow(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function EE(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function AE(t){for(const e of["models","tunedModels","publisherModels"])if(lw(t,e))return t[e];return[]}function lw(t,e){return t!==null&&typeof t=="object"&&e in t}function aw(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function uw(t,e={}){const n=[],i=new Set;for(const s of t){const o=s.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const r=aw(s,e);r.functionDeclarations&&n.push(...r.functionDeclarations)}return{functionDeclarations:n}}function SE(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function cw(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function CE(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let o=!1;for(const r of s){if(typeof r!="object"||r===null)continue;const c=r.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ro(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function RE(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fw(t){const e={},n=a(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const i=a(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>zw(r))),f(e,["inlinedResponses"],o)}const s=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>r)),f(e,["inlinedEmbedContentResponses"],o)}return e}function dw(t){const e={},n=a(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const i=a(t,["gcsDestination","outputUriPrefix"]);i!=null&&f(e,["gcsUri"],i);const s=a(t,["bigqueryDestination","outputUri"]);return s!=null&&f(e,["bigqueryUri"],s),e}function hw(t){const e={},n=a(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const i=a(t,["gcsUri"]);i!=null&&f(e,["gcsDestination","outputUriPrefix"],i);const s=a(t,["bigqueryUri"]);if(s!=null&&f(e,["bigqueryDestination","outputUri"],s),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function da(t){const e={},n=a(t,["name"]);n!=null&&f(e,["name"],n);const i=a(t,["metadata","displayName"]);i!=null&&f(e,["displayName"],i);const s=a(t,["metadata","state"]);s!=null&&f(e,["state"],RE(s));const o=a(t,["metadata","createTime"]);o!=null&&f(e,["createTime"],o);const r=a(t,["metadata","endTime"]);r!=null&&f(e,["endTime"],r);const l=a(t,["metadata","updateTime"]);l!=null&&f(e,["updateTime"],l);const c=a(t,["metadata","model"]);c!=null&&f(e,["model"],c);const d=a(t,["metadata","output"]);return d!=null&&f(e,["dest"],fw(CE(d))),e}function od(t){const e={},n=a(t,["name"]);n!=null&&f(e,["name"],n);const i=a(t,["displayName"]);i!=null&&f(e,["displayName"],i);const s=a(t,["state"]);s!=null&&f(e,["state"],RE(s));const o=a(t,["error"]);o!=null&&f(e,["error"],o);const r=a(t,["createTime"]);r!=null&&f(e,["createTime"],r);const l=a(t,["startTime"]);l!=null&&f(e,["startTime"],l);const c=a(t,["endTime"]);c!=null&&f(e,["endTime"],c);const d=a(t,["updateTime"]);d!=null&&f(e,["updateTime"],d);const h=a(t,["model"]);h!=null&&f(e,["model"],h);const p=a(t,["inputConfig"]);p!=null&&f(e,["src"],mw(p));const g=a(t,["outputConfig"]);return g!=null&&f(e,["dest"],dw(CE(g))),e}function mw(t){const e={},n=a(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const i=a(t,["gcsSource","uris"]);i!=null&&f(e,["gcsUri"],i);const s=a(t,["bigquerySource","inputUri"]);return s!=null&&f(e,["bigqueryUri"],s),e}function pw(t,e){const n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=a(e,["fileName"]);i!=null&&f(n,["fileName"],i);const s=a(e,["inlinedRequests"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>Gw(t,r))),f(n,["requests","requests"],o)}return n}function gw(t){const e={},n=a(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const i=a(t,["gcsUri"]);i!=null&&f(e,["gcsSource","uris"],i);const s=a(t,["bigqueryUri"]);if(s!=null&&f(e,["bigquerySource","inputUri"],s),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function yw(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&f(e,["data"],n);const i=a(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function _w(t,e){const n={},i=a(e,["name"]);return i!=null&&f(n,["_url","name"],Ro(t,i)),n}function vw(t,e){const n={},i=a(e,["name"]);return i!=null&&f(n,["_url","name"],Ro(t,i)),n}function Tw(t){const e={},n=a(t,["content"]);n!=null&&f(e,["content"],n);const i=a(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],Ew(i));const s=a(t,["tokenCount"]);s!=null&&f(e,["tokenCount"],s);const o=a(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const r=a(t,["urlContextMetadata"]);r!=null&&f(e,["urlContextMetadata"],r);const l=a(t,["avgLogprobs"]);l!=null&&f(e,["avgLogprobs"],l);const c=a(t,["groundingMetadata"]);c!=null&&f(e,["groundingMetadata"],c);const d=a(t,["index"]);d!=null&&f(e,["index"],d);const h=a(t,["logprobsResult"]);h!=null&&f(e,["logprobsResult"],h);const p=a(t,["safetyRatings"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(_=>_)),f(e,["safetyRatings"],g)}return e}function Ew(t){const e={},n=a(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["citations"],i)}return e}function IE(t){const e={},n=a(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>$w(o))),f(e,["parts"],s)}const i=a(t,["role"]);return i!=null&&f(e,["role"],i),e}function Aw(t,e){const n={},i=a(t,["displayName"]);if(e!==void 0&&i!=null&&f(e,["batch","displayName"],i),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Sw(t,e){const n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const s=a(t,["dest"]);return e!==void 0&&s!=null&&f(e,["outputConfig"],hw(cw(s))),n}function $y(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["src"]);s!=null&&f(n,["batch","inputConfig"],pw(t,SE(t,s)));const o=a(e,["config"]);return o!=null&&Aw(o,n),n}function Cw(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["model"],fe(t,i));const s=a(e,["src"]);s!=null&&f(n,["inputConfig"],gw(SE(t,s)));const o=a(e,["config"]);return o!=null&&Sw(o,n),n}function Rw(t,e){const n={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&f(e,["batch","displayName"],i),n}function Iw(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["src"]);s!=null&&f(n,["batch","inputConfig"],Vw(t,s));const o=a(e,["config"]);return o!=null&&Rw(o,n),n}function ww(t,e){const n={},i=a(e,["name"]);return i!=null&&f(n,["_url","name"],Ro(t,i)),n}function xw(t,e){const n={},i=a(e,["name"]);return i!=null&&f(n,["_url","name"],Ro(t,i)),n}function Mw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&f(e,["name"],i);const s=a(t,["done"]);s!=null&&f(e,["done"],s);const o=a(t,["error"]);return o!=null&&f(e,["error"],o),e}function Nw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&f(e,["name"],i);const s=a(t,["done"]);s!=null&&f(e,["done"],s);const o=a(t,["error"]);return o!=null&&f(e,["error"],o),e}function Dw(t,e){const n={},i=a(e,["contents"]);if(i!=null){let o=Lh(t,i);Array.isArray(o)&&(o=o.map(r=>r)),f(n,["requests[]","request","content"],o)}const s=a(e,["config"]);return s!=null&&(f(n,["_self"],bw(s,n)),PI(n,{"requests[].*":"requests[].request.*"})),n}function bw(t,e){const n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const s=a(t,["title"]);e!==void 0&&s!=null&&f(e,["requests[]","title"],s);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Vw(t,e){const n={},i=a(e,["fileName"]);i!=null&&f(n,["file_name"],i);const s=a(e,["inlinedRequests"]);return s!=null&&f(n,["requests"],Dw(t,s)),n}function Pw(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Uw(t,e,n){const i={},s=a(e,["systemInstruction"]);n!==void 0&&s!=null&&f(n,["systemInstruction"],IE(vt(s)));const o=a(e,["temperature"]);o!=null&&f(i,["temperature"],o);const r=a(e,["topP"]);r!=null&&f(i,["topP"],r);const l=a(e,["topK"]);l!=null&&f(i,["topK"],l);const c=a(e,["candidateCount"]);c!=null&&f(i,["candidateCount"],c);const d=a(e,["maxOutputTokens"]);d!=null&&f(i,["maxOutputTokens"],d);const h=a(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);const g=a(e,["logprobs"]);g!=null&&f(i,["logprobs"],g);const _=a(e,["presencePenalty"]);_!=null&&f(i,["presencePenalty"],_);const w=a(e,["frequencyPenalty"]);w!=null&&f(i,["frequencyPenalty"],w);const D=a(e,["seed"]);D!=null&&f(i,["seed"],D);const U=a(e,["responseMimeType"]);U!=null&&f(i,["responseMimeType"],U);const C=a(e,["responseSchema"]);C!=null&&f(i,["responseSchema"],kh(C));const T=a(e,["responseJsonSchema"]);if(T!=null&&f(i,["responseJsonSchema"],T),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=a(e,["safetySettings"]);if(n!==void 0&&R!=null){let V=R;Array.isArray(V)&&(V=V.map(x=>Xw(x))),f(n,["safetySettings"],V)}const b=a(e,["tools"]);if(n!==void 0&&b!=null){let V=Co(b);Array.isArray(V)&&(V=V.map(x=>Zw(So(x)))),f(n,["tools"],V)}const k=a(e,["toolConfig"]);if(n!==void 0&&k!=null&&f(n,["toolConfig"],k),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=a(e,["cachedContent"]);n!==void 0&&B!=null&&f(n,["cachedContent"],zn(t,B));const S=a(e,["responseModalities"]);S!=null&&f(i,["responseModalities"],S);const E=a(e,["mediaResolution"]);E!=null&&f(i,["mediaResolution"],E);const A=a(e,["speechConfig"]);if(A!=null&&f(i,["speechConfig"],qh(A)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=a(e,["thinkingConfig"]);I!=null&&f(i,["thinkingConfig"],I);const N=a(e,["imageConfig"]);return N!=null&&f(i,["imageConfig"],N),i}function Lw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>Tw(d))),f(e,["candidates"],c)}const s=a(t,["modelVersion"]);s!=null&&f(e,["modelVersion"],s);const o=a(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const r=a(t,["responseId"]);r!=null&&f(e,["responseId"],r);const l=a(t,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function kw(t,e){const n={},i=a(e,["name"]);return i!=null&&f(n,["_url","name"],Ro(t,i)),n}function qw(t,e){const n={},i=a(e,["name"]);return i!=null&&f(n,["_url","name"],Ro(t,i)),n}function Bw(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Ow(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Gw(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["request","model"],fe(t,i));const s=a(e,["contents"]);if(s!=null){let l=tn(s);Array.isArray(l)&&(l=l.map(c=>IE(c))),f(n,["request","contents"],l)}const o=a(e,["metadata"]);o!=null&&f(n,["metadata"],o);const r=a(e,["config"]);return r!=null&&f(n,["request","generationConfig"],Uw(t,r,a(n,["request"],{}))),n}function zw(t){const e={},n=a(t,["response"]);n!=null&&f(e,["response"],Lw(n));const i=a(t,["error"]);return i!=null&&f(e,["error"],i),e}function Hw(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);if(e!==void 0&&s!=null&&f(e,["_query","pageToken"],s),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Fw(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);const o=a(t,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),n}function Yw(t){const e={},n=a(t,["config"]);return n!=null&&Hw(n,e),e}function Jw(t){const e={},n=a(t,["config"]);return n!=null&&Fw(n,e),e}function Kw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=a(t,["operations"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>da(r))),f(e,["batchJobs"],o)}return e}function Qw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=a(t,["batchPredictionJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>od(r))),f(e,["batchJobs"],o)}return e}function $w(t){const e={},n=a(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const i=a(t,["thought"]);i!=null&&f(e,["thought"],i);const s=a(t,["inlineData"]);s!=null&&f(e,["inlineData"],yw(s));const o=a(t,["fileData"]);o!=null&&f(e,["fileData"],Pw(o));const r=a(t,["thoughtSignature"]);r!=null&&f(e,["thoughtSignature"],r);const l=a(t,["functionCall"]);l!=null&&f(e,["functionCall"],l);const c=a(t,["codeExecutionResult"]);c!=null&&f(e,["codeExecutionResult"],c);const d=a(t,["executableCode"]);d!=null&&f(e,["executableCode"],d);const h=a(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&f(e,["text"],p),e}function Xw(t){const e={};if(a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=a(t,["category"]);n!=null&&f(e,["category"],n);const i=a(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function Zw(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),f(e,["functionDeclarations"],d)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],Ow(i));const s=a(t,["googleSearchRetrieval"]);if(s!=null&&f(e,["googleSearchRetrieval"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["googleMaps"]);o!=null&&f(e,["googleMaps"],Bw(o));const r=a(t,["urlContext"]);r!=null&&f(e,["urlContext"],r);const l=a(t,["computerUse"]);l!=null&&f(e,["computerUse"],l);const c=a(t,["codeExecution"]);return c!=null&&f(e,["codeExecution"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ts;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ts||(ts={}));class sl{constructor(e,n,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,s)}init(e,n,i){var s,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let r={config:{}};!i||Object.keys(i).length===0?r={config:{}}:typeof i=="object"?r=Object.assign({},i):r=i,r.config&&(r.config.pageToken=n.nextPageToken),this.paramsInternal=r,this.pageInternalSize=(o=(s=r.config)===null||s===void 0?void 0:s.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ww extends cs{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new sl(ts.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=$y(this.apiClient,e),i=n._url,s=F("{model}:batchGenerateContent",i),l=n.batch.inputConfig.requests,c=l.requests,d=[];for(const h of c){const p=Object.assign({},h);if(p.systemInstruction){const g=p.systemInstruction;delete p.systemInstruction;const _=p.request;_.systemInstruction=g,p.request=_}d.push(p)}return l.requests=d,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const o=this.getGcsUri(e),r=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${s}`;else if(r)i.dest=`${r}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Cw(this.apiClient,e);return l=F("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>od(h))}else{const d=$y(this.apiClient,e);return l=F("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>da(h))}}async createEmbeddingsInternal(e){var n,i;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Iw(this.apiClient,e);return o=F("{model}:asyncBatchEmbedContent",l._url),r=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),s.then(c=>da(c))}}async get(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=qw(this.apiClient,e);return l=F("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>od(h))}else{const d=kw(this.apiClient,e);return l=F("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>da(h))}}async cancel(e){var n,i,s,o;let r="",l={};if(this.apiClient.isVertexAI()){const c=vw(this.apiClient,e);r=F("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=_w(this.apiClient,e);r=F("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Jw(e);return l=F("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=Qw(h),g=new Yy;return Object.assign(g,p),g})}else{const d=Yw(e);return l=F("batches",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=Kw(h),g=new Yy;return Object.assign(g,p),g})}}async delete(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=xw(this.apiClient,e);return l=F("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>Nw(h))}else{const d=ww(this.apiClient,e);return l=F("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>Mw(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jw(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&f(e,["data"],n);const i=a(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Xy(t){const e={},n=a(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>T1(o))),f(e,["parts"],s)}const i=a(t,["role"]);return i!=null&&f(e,["role"],i),e}function e1(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const s=a(t,["expireTime"]);e!==void 0&&s!=null&&f(e,["expireTime"],s);const o=a(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const r=a(t,["contents"]);if(e!==void 0&&r!=null){let h=tn(r);Array.isArray(h)&&(h=h.map(p=>Xy(p))),f(e,["contents"],h)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&f(e,["systemInstruction"],Xy(vt(l)));const c=a(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>E1(p))),f(e,["tools"],h)}const d=a(t,["toolConfig"]);if(e!==void 0&&d!=null&&f(e,["toolConfig"],d),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function t1(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const s=a(t,["expireTime"]);e!==void 0&&s!=null&&f(e,["expireTime"],s);const o=a(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const r=a(t,["contents"]);if(e!==void 0&&r!=null){let p=tn(r);Array.isArray(p)&&(p=p.map(g=>g)),f(e,["contents"],p)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&f(e,["systemInstruction"],vt(l));const c=a(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>A1(g))),f(e,["tools"],p)}const d=a(t,["toolConfig"]);e!==void 0&&d!=null&&f(e,["toolConfig"],d);const h=a(t,["kmsKeyName"]);return e!==void 0&&h!=null&&f(e,["encryption_spec","kmsKeyName"],h),n}function n1(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["model"],mE(t,i));const s=a(e,["config"]);return s!=null&&e1(s,n),n}function i1(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["model"],mE(t,i));const s=a(e,["config"]);return s!=null&&t1(s,n),n}function s1(t,e){const n={},i=a(e,["name"]);return i!=null&&f(n,["_url","name"],zn(t,i)),n}function o1(t,e){const n={},i=a(e,["name"]);return i!=null&&f(n,["_url","name"],zn(t,i)),n}function r1(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function l1(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function a1(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function u1(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&f(e,["description"],n);const i=a(t,["name"]);i!=null&&f(e,["name"],i);const s=a(t,["parameters"]);s!=null&&f(e,["parameters"],s);const o=a(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const r=a(t,["response"]);r!=null&&f(e,["response"],r);const l=a(t,["responseJsonSchema"]);return l!=null&&f(e,["responseJsonSchema"],l),e}function c1(t,e){const n={},i=a(e,["name"]);return i!=null&&f(n,["_url","name"],zn(t,i)),n}function f1(t,e){const n={},i=a(e,["name"]);return i!=null&&f(n,["_url","name"],zn(t,i)),n}function d1(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function h1(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function m1(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);return e!==void 0&&s!=null&&f(e,["_query","pageToken"],s),n}function p1(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);return e!==void 0&&s!=null&&f(e,["_query","pageToken"],s),n}function g1(t){const e={},n=a(t,["config"]);return n!=null&&m1(n,e),e}function y1(t){const e={},n=a(t,["config"]);return n!=null&&p1(n,e),e}function _1(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=a(t,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>r)),f(e,["cachedContents"],o)}return e}function v1(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=a(t,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>r)),f(e,["cachedContents"],o)}return e}function T1(t){const e={},n=a(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const i=a(t,["thought"]);i!=null&&f(e,["thought"],i);const s=a(t,["inlineData"]);s!=null&&f(e,["inlineData"],jw(s));const o=a(t,["fileData"]);o!=null&&f(e,["fileData"],a1(o));const r=a(t,["thoughtSignature"]);r!=null&&f(e,["thoughtSignature"],r);const l=a(t,["functionCall"]);l!=null&&f(e,["functionCall"],l);const c=a(t,["codeExecutionResult"]);c!=null&&f(e,["codeExecutionResult"],c);const d=a(t,["executableCode"]);d!=null&&f(e,["executableCode"],d);const h=a(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&f(e,["text"],p),e}function E1(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),f(e,["functionDeclarations"],d)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],h1(i));const s=a(t,["googleSearchRetrieval"]);if(s!=null&&f(e,["googleSearchRetrieval"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["googleMaps"]);o!=null&&f(e,["googleMaps"],d1(o));const r=a(t,["urlContext"]);r!=null&&f(e,["urlContext"],r);const l=a(t,["computerUse"]);l!=null&&f(e,["computerUse"],l);const c=a(t,["codeExecution"]);return c!=null&&f(e,["codeExecution"],c),e}function A1(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>u1(g))),f(e,["functionDeclarations"],p)}const i=a(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const s=a(t,["googleSearch"]);s!=null&&f(e,["googleSearch"],s);const o=a(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const r=a(t,["enterpriseWebSearch"]);r!=null&&f(e,["enterpriseWebSearch"],r);const l=a(t,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);const c=a(t,["urlContext"]);c!=null&&f(e,["urlContext"],c);const d=a(t,["computerUse"]);d!=null&&f(e,["computerUse"],d);const h=a(t,["codeExecution"]);return h!=null&&f(e,["codeExecution"],h),e}function S1(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const s=a(t,["expireTime"]);return e!==void 0&&s!=null&&f(e,["expireTime"],s),n}function C1(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const s=a(t,["expireTime"]);return e!==void 0&&s!=null&&f(e,["expireTime"],s),n}function R1(t,e){const n={},i=a(e,["name"]);i!=null&&f(n,["_url","name"],zn(t,i));const s=a(e,["config"]);return s!=null&&S1(s,n),n}function I1(t,e){const n={},i=a(e,["name"]);i!=null&&f(n,["_url","name"],zn(t,i));const s=a(e,["config"]);return s!=null&&C1(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w1 extends cs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new sl(ts.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=i1(this.apiClient,e);return l=F("cachedContents",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}else{const d=n1(this.apiClient,e);return l=F("cachedContents",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async get(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=f1(this.apiClient,e);return l=F("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}else{const d=c1(this.apiClient,e);return l=F("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=o1(this.apiClient,e);return l=F("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=l1(h),g=new Hy;return Object.assign(g,p),g})}else{const d=s1(this.apiClient,e);return l=F("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=r1(h),g=new Hy;return Object.assign(g,p),g})}}async update(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=I1(this.apiClient,e);return l=F("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}else{const d=R1(this.apiClient,e);return l=F("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async listInternal(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=y1(e);return l=F("cachedContents",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=v1(h),g=new Fy;return Object.assign(g,p),g})}else{const d=g1(e);return l=F("cachedContents",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=_1(h),g=new Fy;return Object.assign(g,p),g})}}}function Zy(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Me(t){return this instanceof Me?(this.v=t,this):new Me(t)}function Fs(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",r),s[Symbol.asyncIterator]=function(){return this},s;function r(_){return function(w){return Promise.resolve(w).then(_,p)}}function l(_,w){i[_]&&(s[_]=function(D){return new Promise(function(U,C){o.push([_,D,U,C])>1||c(_,D)})},w&&(s[_]=w(s[_])))}function c(_,w){try{d(i[_](w))}catch(D){g(o[0][3],D)}}function d(_){_.value instanceof Me?Promise.resolve(_.value.v).then(h,p):g(o[0][2],_)}function h(_){c("next",_)}function p(_){c("throw",_)}function g(_,w){_(w),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Er(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Zy=="function"?Zy(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(r){return new Promise(function(l,c){r=t[o](r),s(l,c,r.done,r.value)})}}function s(o,r,l,c){Promise.resolve(c).then(function(d){o({value:d,done:l})},r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x1(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:wE(n)}function wE(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function M1(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Wy(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let o=!0;for(;i<n&&t[i].role==="model";)s.push(t[i]),o&&!wE(t[i])&&(o=!1),i++;o?e.push(...s):e.pop()}return e}class N1{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new D1(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class D1{constructor(e,n,i,s={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=s,this.history=o,this.sendPromise=Promise.resolve(),M1(o)}async sendMessage(e){var n;await this.sendPromise;const i=vt(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,r,l;const c=await s,d=(r=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content,h=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let g=[];h!=null&&(g=(l=h.slice(p))!==null&&l!==void 0?l:[]);const _=d?[d]:[];this.recordHistory(i,_,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const i=vt(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const o=await s;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?Wy(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,s;return Fs(this,arguments,function*(){var r,l,c,d;const h=[];try{for(var p=!0,g=Er(e),_;_=yield Me(g.next()),r=_.done,!r;p=!0){d=_.value,p=!1;const w=d;if(x1(w)){const D=(s=(i=w.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;D!==void 0&&h.push(D)}yield yield Me(w)}}catch(w){l={error:w}}finally{try{!p&&!r&&(c=g.return)&&(yield Me(c.call(g)))}finally{if(l)throw l.error}}this.recordHistory(n,h)})}recordHistory(e,n,i){let s=[];n.length>0&&n.every(o=>o.role!==void 0)?s=n:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Wy(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Iu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Iu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b1(t){const e={},n=a(t,["file"]);return n!=null&&f(e,["file"],n),e}function V1(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function P1(t){const e={},n=a(t,["name"]);return n!=null&&f(e,["_url","file"],TE(n)),e}function U1(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function L1(t){const e={},n=a(t,["name"]);return n!=null&&f(e,["_url","file"],TE(n)),e}function k1(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);return e!==void 0&&s!=null&&f(e,["_query","pageToken"],s),n}function q1(t){const e={},n=a(t,["config"]);return n!=null&&k1(n,e),e}function B1(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=a(t,["files"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>r)),f(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O1 extends cs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new sl(ts.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=q1(e);return o=F("files",l._url),r=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>{const d=B1(c),h=new ZI;return Object.assign(h,d),h})}}async createInternal(e){var n,i;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=b1(e);return o=F("upload/v1beta/files",l._url),r=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),s.then(c=>{const d=V1(c),h=new WI;return Object.assign(h,d),h})}}async get(e){var n,i;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=L1(e);return o=F("files/{file}",l._url),r=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(e){var n,i;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=P1(e);return o=F("files/{file}",l._url),r=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>{const d=U1(c),h=new jI;return Object.assign(h,d),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ha(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&f(e,["data"],n);const i=a(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function G1(t){const e={},n=a(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>nx(o))),f(e,["parts"],s)}const i=a(t,["role"]);return i!=null&&f(e,["role"],i),e}function z1(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function H1(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&f(e,["description"],n);const i=a(t,["name"]);i!=null&&f(e,["name"],i);const s=a(t,["parameters"]);s!=null&&f(e,["parameters"],s);const o=a(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const r=a(t,["response"]);r!=null&&f(e,["response"],r);const l=a(t,["responseJsonSchema"]);return l!=null&&f(e,["responseJsonSchema"],l),e}function F1(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=a(t,["audioTimestamp"]);i!=null&&f(e,["audioTimestamp"],i);const s=a(t,["candidateCount"]);s!=null&&f(e,["candidateCount"],s);const o=a(t,["enableAffectiveDialog"]);o!=null&&f(e,["enableAffectiveDialog"],o);const r=a(t,["frequencyPenalty"]);r!=null&&f(e,["frequencyPenalty"],r);const l=a(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);const c=a(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const d=a(t,["mediaResolution"]);d!=null&&f(e,["mediaResolution"],d);const h=a(t,["presencePenalty"]);h!=null&&f(e,["presencePenalty"],h);const p=a(t,["responseJsonSchema"]);p!=null&&f(e,["responseJsonSchema"],p);const g=a(t,["responseLogprobs"]);g!=null&&f(e,["responseLogprobs"],g);const _=a(t,["responseMimeType"]);_!=null&&f(e,["responseMimeType"],_);const w=a(t,["responseModalities"]);w!=null&&f(e,["responseModalities"],w);const D=a(t,["responseSchema"]);D!=null&&f(e,["responseSchema"],D);const U=a(t,["routingConfig"]);U!=null&&f(e,["routingConfig"],U);const C=a(t,["seed"]);C!=null&&f(e,["seed"],C);const T=a(t,["speechConfig"]);T!=null&&f(e,["speechConfig"],xE(T));const R=a(t,["stopSequences"]);R!=null&&f(e,["stopSequences"],R);const b=a(t,["temperature"]);b!=null&&f(e,["temperature"],b);const k=a(t,["thinkingConfig"]);k!=null&&f(e,["thinkingConfig"],k);const B=a(t,["topK"]);B!=null&&f(e,["topK"],B);const S=a(t,["topP"]);return S!=null&&f(e,["topP"],S),e}function Y1(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function J1(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function K1(t,e){const n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const s=a(t,["responseModalities"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","responseModalities"],s);const o=a(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const r=a(t,["topP"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","topP"],r);const l=a(t,["topK"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","topK"],l);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","maxOutputTokens"],c);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","mediaResolution"],d);const h=a(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],Bh(p));const g=a(t,["thinkingConfig"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","thinkingConfig"],g);const _=a(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],_);const w=a(t,["systemInstruction"]);e!==void 0&&w!=null&&f(e,["setup","systemInstruction"],G1(vt(w)));const D=a(t,["tools"]);if(e!==void 0&&D!=null){let B=Co(D);Array.isArray(B)&&(B=B.map(S=>sx(So(S)))),f(e,["setup","tools"],B)}const U=a(t,["sessionResumption"]);e!==void 0&&U!=null&&f(e,["setup","sessionResumption"],ix(U));const C=a(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&f(e,["setup","inputAudioTranscription"],C);const T=a(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&f(e,["setup","outputAudioTranscription"],T);const R=a(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&f(e,["setup","realtimeInputConfig"],R);const b=a(t,["contextWindowCompression"]);e!==void 0&&b!=null&&f(e,["setup","contextWindowCompression"],b);const k=a(t,["proactivity"]);return e!==void 0&&k!=null&&f(e,["setup","proactivity"],k),n}function Q1(t,e){const n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],F1(i));const s=a(t,["responseModalities"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","responseModalities"],s);const o=a(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const r=a(t,["topP"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","topP"],r);const l=a(t,["topK"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","topK"],l);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","maxOutputTokens"],c);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","mediaResolution"],d);const h=a(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],xE(Bh(p)));const g=a(t,["thinkingConfig"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","thinkingConfig"],g);const _=a(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],_);const w=a(t,["systemInstruction"]);e!==void 0&&w!=null&&f(e,["setup","systemInstruction"],vt(w));const D=a(t,["tools"]);if(e!==void 0&&D!=null){let B=Co(D);Array.isArray(B)&&(B=B.map(S=>ox(So(S)))),f(e,["setup","tools"],B)}const U=a(t,["sessionResumption"]);e!==void 0&&U!=null&&f(e,["setup","sessionResumption"],U);const C=a(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&f(e,["setup","inputAudioTranscription"],C);const T=a(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&f(e,["setup","outputAudioTranscription"],T);const R=a(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&f(e,["setup","realtimeInputConfig"],R);const b=a(t,["contextWindowCompression"]);e!==void 0&&b!=null&&f(e,["setup","contextWindowCompression"],b);const k=a(t,["proactivity"]);return e!==void 0&&k!=null&&f(e,["setup","proactivity"],k),n}function $1(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["setup","model"],fe(t,i));const s=a(e,["config"]);return s!=null&&f(n,["config"],K1(s,n)),n}function X1(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["setup","model"],fe(t,i));const s=a(e,["config"]);return s!=null&&f(n,["config"],Q1(s,n)),n}function Z1(t){const e={},n=a(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function W1(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["weightedPrompts"],i)}return e}function j1(t){const e={},n=a(t,["media"]);if(n!=null){let d=pE(n);Array.isArray(d)&&(d=d.map(h=>ha(h))),f(e,["mediaChunks"],d)}const i=a(t,["audio"]);i!=null&&f(e,["audio"],ha(yE(i)));const s=a(t,["audioStreamEnd"]);s!=null&&f(e,["audioStreamEnd"],s);const o=a(t,["video"]);o!=null&&f(e,["video"],ha(gE(o)));const r=a(t,["text"]);r!=null&&f(e,["text"],r);const l=a(t,["activityStart"]);l!=null&&f(e,["activityStart"],l);const c=a(t,["activityEnd"]);return c!=null&&f(e,["activityEnd"],c),e}function ex(t){const e={},n=a(t,["media"]);if(n!=null){let d=pE(n);Array.isArray(d)&&(d=d.map(h=>h)),f(e,["mediaChunks"],d)}const i=a(t,["audio"]);i!=null&&f(e,["audio"],yE(i));const s=a(t,["audioStreamEnd"]);s!=null&&f(e,["audioStreamEnd"],s);const o=a(t,["video"]);o!=null&&f(e,["video"],gE(o));const r=a(t,["text"]);r!=null&&f(e,["text"],r);const l=a(t,["activityStart"]);l!=null&&f(e,["activityStart"],l);const c=a(t,["activityEnd"]);return c!=null&&f(e,["activityEnd"],c),e}function tx(t){const e={},n=a(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const i=a(t,["serverContent"]);i!=null&&f(e,["serverContent"],i);const s=a(t,["toolCall"]);s!=null&&f(e,["toolCall"],s);const o=a(t,["toolCallCancellation"]);o!=null&&f(e,["toolCallCancellation"],o);const r=a(t,["usageMetadata"]);r!=null&&f(e,["usageMetadata"],rx(r));const l=a(t,["goAway"]);l!=null&&f(e,["goAway"],l);const c=a(t,["sessionResumptionUpdate"]);return c!=null&&f(e,["sessionResumptionUpdate"],c),e}function nx(t){const e={},n=a(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const i=a(t,["thought"]);i!=null&&f(e,["thought"],i);const s=a(t,["inlineData"]);s!=null&&f(e,["inlineData"],ha(s));const o=a(t,["fileData"]);o!=null&&f(e,["fileData"],z1(o));const r=a(t,["thoughtSignature"]);r!=null&&f(e,["thoughtSignature"],r);const l=a(t,["functionCall"]);l!=null&&f(e,["functionCall"],l);const c=a(t,["codeExecutionResult"]);c!=null&&f(e,["codeExecutionResult"],c);const d=a(t,["executableCode"]);d!=null&&f(e,["executableCode"],d);const h=a(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&f(e,["text"],p),e}function ix(t){const e={},n=a(t,["handle"]);if(n!=null&&f(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function xE(t){const e={},n=a(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],n),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=a(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function sx(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),f(e,["functionDeclarations"],d)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],J1(i));const s=a(t,["googleSearchRetrieval"]);if(s!=null&&f(e,["googleSearchRetrieval"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["googleMaps"]);o!=null&&f(e,["googleMaps"],Y1(o));const r=a(t,["urlContext"]);r!=null&&f(e,["urlContext"],r);const l=a(t,["computerUse"]);l!=null&&f(e,["computerUse"],l);const c=a(t,["codeExecution"]);return c!=null&&f(e,["codeExecution"],c),e}function ox(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>H1(g))),f(e,["functionDeclarations"],p)}const i=a(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const s=a(t,["googleSearch"]);s!=null&&f(e,["googleSearch"],s);const o=a(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const r=a(t,["enterpriseWebSearch"]);r!=null&&f(e,["enterpriseWebSearch"],r);const l=a(t,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);const c=a(t,["urlContext"]);c!=null&&f(e,["urlContext"],c);const d=a(t,["computerUse"]);d!=null&&f(e,["computerUse"],d);const h=a(t,["codeExecution"]);return h!=null&&f(e,["codeExecution"],h),e}function rx(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=a(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const s=a(t,["candidatesTokenCount"]);s!=null&&f(e,["responseTokenCount"],s);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&f(e,["toolUsePromptTokenCount"],o);const r=a(t,["thoughtsTokenCount"]);r!=null&&f(e,["thoughtsTokenCount"],r);const l=a(t,["totalTokenCount"]);l!=null&&f(e,["totalTokenCount"],l);const c=a(t,["promptTokensDetails"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(w=>w)),f(e,["promptTokensDetails"],_)}const d=a(t,["cacheTokensDetails"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(w=>w)),f(e,["cacheTokensDetails"],_)}const h=a(t,["candidatesTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(w=>w)),f(e,["responseTokensDetails"],_)}const p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(w=>w)),f(e,["toolUsePromptTokensDetails"],_)}const g=a(t,["trafficType"]);return g!=null&&f(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lx(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&f(e,["data"],n);const i=a(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function ax(t){const e={},n=a(t,["content"]);n!=null&&f(e,["content"],n);const i=a(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],ux(i));const s=a(t,["tokenCount"]);s!=null&&f(e,["tokenCount"],s);const o=a(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const r=a(t,["urlContextMetadata"]);r!=null&&f(e,["urlContextMetadata"],r);const l=a(t,["avgLogprobs"]);l!=null&&f(e,["avgLogprobs"],l);const c=a(t,["groundingMetadata"]);c!=null&&f(e,["groundingMetadata"],c);const d=a(t,["index"]);d!=null&&f(e,["index"],d);const h=a(t,["logprobsResult"]);h!=null&&f(e,["logprobsResult"],h);const p=a(t,["safetyRatings"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(_=>_)),f(e,["safetyRatings"],g)}return e}function ux(t){const e={},n=a(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["citations"],i)}return e}function cx(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["contents"]);if(s!=null){let o=tn(s);Array.isArray(o)&&(o=o.map(r=>r)),f(n,["contents"],o)}return n}function fx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["tokensInfo"],s)}return e}function dx(t){const e={},n=a(t,["values"]);n!=null&&f(e,["values"],n);const i=a(t,["statistics"]);return i!=null&&f(e,["statistics"],hx(i)),e}function hx(t){const e={},n=a(t,["truncated"]);n!=null&&f(e,["truncated"],n);const i=a(t,["token_count"]);return i!=null&&f(e,["tokenCount"],i),e}function wu(t){const e={},n=a(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>_M(o))),f(e,["parts"],s)}const i=a(t,["role"]);return i!=null&&f(e,["role"],i),e}function mx(t){const e={},n=a(t,["controlType"]);n!=null&&f(e,["controlType"],n);const i=a(t,["enableControlImageComputation"]);return i!=null&&f(e,["computeControl"],i),e}function px(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function gx(t,e){const n={},i=a(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],vt(i));const s=a(t,["tools"]);if(e!==void 0&&s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>VE(l))),f(e,["tools"],r)}const o=a(t,["generationConfig"]);return e!==void 0&&o!=null&&f(e,["generationConfig"],oM(o)),n}function yx(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["contents"]);if(s!=null){let r=tn(s);Array.isArray(r)&&(r=r.map(l=>wu(l))),f(n,["contents"],r)}const o=a(e,["config"]);return o!=null&&px(o),n}function _x(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["contents"]);if(s!=null){let r=tn(s);Array.isArray(r)&&(r=r.map(l=>l)),f(n,["contents"],r)}const o=a(e,["config"]);return o!=null&&gx(o,n),n}function vx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["totalTokens"]);i!=null&&f(e,["totalTokens"],i);const s=a(t,["cachedContentTokenCount"]);return s!=null&&f(e,["cachedContentTokenCount"],s),e}function Tx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["totalTokens"]);return i!=null&&f(e,["totalTokens"],i),e}function Ex(t,e){const n={},i=a(e,["model"]);return i!=null&&f(n,["_url","name"],fe(t,i)),n}function Ax(t,e){const n={},i=a(e,["model"]);return i!=null&&f(n,["_url","name"],fe(t,i)),n}function Sx(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Cx(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Rx(t,e){const n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const s=a(t,["negativePrompt"]);e!==void 0&&s!=null&&f(e,["parameters","negativePrompt"],s);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const r=a(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l);const c=a(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&f(e,["parameters","safetySetting"],d);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const g=a(t,["includeRaiReason"]);e!==void 0&&g!=null&&f(e,["parameters","includeRaiReason"],g);const _=a(t,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const w=a(t,["outputMimeType"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","mimeType"],w);const D=a(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&f(e,["parameters","outputOptions","compressionQuality"],D);const U=a(t,["addWatermark"]);e!==void 0&&U!=null&&f(e,["parameters","addWatermark"],U);const C=a(t,["labels"]);e!==void 0&&C!=null&&f(e,["labels"],C);const T=a(t,["editMode"]);e!==void 0&&T!=null&&f(e,["parameters","editMode"],T);const R=a(t,["baseSteps"]);return e!==void 0&&R!=null&&f(e,["parameters","editConfig","baseSteps"],R),n}function Ix(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["prompt"]);s!=null&&f(n,["instances[0]","prompt"],s);const o=a(e,["referenceImages"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>CM(c))),f(n,["instances[0]","referenceImages"],l)}const r=a(e,["config"]);return r!=null&&Rx(r,n),n}function wx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>xu(o))),f(e,["generatedImages"],s)}return e}function xx(t,e){const n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const s=a(t,["title"]);e!==void 0&&s!=null&&f(e,["requests[]","title"],s);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Mx(t,e){const n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);const s=a(t,["title"]);e!==void 0&&s!=null&&f(e,["instances[]","title"],s);const o=a(t,["outputDimensionality"]);e!==void 0&&o!=null&&f(e,["parameters","outputDimensionality"],o);const r=a(t,["mimeType"]);e!==void 0&&r!=null&&f(e,["instances[]","mimeType"],r);const l=a(t,["autoTruncate"]);return e!==void 0&&l!=null&&f(e,["parameters","autoTruncate"],l),n}function Nx(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["contents"]);if(s!=null){let l=Lh(t,s);Array.isArray(l)&&(l=l.map(c=>c)),f(n,["requests[]","content"],l)}const o=a(e,["config"]);o!=null&&xx(o,n);const r=a(e,["model"]);return r!==void 0&&f(n,["requests[]","model"],fe(t,r)),n}function Dx(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["contents"]);if(s!=null){let r=Lh(t,s);Array.isArray(r)&&(r=r.map(l=>l)),f(n,["instances[]","content"],r)}const o=a(e,["config"]);return o!=null&&Mx(o,n),n}function bx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),f(e,["embeddings"],o)}const s=a(t,["metadata"]);return s!=null&&f(e,["metadata"],s),e}function Vx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>dx(r))),f(e,["embeddings"],o)}const s=a(t,["metadata"]);return s!=null&&f(e,["metadata"],s),e}function Px(t){const e={},n=a(t,["endpoint"]);n!=null&&f(e,["name"],n);const i=a(t,["deployedModelId"]);return i!=null&&f(e,["deployedModelId"],i),e}function Ux(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Lx(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&f(e,["description"],n);const i=a(t,["name"]);i!=null&&f(e,["name"],i);const s=a(t,["parameters"]);s!=null&&f(e,["parameters"],s);const o=a(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const r=a(t,["response"]);r!=null&&f(e,["response"],r);const l=a(t,["responseJsonSchema"]);return l!=null&&f(e,["responseJsonSchema"],l),e}function kx(t,e,n){const i={},s=a(e,["systemInstruction"]);n!==void 0&&s!=null&&f(n,["systemInstruction"],wu(vt(s)));const o=a(e,["temperature"]);o!=null&&f(i,["temperature"],o);const r=a(e,["topP"]);r!=null&&f(i,["topP"],r);const l=a(e,["topK"]);l!=null&&f(i,["topK"],l);const c=a(e,["candidateCount"]);c!=null&&f(i,["candidateCount"],c);const d=a(e,["maxOutputTokens"]);d!=null&&f(i,["maxOutputTokens"],d);const h=a(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);const g=a(e,["logprobs"]);g!=null&&f(i,["logprobs"],g);const _=a(e,["presencePenalty"]);_!=null&&f(i,["presencePenalty"],_);const w=a(e,["frequencyPenalty"]);w!=null&&f(i,["frequencyPenalty"],w);const D=a(e,["seed"]);D!=null&&f(i,["seed"],D);const U=a(e,["responseMimeType"]);U!=null&&f(i,["responseMimeType"],U);const C=a(e,["responseSchema"]);C!=null&&f(i,["responseSchema"],kh(C));const T=a(e,["responseJsonSchema"]);if(T!=null&&f(i,["responseJsonSchema"],T),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=a(e,["safetySettings"]);if(n!==void 0&&R!=null){let V=R;Array.isArray(V)&&(V=V.map(x=>RM(x))),f(n,["safetySettings"],V)}const b=a(e,["tools"]);if(n!==void 0&&b!=null){let V=Co(b);Array.isArray(V)&&(V=V.map(x=>DM(So(x)))),f(n,["tools"],V)}const k=a(e,["toolConfig"]);if(n!==void 0&&k!=null&&f(n,["toolConfig"],k),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=a(e,["cachedContent"]);n!==void 0&&B!=null&&f(n,["cachedContent"],zn(t,B));const S=a(e,["responseModalities"]);S!=null&&f(i,["responseModalities"],S);const E=a(e,["mediaResolution"]);E!=null&&f(i,["mediaResolution"],E);const A=a(e,["speechConfig"]);if(A!=null&&f(i,["speechConfig"],qh(A)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=a(e,["thinkingConfig"]);I!=null&&f(i,["thinkingConfig"],I);const N=a(e,["imageConfig"]);return N!=null&&f(i,["imageConfig"],N),i}function qx(t,e,n){const i={},s=a(e,["systemInstruction"]);n!==void 0&&s!=null&&f(n,["systemInstruction"],vt(s));const o=a(e,["temperature"]);o!=null&&f(i,["temperature"],o);const r=a(e,["topP"]);r!=null&&f(i,["topP"],r);const l=a(e,["topK"]);l!=null&&f(i,["topK"],l);const c=a(e,["candidateCount"]);c!=null&&f(i,["candidateCount"],c);const d=a(e,["maxOutputTokens"]);d!=null&&f(i,["maxOutputTokens"],d);const h=a(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);const g=a(e,["logprobs"]);g!=null&&f(i,["logprobs"],g);const _=a(e,["presencePenalty"]);_!=null&&f(i,["presencePenalty"],_);const w=a(e,["frequencyPenalty"]);w!=null&&f(i,["frequencyPenalty"],w);const D=a(e,["seed"]);D!=null&&f(i,["seed"],D);const U=a(e,["responseMimeType"]);U!=null&&f(i,["responseMimeType"],U);const C=a(e,["responseSchema"]);C!=null&&f(i,["responseSchema"],kh(C));const T=a(e,["responseJsonSchema"]);T!=null&&f(i,["responseJsonSchema"],T);const R=a(e,["routingConfig"]);R!=null&&f(i,["routingConfig"],R);const b=a(e,["modelSelectionConfig"]);b!=null&&f(i,["modelConfig"],b);const k=a(e,["safetySettings"]);if(n!==void 0&&k!=null){let H=k;Array.isArray(H)&&(H=H.map(Q=>Q)),f(n,["safetySettings"],H)}const B=a(e,["tools"]);if(n!==void 0&&B!=null){let H=Co(B);Array.isArray(H)&&(H=H.map(Q=>VE(So(Q)))),f(n,["tools"],H)}const S=a(e,["toolConfig"]);n!==void 0&&S!=null&&f(n,["toolConfig"],S);const E=a(e,["labels"]);n!==void 0&&E!=null&&f(n,["labels"],E);const A=a(e,["cachedContent"]);n!==void 0&&A!=null&&f(n,["cachedContent"],zn(t,A));const I=a(e,["responseModalities"]);I!=null&&f(i,["responseModalities"],I);const N=a(e,["mediaResolution"]);N!=null&&f(i,["mediaResolution"],N);const V=a(e,["speechConfig"]);V!=null&&f(i,["speechConfig"],bE(qh(V)));const x=a(e,["audioTimestamp"]);x!=null&&f(i,["audioTimestamp"],x);const ft=a(e,["thinkingConfig"]);ft!=null&&f(i,["thinkingConfig"],ft);const Rt=a(e,["imageConfig"]);return Rt!=null&&f(i,["imageConfig"],Rt),i}function jy(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["contents"]);if(s!=null){let r=tn(s);Array.isArray(r)&&(r=r.map(l=>wu(l))),f(n,["contents"],r)}const o=a(e,["config"]);return o!=null&&f(n,["generationConfig"],kx(t,o,n)),n}function e_(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["contents"]);if(s!=null){let r=tn(s);Array.isArray(r)&&(r=r.map(l=>l)),f(n,["contents"],r)}const o=a(e,["config"]);return o!=null&&f(n,["generationConfig"],qx(t,o,n)),n}function t_(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>ax(d))),f(e,["candidates"],c)}const s=a(t,["modelVersion"]);s!=null&&f(e,["modelVersion"],s);const o=a(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const r=a(t,["responseId"]);r!=null&&f(e,["responseId"],r);const l=a(t,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function n_(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>h)),f(e,["candidates"],d)}const s=a(t,["createTime"]);s!=null&&f(e,["createTime"],s);const o=a(t,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const r=a(t,["promptFeedback"]);r!=null&&f(e,["promptFeedback"],r);const l=a(t,["responseId"]);l!=null&&f(e,["responseId"],l);const c=a(t,["usageMetadata"]);return c!=null&&f(e,["usageMetadata"],c),e}function Bx(t,e){const n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const o=a(t,["guidanceScale"]);if(e!==void 0&&o!=null&&f(e,["parameters","guidanceScale"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=a(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&f(e,["parameters","safetySetting"],r);const l=a(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const c=a(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&f(e,["parameters","includeSafetyAttributes"],c);const d=a(t,["includeRaiReason"]);e!==void 0&&d!=null&&f(e,["parameters","includeRaiReason"],d);const h=a(t,["language"]);e!==void 0&&h!=null&&f(e,["parameters","language"],h);const p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const g=a(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&f(e,["parameters","outputOptions","compressionQuality"],g),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=a(t,["imageSize"]);if(e!==void 0&&_!=null&&f(e,["parameters","sampleImageSize"],_),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Ox(t,e){const n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const s=a(t,["negativePrompt"]);e!==void 0&&s!=null&&f(e,["parameters","negativePrompt"],s);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const r=a(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l);const c=a(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&f(e,["parameters","safetySetting"],d);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const g=a(t,["includeRaiReason"]);e!==void 0&&g!=null&&f(e,["parameters","includeRaiReason"],g);const _=a(t,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const w=a(t,["outputMimeType"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","mimeType"],w);const D=a(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&f(e,["parameters","outputOptions","compressionQuality"],D);const U=a(t,["addWatermark"]);e!==void 0&&U!=null&&f(e,["parameters","addWatermark"],U);const C=a(t,["labels"]);e!==void 0&&C!=null&&f(e,["labels"],C);const T=a(t,["imageSize"]);e!==void 0&&T!=null&&f(e,["parameters","sampleImageSize"],T);const R=a(t,["enhancePrompt"]);return e!==void 0&&R!=null&&f(e,["parameters","enhancePrompt"],R),n}function Gx(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["prompt"]);s!=null&&f(n,["instances[0]","prompt"],s);const o=a(e,["config"]);return o!=null&&Bx(o,n),n}function zx(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["prompt"]);s!=null&&f(n,["instances[0]","prompt"],s);const o=a(e,["config"]);return o!=null&&Ox(o,n),n}function Hx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>tM(r))),f(e,["generatedImages"],o)}const s=a(t,["positivePromptSafetyAttributes"]);return s!=null&&f(e,["positivePromptSafetyAttributes"],NE(s)),e}function Fx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>xu(r))),f(e,["generatedImages"],o)}const s=a(t,["positivePromptSafetyAttributes"]);return s!=null&&f(e,["positivePromptSafetyAttributes"],DE(s)),e}function Yx(t,e){const n={},i=a(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=a(t,["durationSeconds"]);if(e!==void 0&&s!=null&&f(e,["parameters","durationSeconds"],s),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const r=a(t,["resolution"]);e!==void 0&&r!=null&&f(e,["parameters","resolution"],r);const l=a(t,["personGeneration"]);if(e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=a(t,["negativePrompt"]);e!==void 0&&c!=null&&f(e,["parameters","negativePrompt"],c);const d=a(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&f(e,["parameters","enhancePrompt"],d),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=a(t,["lastFrame"]);e!==void 0&&h!=null&&f(e,["instances[0]","lastFrame"],Mu(h));const p=a(t,["referenceImages"]);if(e!==void 0&&p!=null){let g=p;Array.isArray(g)&&(g=g.map(_=>FM(_))),f(e,["instances[0]","referenceImages"],g)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Jx(t,e){const n={},i=a(t,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const s=a(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const o=a(t,["fps"]);e!==void 0&&o!=null&&f(e,["parameters","fps"],o);const r=a(t,["durationSeconds"]);e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r);const l=a(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const c=a(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const d=a(t,["resolution"]);e!==void 0&&d!=null&&f(e,["parameters","resolution"],d);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=a(t,["pubsubTopic"]);e!==void 0&&p!=null&&f(e,["parameters","pubsubTopic"],p);const g=a(t,["negativePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","negativePrompt"],g);const _=a(t,["enhancePrompt"]);e!==void 0&&_!=null&&f(e,["parameters","enhancePrompt"],_);const w=a(t,["generateAudio"]);e!==void 0&&w!=null&&f(e,["parameters","generateAudio"],w);const D=a(t,["lastFrame"]);e!==void 0&&D!=null&&f(e,["instances[0]","lastFrame"],un(D));const U=a(t,["referenceImages"]);if(e!==void 0&&U!=null){let R=U;Array.isArray(R)&&(R=R.map(b=>YM(b))),f(e,["instances[0]","referenceImages"],R)}const C=a(t,["mask"]);e!==void 0&&C!=null&&f(e,["instances[0]","mask"],HM(C));const T=a(t,["compressionQuality"]);return e!==void 0&&T!=null&&f(e,["parameters","compressionQuality"],T),n}function Kx(t){const e={},n=a(t,["name"]);n!=null&&f(e,["name"],n);const i=a(t,["metadata"]);i!=null&&f(e,["metadata"],i);const s=a(t,["done"]);s!=null&&f(e,["done"],s);const o=a(t,["error"]);o!=null&&f(e,["error"],o);const r=a(t,["response","generateVideoResponse"]);return r!=null&&f(e,["response"],Zx(r)),e}function Qx(t){const e={},n=a(t,["name"]);n!=null&&f(e,["name"],n);const i=a(t,["metadata"]);i!=null&&f(e,["metadata"],i);const s=a(t,["done"]);s!=null&&f(e,["done"],s);const o=a(t,["error"]);o!=null&&f(e,["error"],o);const r=a(t,["response"]);return r!=null&&f(e,["response"],Wx(r)),e}function $x(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["prompt"]);s!=null&&f(n,["instances[0]","prompt"],s);const o=a(e,["image"]);o!=null&&f(n,["instances[0]","image"],Mu(o));const r=a(e,["video"]);r!=null&&f(n,["instances[0]","video"],PE(r));const l=a(e,["source"]);l!=null&&jx(l,n);const c=a(e,["config"]);return c!=null&&Yx(c,n),n}function Xx(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["prompt"]);s!=null&&f(n,["instances[0]","prompt"],s);const o=a(e,["image"]);o!=null&&f(n,["instances[0]","image"],un(o));const r=a(e,["video"]);r!=null&&f(n,["instances[0]","video"],UE(r));const l=a(e,["source"]);l!=null&&eM(l,n);const c=a(e,["config"]);return c!=null&&Jx(c,n),n}function Zx(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>iM(r))),f(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const s=a(t,["raiMediaFilteredReasons"]);return s!=null&&f(e,["raiMediaFilteredReasons"],s),e}function Wx(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>sM(r))),f(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const s=a(t,["raiMediaFilteredReasons"]);return s!=null&&f(e,["raiMediaFilteredReasons"],s),e}function jx(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const s=a(t,["image"]);e!==void 0&&s!=null&&f(e,["instances[0]","image"],Mu(s));const o=a(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],PE(o)),n}function eM(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const s=a(t,["image"]);e!==void 0&&s!=null&&f(e,["instances[0]","image"],un(s));const o=a(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],UE(o)),n}function tM(t){const e={},n=a(t,["_self"]);n!=null&&f(e,["image"],cM(n));const i=a(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const s=a(t,["_self"]);return s!=null&&f(e,["safetyAttributes"],NE(s)),e}function xu(t){const e={},n=a(t,["_self"]);n!=null&&f(e,["image"],ME(n));const i=a(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const s=a(t,["_self"]);s!=null&&f(e,["safetyAttributes"],DE(s));const o=a(t,["prompt"]);return o!=null&&f(e,["enhancedPrompt"],o),e}function nM(t){const e={},n=a(t,["_self"]);n!=null&&f(e,["mask"],ME(n));const i=a(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["labels"],s)}return e}function iM(t){const e={},n=a(t,["video"]);return n!=null&&f(e,["video"],GM(n)),e}function sM(t){const e={},n=a(t,["_self"]);return n!=null&&f(e,["video"],zM(n)),e}function oM(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=a(t,["audioTimestamp"]);i!=null&&f(e,["audioTimestamp"],i);const s=a(t,["candidateCount"]);s!=null&&f(e,["candidateCount"],s);const o=a(t,["enableAffectiveDialog"]);o!=null&&f(e,["enableAffectiveDialog"],o);const r=a(t,["frequencyPenalty"]);r!=null&&f(e,["frequencyPenalty"],r);const l=a(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);const c=a(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const d=a(t,["mediaResolution"]);d!=null&&f(e,["mediaResolution"],d);const h=a(t,["presencePenalty"]);h!=null&&f(e,["presencePenalty"],h);const p=a(t,["responseJsonSchema"]);p!=null&&f(e,["responseJsonSchema"],p);const g=a(t,["responseLogprobs"]);g!=null&&f(e,["responseLogprobs"],g);const _=a(t,["responseMimeType"]);_!=null&&f(e,["responseMimeType"],_);const w=a(t,["responseModalities"]);w!=null&&f(e,["responseModalities"],w);const D=a(t,["responseSchema"]);D!=null&&f(e,["responseSchema"],D);const U=a(t,["routingConfig"]);U!=null&&f(e,["routingConfig"],U);const C=a(t,["seed"]);C!=null&&f(e,["seed"],C);const T=a(t,["speechConfig"]);T!=null&&f(e,["speechConfig"],bE(T));const R=a(t,["stopSequences"]);R!=null&&f(e,["stopSequences"],R);const b=a(t,["temperature"]);b!=null&&f(e,["temperature"],b);const k=a(t,["thinkingConfig"]);k!=null&&f(e,["thinkingConfig"],k);const B=a(t,["topK"]);B!=null&&f(e,["topK"],B);const S=a(t,["topP"]);return S!=null&&f(e,["topP"],S),e}function rM(t,e){const n={},i=a(e,["model"]);return i!=null&&f(n,["_url","name"],fe(t,i)),n}function lM(t,e){const n={},i=a(e,["model"]);return i!=null&&f(n,["_url","name"],fe(t,i)),n}function aM(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function uM(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function cM(t){const e={},n=a(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],Mi(n));const i=a(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function ME(t){const e={},n=a(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=a(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],Mi(i));const s=a(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Mu(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],Mi(n));const i=a(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function un(t){const e={},n=a(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=a(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Mi(i));const s=a(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function fM(t,e,n){const i={},s=a(e,["pageSize"]);n!==void 0&&s!=null&&f(n,["_query","pageSize"],s);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const r=a(e,["filter"]);n!==void 0&&r!=null&&f(n,["_query","filter"],r);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&f(n,["_url","models_url"],EE(t,l)),i}function dM(t,e,n){const i={},s=a(e,["pageSize"]);n!==void 0&&s!=null&&f(n,["_query","pageSize"],s);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const r=a(e,["filter"]);n!==void 0&&r!=null&&f(n,["_query","filter"],r);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&f(n,["_url","models_url"],EE(t,l)),i}function hM(t,e){const n={},i=a(e,["config"]);return i!=null&&fM(t,i,n),n}function mM(t,e){const n={},i=a(e,["config"]);return i!=null&&dM(t,i,n),n}function pM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=a(t,["_self"]);if(s!=null){let o=AE(s);Array.isArray(o)&&(o=o.map(r=>rd(r))),f(e,["models"],o)}return e}function gM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=a(t,["_self"]);if(s!=null){let o=AE(s);Array.isArray(o)&&(o=o.map(r=>ld(r))),f(e,["models"],o)}return e}function yM(t){const e={},n=a(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const i=a(t,["segmentationClasses"]);i!=null&&f(e,["maskClasses"],i);const s=a(t,["maskDilation"]);return s!=null&&f(e,["dilation"],s),e}function rd(t){const e={},n=a(t,["name"]);n!=null&&f(e,["name"],n);const i=a(t,["displayName"]);i!=null&&f(e,["displayName"],i);const s=a(t,["description"]);s!=null&&f(e,["description"],s);const o=a(t,["version"]);o!=null&&f(e,["version"],o);const r=a(t,["_self"]);r!=null&&f(e,["tunedModelInfo"],bM(r));const l=a(t,["inputTokenLimit"]);l!=null&&f(e,["inputTokenLimit"],l);const c=a(t,["outputTokenLimit"]);c!=null&&f(e,["outputTokenLimit"],c);const d=a(t,["supportedGenerationMethods"]);return d!=null&&f(e,["supportedActions"],d),e}function ld(t){const e={},n=a(t,["name"]);n!=null&&f(e,["name"],n);const i=a(t,["displayName"]);i!=null&&f(e,["displayName"],i);const s=a(t,["description"]);s!=null&&f(e,["description"],s);const o=a(t,["versionId"]);o!=null&&f(e,["version"],o);const r=a(t,["deployedModels"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(g=>Px(g))),f(e,["endpoints"],p)}const l=a(t,["labels"]);l!=null&&f(e,["labels"],l);const c=a(t,["_self"]);c!=null&&f(e,["tunedModelInfo"],VM(c));const d=a(t,["defaultCheckpointId"]);d!=null&&f(e,["defaultCheckpointId"],d);const h=a(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>g)),f(e,["checkpoints"],p)}return e}function _M(t){const e={},n=a(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const i=a(t,["thought"]);i!=null&&f(e,["thought"],i);const s=a(t,["inlineData"]);s!=null&&f(e,["inlineData"],lx(s));const o=a(t,["fileData"]);o!=null&&f(e,["fileData"],Ux(o));const r=a(t,["thoughtSignature"]);r!=null&&f(e,["thoughtSignature"],r);const l=a(t,["functionCall"]);l!=null&&f(e,["functionCall"],l);const c=a(t,["codeExecutionResult"]);c!=null&&f(e,["codeExecutionResult"],c);const d=a(t,["executableCode"]);d!=null&&f(e,["executableCode"],d);const h=a(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&f(e,["text"],p),e}function vM(t){const e={},n=a(t,["productImage"]);return n!=null&&f(e,["image"],un(n)),e}function TM(t,e){const n={},i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const s=a(t,["baseSteps"]);e!==void 0&&s!=null&&f(e,["parameters","editConfig","baseSteps"],s);const o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const r=a(t,["seed"]);e!==void 0&&r!=null&&f(e,["parameters","seed"],r);const l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&f(e,["parameters","safetySetting"],l);const c=a(t,["personGeneration"]);e!==void 0&&c!=null&&f(e,["parameters","personGeneration"],c);const d=a(t,["addWatermark"]);e!==void 0&&d!=null&&f(e,["parameters","addWatermark"],d);const h=a(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const p=a(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","compressionQuality"],p);const g=a(t,["enhancePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","enhancePrompt"],g);const _=a(t,["labels"]);return e!==void 0&&_!=null&&f(e,["labels"],_),n}function EM(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["source"]);s!=null&&SM(s,n);const o=a(e,["config"]);return o!=null&&TM(o,n),n}function AM(t){const e={},n=a(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>xu(s))),f(e,["generatedImages"],i)}return e}function SM(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const s=a(t,["personImage"]);e!==void 0&&s!=null&&f(e,["instances[0]","personImage","image"],un(s));const o=a(t,["productImages"]);if(e!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>vM(l))),f(e,["instances[0]","productImages"],r)}return n}function CM(t){const e={},n=a(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],un(n));const i=a(t,["referenceId"]);i!=null&&f(e,["referenceId"],i);const s=a(t,["referenceType"]);s!=null&&f(e,["referenceType"],s);const o=a(t,["maskImageConfig"]);o!=null&&f(e,["maskImageConfig"],yM(o));const r=a(t,["controlImageConfig"]);r!=null&&f(e,["controlImageConfig"],mx(r));const l=a(t,["styleImageConfig"]);l!=null&&f(e,["styleImageConfig"],l);const c=a(t,["subjectImageConfig"]);return c!=null&&f(e,["subjectImageConfig"],c),e}function NE(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=a(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const s=a(t,["contentType"]);return s!=null&&f(e,["contentType"],s),e}function DE(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=a(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const s=a(t,["contentType"]);return s!=null&&f(e,["contentType"],s),e}function RM(t){const e={};if(a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=a(t,["category"]);n!=null&&f(e,["category"],n);const i=a(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function IM(t){const e={},n=a(t,["image"]);return n!=null&&f(e,["image"],un(n)),e}function wM(t,e){const n={},i=a(t,["mode"]);e!==void 0&&i!=null&&f(e,["parameters","mode"],i);const s=a(t,["maxPredictions"]);e!==void 0&&s!=null&&f(e,["parameters","maxPredictions"],s);const o=a(t,["confidenceThreshold"]);e!==void 0&&o!=null&&f(e,["parameters","confidenceThreshold"],o);const r=a(t,["maskDilation"]);e!==void 0&&r!=null&&f(e,["parameters","maskDilation"],r);const l=a(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&f(e,["parameters","binaryColorThreshold"],l);const c=a(t,["labels"]);return e!==void 0&&c!=null&&f(e,["labels"],c),n}function xM(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["source"]);s!=null&&NM(s,n);const o=a(e,["config"]);return o!=null&&wM(o,n),n}function MM(t){const e={},n=a(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>nM(s))),f(e,["generatedMasks"],i)}return e}function NM(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const s=a(t,["image"]);e!==void 0&&s!=null&&f(e,["instances[0]","image"],un(s));const o=a(t,["scribbleImage"]);return e!==void 0&&o!=null&&f(e,["instances[0]","scribble"],IM(o)),n}function bE(t){const e={},n=a(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],n),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=a(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function DM(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),f(e,["functionDeclarations"],d)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],uM(i));const s=a(t,["googleSearchRetrieval"]);if(s!=null&&f(e,["googleSearchRetrieval"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["googleMaps"]);o!=null&&f(e,["googleMaps"],aM(o));const r=a(t,["urlContext"]);r!=null&&f(e,["urlContext"],r);const l=a(t,["computerUse"]);l!=null&&f(e,["computerUse"],l);const c=a(t,["codeExecution"]);return c!=null&&f(e,["codeExecution"],c),e}function VE(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>Lx(g))),f(e,["functionDeclarations"],p)}const i=a(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const s=a(t,["googleSearch"]);s!=null&&f(e,["googleSearch"],s);const o=a(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const r=a(t,["enterpriseWebSearch"]);r!=null&&f(e,["enterpriseWebSearch"],r);const l=a(t,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);const c=a(t,["urlContext"]);c!=null&&f(e,["urlContext"],c);const d=a(t,["computerUse"]);d!=null&&f(e,["computerUse"],d);const h=a(t,["codeExecution"]);return h!=null&&f(e,["codeExecution"],h),e}function bM(t){const e={},n=a(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=a(t,["createTime"]);i!=null&&f(e,["createTime"],i);const s=a(t,["updateTime"]);return s!=null&&f(e,["updateTime"],s),e}function VM(t){const e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const i=a(t,["createTime"]);i!=null&&f(e,["createTime"],i);const s=a(t,["updateTime"]);return s!=null&&f(e,["updateTime"],s),e}function PM(t,e){const n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const s=a(t,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function UM(t,e){const n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const s=a(t,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function LM(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","name"],fe(t,i));const s=a(e,["config"]);return s!=null&&PM(s,n),n}function kM(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["config"]);return s!=null&&UM(s,n),n}function qM(t,e){const n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const s=a(t,["includeRaiReason"]);e!==void 0&&s!=null&&f(e,["parameters","includeRaiReason"],s);const o=a(t,["outputMimeType"]);e!==void 0&&o!=null&&f(e,["parameters","outputOptions","mimeType"],o);const r=a(t,["outputCompressionQuality"]);e!==void 0&&r!=null&&f(e,["parameters","outputOptions","compressionQuality"],r);const l=a(t,["enhanceInputImage"]);e!==void 0&&l!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],l);const c=a(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const d=a(t,["labels"]);e!==void 0&&d!=null&&f(e,["labels"],d);const h=a(t,["numberOfImages"]);e!==void 0&&h!=null&&f(e,["parameters","sampleCount"],h);const p=a(t,["mode"]);return e!==void 0&&p!=null&&f(e,["parameters","mode"],p),n}function BM(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["_url","model"],fe(t,i));const s=a(e,["image"]);s!=null&&f(n,["instances[0]","image"],un(s));const o=a(e,["upscaleFactor"]);o!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],o);const r=a(e,["config"]);return r!=null&&qM(r,n),n}function OM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>xu(o))),f(e,["generatedImages"],s)}return e}function GM(t){const e={},n=a(t,["uri"]);n!=null&&f(e,["uri"],n);const i=a(t,["encodedVideo"]);i!=null&&f(e,["videoBytes"],Mi(i));const s=a(t,["encoding"]);return s!=null&&f(e,["mimeType"],s),e}function zM(t){const e={},n=a(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=a(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],Mi(i));const s=a(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function HM(t){const e={},n=a(t,["image"]);n!=null&&f(e,["_self"],un(n));const i=a(t,["maskMode"]);return i!=null&&f(e,["maskMode"],i),e}function FM(t){const e={},n=a(t,["image"]);n!=null&&f(e,["image"],Mu(n));const i=a(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function YM(t){const e={},n=a(t,["image"]);n!=null&&f(e,["image"],un(n));const i=a(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function PE(t){const e={},n=a(t,["uri"]);n!=null&&f(e,["uri"],n);const i=a(t,["videoBytes"]);i!=null&&f(e,["encodedVideo"],Mi(i));const s=a(t,["mimeType"]);return s!=null&&f(e,["encoding"],s),e}function UE(t){const e={},n=a(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const i=a(t,["videoBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Mi(i));const s=a(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JM="Content-Type",KM="X-Server-Timeout",QM="User-Agent",ad="x-goog-api-client",$M="1.25.0",XM=`google-genai-sdk/${$M}`,ZM="v1beta1",WM="v1beta",i_=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class jM{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:ZM,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:WM,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const s=[this.getRequestUrlInternal(n)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[r,l]of Object.entries(e.queryParams))s.searchParams.append(r,String(l));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(s,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[s,o]of Object.entries(n))typeof o=="object"?i[s]=Object.assign(Object.assign({},i[s]),o):o!==void 0&&(i[s]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(s,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const s=new AbortController,o=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const r=setTimeout(()=>s.abort(),n.timeout);r&&typeof r.unref=="function"&&r.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return n&&n.extraBody!==null&&eN(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await s_(s),new id(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await s_(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return Fs(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let r="";for(;;){const{done:l,value:c}=yield Me(s.read());if(l){if(r.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=o.decode(c,{stream:!0});try{const p=JSON.parse(d);if("error"in p){const g=JSON.parse(JSON.stringify(p.error)),_=g.status,w=g.code,D=`got status: ${_}. ${JSON.stringify(p)}`;if(w>=400&&w<600)throw new Iu({message:D,status:w})}}catch(p){if(p.name==="ApiError")throw p}r+=d;let h=r.match(i_);for(;h;){const p=h[1];try{const g=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Me(new id(g)),r=r.slice(h[0].length),h=r.match(i_)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=XM+" "+this.clientOptions.userAgentExtra;return e[QM]=n,e[ad]=n,e[JM]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))n.append(i,s);e.timeout&&e.timeout>0&&n.append(KM,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const o=this.clientOptions.uploader,r=await o.stat(e);s.sizeBytes=String(r.size);const l=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:r.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=l;const c=await this.fetchUploadUrl(s,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let s={};n!=null&&n.httpOptions?s=n.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},r=await this.request({path:F("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:s});if(!r||!(r!=null&&r.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(i=r==null?void 0:r.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function s_(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw n>=400&&n<600?new Iu({message:s,status:n}):new Error(s)}}function eN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,r){const l=Object.assign({},o);for(const c in r)if(Object.prototype.hasOwnProperty.call(r,c)){const d=r[c],h=l[c];d&&typeof d=="object"&&!Array.isArray(d)&&h&&typeof h=="object"&&!Array.isArray(h)?l[c]=i(h,d):(h&&d&&typeof h!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof h}, New type: ${typeof d}. Overwriting.`),l[c]=d)}return l}const s=i(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tN="mcp_used/unknown";let nN=!1;function LE(t){for(const e of t)if(iN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return nN}function kE(t){var e;const n=(e=t[ad])!==null&&e!==void 0?e:"";t[ad]=(n+` ${tN}`).trimStart()}function iN(t){return t!==null&&typeof t=="object"&&t instanceof Oh}function sN(t,e=100){return Fs(this,arguments,function*(){let i,s=0;for(;s<e;){const o=yield Me(t.listTools({cursor:i}));for(const r of o.tools)yield yield Me(r),s++;if(!o.nextCursor)break;i=o.nextCursor}})}class Oh{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Oh(e,n)}async initialize(){var e,n,i,s;if(this.mcpTools.length>0)return;const o={},r=[];for(const h of this.mcpClients)try{for(var l=!0,c=(n=void 0,Er(sN(h))),d;d=await c.next(),e=d.done,!e;l=!0){s=d.value,l=!1;const p=s;r.push(p);const g=p.name;if(o[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);o[g]=h}}catch(p){n={error:p}}finally{try{!l&&!e&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}this.mcpTools=r,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),uw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const r=await s.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:r.isError?{error:r}:r}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function oN(t,e,n){const i=new tw;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(i,s),e(i)}class rN{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),r=uN(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${s}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${l}`;let d=()=>{};const h=new Promise(R=>{d=R}),p=e.callbacks,g=function(){d({})},_=this.apiClient,w={onopen:g,onmessage:R=>{oN(_,p.onmessage,R)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(R){}},D=this.webSocketFactory.create(c,aN(r),w);D.connect(),await h;const T={setup:{model:fe(this.apiClient,e.model)}};return D.send(JSON.stringify(T)),new lN(D,this.apiClient)}}class lN{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=W1(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Z1(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Us.PLAY)}pause(){this.sendPlaybackControl(Us.PAUSE)}stop(){this.sendPlaybackControl(Us.STOP)}resetContext(){this.sendPlaybackControl(Us.RESET_CONTEXT)}close(){this.conn.close()}}function aN(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function uN(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function fN(t,e,n){const i=new ew;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const o=JSON.parse(s);if(t.isVertexAI()){const r=tx(o);Object.assign(i,r)}else Object.assign(i,o);e(i)}class dN{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new rN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,s,o,r,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&LE(e.config.tools)&&kE(p);const g=gN(p);if(this.apiClient.isVertexAI())h=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g);else{const A=this.apiClient.getApiKey();let I="BidiGenerateContent",N="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),I="BidiGenerateContentConstrained",N="access_token"),h=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${I}?${N}=${A}`}let _=()=>{};const w=new Promise(A=>{_=A}),D=e.callbacks,U=function(){var A;(A=D==null?void 0:D.onopen)===null||A===void 0||A.call(D),_({})},C=this.apiClient,T={onopen:U,onmessage:A=>{fN(C,D.onmessage,A)},onerror:(n=D==null?void 0:D.onerror)!==null&&n!==void 0?n:function(A){},onclose:(i=D==null?void 0:D.onclose)!==null&&i!==void 0?i:function(A){}},R=this.webSocketFactory.create(h,pN(g),T);R.connect(),await w;let b=fe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&b.startsWith("publishers/")){const A=this.apiClient.getProject(),I=this.apiClient.getLocation();b=`projects/${A}/locations/${I}/`+b}let k={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Qa.AUDIO]}:e.config.responseModalities=[Qa.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const B=(l=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&l!==void 0?l:[],S=[];for(const A of B)if(this.isCallableTool(A)){const I=A;S.push(await I.tool())}else S.push(A);S.length>0&&(e.config.tools=S);const E={model:b,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?k=X1(this.apiClient,E):k=$1(this.apiClient,E),delete k.config,R.send(JSON.stringify(k)),new mN(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const hN={turnComplete:!0};class mN{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=tn(n.turns),e.isVertexAI()||(i=i.map(s=>wu(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(cN)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},hN),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:ex(e)}:n={realtimeInput:j1(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function pN(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function gN(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o_=10;function r_(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const r of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ys(r)){s=!0;break}if(!s)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Ys(t){return"callTool"in t&&typeof t.callTool=="function"}function yN(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Ys(s)))!==null&&i!==void 0?i:!1}function _N(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>!Ys(s)))!==null&&i!==void 0?i:!1}function l_(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vN extends cs{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,s,o,r,l;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!yN(n)||r_(n.config))return await this.generateContentInternal(c);if(_N(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,h;const p=tn(c.contents),g=(o=(s=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:o_;let _=0;for(;_<g&&(d=await this.generateContentInternal(c),!(!d.functionCalls||d.functionCalls.length===0));){const w=d.candidates[0].content,D=[];for(const U of(l=(r=n.config)===null||r===void 0?void 0:r.tools)!==null&&l!==void 0?l:[])if(Ys(U)){const T=await U.callTool(d.functionCalls);D.push(...T)}_++,h={role:"user",parts:D},c.contents=tn(c.contents),c.contents.push(w),c.contents.push(h),l_(c.config)&&(p.push(w),p.push(h))}return l_(c.config)&&(d.automaticFunctionCallingHistory=p),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),r_(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var s;let o;const r=[];if(i!=null&&i.generatedImages)for(const c of i.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((s=c==null?void 0:c.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?o=c==null?void 0:c.safetyAttributes:r.push(c);let l;return o?l={generatedImages:r,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:l={generatedImages:r,sdkHttpResponse:i.sdkHttpResponse},l}),this.list=async n=>{var i;const r={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!r.config.queryBase){if(!((i=r.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");r.config.filter="labels.tune-type:*"}return new sl(ts.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(r),r)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var i,s,o,r,l,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((r=(o=n.source)===null||o===void 0?void 0:o.video)===null||r===void 0)&&r.uri&&(!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,s;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const r=await Promise.all(o.map(async c=>Ys(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:r})};if(l.config.tools=r,e.config&&e.config.tools&&LE(e.config.tools)){const c=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),kE(d),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(e){var n,i,s;const o=new Map;for(const r of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ys(r)){const l=r,c=await l.tool();for(const d of(s=c.functionDeclarations)!==null&&s!==void 0?s:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,l)}}return o}async processAfcStream(e){var n,i,s;const o=(s=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:o_;let r=!1,l=0;const c=await this.initAfcToolsMap(e);return function(d,h,p){var g,_;return Fs(this,arguments,function*(){for(var w,D,U,C;l<o;){r&&(l++,r=!1);const k=yield Me(d.processParamsMaybeAddMcpUsage(p)),B=yield Me(d.generateContentStreamInternal(k)),S=[],E=[];try{for(var T=!0,R=(D=void 0,Er(B)),b;b=yield Me(R.next()),w=b.done,!w;T=!0){C=b.value,T=!1;const A=C;if(yield yield Me(A),A.candidates&&(!((g=A.candidates[0])===null||g===void 0)&&g.content)){E.push(A.candidates[0].content);for(const I of(_=A.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(l<o&&I.functionCall){if(!I.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(I.functionCall.name)){const N=yield Me(h.get(I.functionCall.name).callTool([I.functionCall]));S.push(...N)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${I.functionCall.name}`)}}}}catch(A){D={error:A}}finally{try{!T&&!w&&(U=R.return)&&(yield Me(U.call(R)))}finally{if(D)throw D.error}}if(S.length>0){r=!0;const A=new Zo;A.candidates=[{content:{role:"user",parts:S}}],yield yield Me(A);const I=[];I.push(...E),I.push({role:"user",parts:S});const N=tn(p.contents).concat(I);p.contents=N}else break}})}(this,c,e)}async generateContentInternal(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=e_(this.apiClient,e);return l=F("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=n_(h),g=new Zo;return Object.assign(g,p),g})}else{const d=jy(this.apiClient,e);return l=F("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=t_(h),g=new Zo;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=e_(this.apiClient,e);return l=F("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),r.then(function(p){return Fs(this,arguments,function*(){var g,_,w,D;try{for(var U=!0,C=Er(p),T;T=yield Me(C.next()),g=T.done,!g;U=!0){D=T.value,U=!1;const R=D,b=n_(yield Me(R.json()));b.sdkHttpResponse={headers:R.headers};const k=new Zo;Object.assign(k,b),yield yield Me(k)}}catch(R){_={error:R}}finally{try{!U&&!g&&(w=C.return)&&(yield Me(w.call(C)))}finally{if(_)throw _.error}}})})}else{const d=jy(this.apiClient,e);return l=F("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),r.then(function(p){return Fs(this,arguments,function*(){var g,_,w,D;try{for(var U=!0,C=Er(p),T;T=yield Me(C.next()),g=T.done,!g;U=!0){D=T.value,U=!1;const R=D,b=t_(yield Me(R.json()));b.sdkHttpResponse={headers:R.headers};const k=new Zo;Object.assign(k,b),yield yield Me(k)}}catch(R){_={error:R}}finally{try{!U&&!g&&(w=C.return)&&(yield Me(w.call(C)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Dx(this.apiClient,e);return l=F("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=Vx(h),g=new ky;return Object.assign(g,p),g})}else{const d=Nx(this.apiClient,e);return l=F("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=bx(h),g=new ky;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=zx(this.apiClient,e);return l=F("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=Fx(h),g=new qy;return Object.assign(g,p),g})}else{const d=Gx(this.apiClient,e);return l=F("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=Hx(h),g=new qy;return Object.assign(g,p),g})}}async editImageInternal(e){var n,i;let s,o="",r={};if(this.apiClient.isVertexAI()){const l=Ix(this.apiClient,e);return o=F("{model}:predict",l._url),r=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>{const d=wx(c),h=new JI;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let s,o="",r={};if(this.apiClient.isVertexAI()){const l=BM(this.apiClient,e);return o=F("{model}:predict",l._url),r=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>{const d=OM(c),h=new KI;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let s,o="",r={};if(this.apiClient.isVertexAI()){const l=EM(this.apiClient,e);return o=F("{model}:predict",l._url),r=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),s.then(c=>{const d=AM(c),h=new QI;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let s,o="",r={};if(this.apiClient.isVertexAI()){const l=xM(this.apiClient,e);return o=F("{model}:predict",l._url),r=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),s.then(c=>{const d=MM(c),h=new $I;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=lM(this.apiClient,e);return l=F("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>ld(h))}else{const d=rM(this.apiClient,e);return l=F("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>rd(h))}}async listInternal(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=mM(this.apiClient,e);return l=F("{models_url}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=gM(h),g=new By;return Object.assign(g,p),g})}else{const d=hM(this.apiClient,e);return l=F("{models_url}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=pM(h),g=new By;return Object.assign(g,p),g})}}async update(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=kM(this.apiClient,e);return l=F("{model}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>ld(h))}else{const d=LM(this.apiClient,e);return l=F("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>rd(h))}}async delete(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Ax(this.apiClient,e);return l=F("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=Cx(h),g=new Oy;return Object.assign(g,p),g})}else{const d=Ex(this.apiClient,e);return l=F("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=Sx(h),g=new Oy;return Object.assign(g,p),g})}}async countTokens(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=_x(this.apiClient,e);return l=F("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=Tx(h),g=new Gy;return Object.assign(g,p),g})}else{const d=yx(this.apiClient,e);return l=F("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=vx(h),g=new Gy;return Object.assign(g,p),g})}}async computeTokens(e){var n,i;let s,o="",r={};if(this.apiClient.isVertexAI()){const l=cx(this.apiClient,e);return o=F("{model}:computeTokens",l._url),r=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>{const d=fx(c),h=new XI;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Xx(this.apiClient,e);return l=F("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const p=Qx(h),g=new $a;return Object.assign(g,p),g})}else{const d=$x(this.apiClient,e);return l=F("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const p=Kx(h),g=new $a;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TN extends cs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:r,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:r,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=HI(e);return l=F("{operationName}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r}else{const d=zI(e);return l=F("{operationName}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r}}async fetchPredictVideosOperationInternal(e){var n,i;let s,o="",r={};if(this.apiClient.isVertexAI()){const l=UI(e);return o=F("{resourceName}:fetchPredictOperation",l._url),r=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EN(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&f(e,["data"],n);const i=a(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function AN(t){const e={},n=a(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>NN(o))),f(e,["parts"],s)}const i=a(t,["role"]);return i!=null&&f(e,["role"],i),e}function SN(t,e,n){const i={},s=a(e,["expireTime"]);n!==void 0&&s!=null&&f(n,["expireTime"],s);const o=a(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&f(n,["newSessionExpireTime"],o);const r=a(e,["uses"]);n!==void 0&&r!=null&&f(n,["uses"],r);const l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&f(n,["bidiGenerateContentSetup"],MN(t,l));const c=a(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&f(n,["fieldMask"],c),i}function CN(t,e){const n={},i=a(e,["config"]);return i!=null&&f(n,["config"],SN(t,i,n)),n}function RN(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function IN(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function wN(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function xN(t,e){const n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const s=a(t,["responseModalities"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","responseModalities"],s);const o=a(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const r=a(t,["topP"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","topP"],r);const l=a(t,["topK"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","topK"],l);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","maxOutputTokens"],c);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","mediaResolution"],d);const h=a(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],Bh(p));const g=a(t,["thinkingConfig"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","thinkingConfig"],g);const _=a(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],_);const w=a(t,["systemInstruction"]);e!==void 0&&w!=null&&f(e,["setup","systemInstruction"],AN(vt(w)));const D=a(t,["tools"]);if(e!==void 0&&D!=null){let B=Co(D);Array.isArray(B)&&(B=B.map(S=>bN(So(S)))),f(e,["setup","tools"],B)}const U=a(t,["sessionResumption"]);e!==void 0&&U!=null&&f(e,["setup","sessionResumption"],DN(U));const C=a(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&f(e,["setup","inputAudioTranscription"],C);const T=a(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&f(e,["setup","outputAudioTranscription"],T);const R=a(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&f(e,["setup","realtimeInputConfig"],R);const b=a(t,["contextWindowCompression"]);e!==void 0&&b!=null&&f(e,["setup","contextWindowCompression"],b);const k=a(t,["proactivity"]);return e!==void 0&&k!=null&&f(e,["setup","proactivity"],k),n}function MN(t,e){const n={},i=a(e,["model"]);i!=null&&f(n,["setup","model"],fe(t,i));const s=a(e,["config"]);return s!=null&&f(n,["config"],xN(s,n)),n}function NN(t){const e={},n=a(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const i=a(t,["thought"]);i!=null&&f(e,["thought"],i);const s=a(t,["inlineData"]);s!=null&&f(e,["inlineData"],EN(s));const o=a(t,["fileData"]);o!=null&&f(e,["fileData"],RN(o));const r=a(t,["thoughtSignature"]);r!=null&&f(e,["thoughtSignature"],r);const l=a(t,["functionCall"]);l!=null&&f(e,["functionCall"],l);const c=a(t,["codeExecutionResult"]);c!=null&&f(e,["codeExecutionResult"],c);const d=a(t,["executableCode"]);d!=null&&f(e,["executableCode"],d);const h=a(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&f(e,["text"],p),e}function DN(t){const e={},n=a(t,["handle"]);if(n!=null&&f(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function bN(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),f(e,["functionDeclarations"],d)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],wN(i));const s=a(t,["googleSearchRetrieval"]);if(s!=null&&f(e,["googleSearchRetrieval"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["googleMaps"]);o!=null&&f(e,["googleMaps"],IN(o));const r=a(t,["urlContext"]);r!=null&&f(e,["urlContext"],r);const l=a(t,["computerUse"]);l!=null&&f(e,["computerUse"],l);const c=a(t,["codeExecution"]);return c!=null&&f(e,["codeExecution"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VN(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(o=>`${n}.${o}`);e.push(...s)}else e.push(n)}return e.join(",")}function PN(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const o=VN(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const r=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];s.length>0&&(l=s.map(d=>r.includes(d)?`generationConfig.${d}`:d));const c=[];o&&c.push(o),l.length>0&&c.push(...l),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class UN extends cs{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=CN(this.apiClient,e);o=F("auth_tokens",l._url),r=l._query,delete l.config,delete l._url,delete l._query;const c=PN(l,e.config);return s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LN(t){const e={},n=a(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function kN(t){const e={},n=a(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function qN(t,e){const n={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=a(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&f(e,["displayName"],i),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=a(t,["epochCount"]);e!==void 0&&s!=null&&f(e,["tuningTask","hyperparameters","epochCount"],s);const o=a(t,["learningRateMultiplier"]);if(o!=null&&f(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const r=a(t,["batchSize"]);e!==void 0&&r!=null&&f(e,["tuningTask","hyperparameters","batchSize"],r);const l=a(t,["learningRate"]);if(e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","learningRate"],l),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function BN(t,e){const n={},i=a(t,["validationDataset"]);e!==void 0&&i!=null&&f(e,["supervisedTuningSpec"],eD(i,n));const s=a(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&f(e,["tunedModelDisplayName"],s);const o=a(t,["description"]);e!==void 0&&o!=null&&f(e,["description"],o);const r=a(t,["epochCount"]);e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],r);const l=a(t,["learningRateMultiplier"]);e!==void 0&&l!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],l);const c=a(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const d=a(t,["adapterSize"]);if(e!==void 0&&d!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],d),a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=a(t,["labels"]);return e!==void 0&&h!=null&&f(e,["labels"],h),n}function ON(t){const e={},n=a(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=a(t,["preTunedModel"]);i!=null&&f(e,["preTunedModel"],i);const s=a(t,["trainingDataset"]);s!=null&&f(e,["tuningTask","trainingData"],ZN(s));const o=a(t,["config"]);return o!=null&&qN(o,e),e}function GN(t){const e={},n=a(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=a(t,["preTunedModel"]);i!=null&&f(e,["preTunedModel"],i);const s=a(t,["trainingDataset"]);s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],WN(s,e));const o=a(t,["config"]);return o!=null&&BN(o,e),e}function zN(t){const e={},n=a(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function HN(t){const e={},n=a(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function FN(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);const o=a(t,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),n}function YN(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);const o=a(t,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),n}function JN(t){const e={},n=a(t,["config"]);return n!=null&&FN(n,e),e}function KN(t){const e={},n=a(t,["config"]);return n!=null&&YN(n,e),e}function QN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=a(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>qE(r))),f(e,["tuningJobs"],o)}return e}function $N(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=a(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>ud(r))),f(e,["tuningJobs"],o)}return e}function XN(t){const e={},n=a(t,["name"]);n!=null&&f(e,["model"],n);const i=a(t,["name"]);return i!=null&&f(e,["endpoint"],i),e}function ZN(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=a(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["examples","examples"],i)}return e}function WN(t,e){const n={},i=a(t,["gcsUri"]);e!==void 0&&i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],i);const s=a(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s),a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function qE(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&f(e,["name"],i);const s=a(t,["state"]);s!=null&&f(e,["state"],vE(s));const o=a(t,["createTime"]);o!=null&&f(e,["createTime"],o);const r=a(t,["tuningTask","startTime"]);r!=null&&f(e,["startTime"],r);const l=a(t,["tuningTask","completeTime"]);l!=null&&f(e,["endTime"],l);const c=a(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const d=a(t,["description"]);d!=null&&f(e,["description"],d);const h=a(t,["baseModel"]);h!=null&&f(e,["baseModel"],h);const p=a(t,["_self"]);p!=null&&f(e,["tunedModel"],XN(p));const g=a(t,["customBaseModel"]);g!=null&&f(e,["customBaseModel"],g);const _=a(t,["experiment"]);_!=null&&f(e,["experiment"],_);const w=a(t,["labels"]);w!=null&&f(e,["labels"],w);const D=a(t,["outputUri"]);D!=null&&f(e,["outputUri"],D);const U=a(t,["pipelineJob"]);U!=null&&f(e,["pipelineJob"],U);const C=a(t,["serviceAccount"]);C!=null&&f(e,["serviceAccount"],C);const T=a(t,["tunedModelDisplayName"]);T!=null&&f(e,["tunedModelDisplayName"],T);const R=a(t,["veoTuningSpec"]);return R!=null&&f(e,["veoTuningSpec"],R),e}function ud(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&f(e,["name"],i);const s=a(t,["state"]);s!=null&&f(e,["state"],vE(s));const o=a(t,["createTime"]);o!=null&&f(e,["createTime"],o);const r=a(t,["startTime"]);r!=null&&f(e,["startTime"],r);const l=a(t,["endTime"]);l!=null&&f(e,["endTime"],l);const c=a(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const d=a(t,["error"]);d!=null&&f(e,["error"],d);const h=a(t,["description"]);h!=null&&f(e,["description"],h);const p=a(t,["baseModel"]);p!=null&&f(e,["baseModel"],p);const g=a(t,["tunedModel"]);g!=null&&f(e,["tunedModel"],g);const _=a(t,["preTunedModel"]);_!=null&&f(e,["preTunedModel"],_);const w=a(t,["supervisedTuningSpec"]);w!=null&&f(e,["supervisedTuningSpec"],w);const D=a(t,["tuningDataStats"]);D!=null&&f(e,["tuningDataStats"],D);const U=a(t,["encryptionSpec"]);U!=null&&f(e,["encryptionSpec"],U);const C=a(t,["partnerModelTuningSpec"]);C!=null&&f(e,["partnerModelTuningSpec"],C);const T=a(t,["customBaseModel"]);T!=null&&f(e,["customBaseModel"],T);const R=a(t,["experiment"]);R!=null&&f(e,["experiment"],R);const b=a(t,["labels"]);b!=null&&f(e,["labels"],b);const k=a(t,["outputUri"]);k!=null&&f(e,["outputUri"],k);const B=a(t,["pipelineJob"]);B!=null&&f(e,["pipelineJob"],B);const S=a(t,["serviceAccount"]);S!=null&&f(e,["serviceAccount"],S);const E=a(t,["tunedModelDisplayName"]);E!=null&&f(e,["tunedModelDisplayName"],E);const A=a(t,["veoTuningSpec"]);return A!=null&&f(e,["veoTuningSpec"],A),e}function jN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&f(e,["name"],i);const s=a(t,["metadata"]);s!=null&&f(e,["metadata"],s);const o=a(t,["done"]);o!=null&&f(e,["done"],o);const r=a(t,["error"]);return r!=null&&f(e,["error"],r),e}function eD(t,e){const n={},i=a(t,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);const s=a(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tD extends cs{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new sl(ts.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:s});return o.baseModel=void 0,await this.tuneInternal(o)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),o=await this.tuneMldevInternal(s);let r="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?r=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(r=o.name.split("/operations/")[0]),{name:r,state:nd.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=HN(e);return l=F("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>ud(h))}else{const d=zN(e);return l=F("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>qE(h))}}async listInternal(e){var n,i,s,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=KN(e);return l=F("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=$N(h),g=new zy;return Object.assign(g,p),g})}else{const d=JN(e);return l=F("tunedModels",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=QN(h),g=new zy;return Object.assign(g,p),g})}}async cancel(e){var n,i,s,o;let r="",l={};if(this.apiClient.isVertexAI()){const c=kN(e);r=F("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=LN(e);r=F("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,i;let s,o="",r={};if(this.apiClient.isVertexAI()){const l=GN(e);return o=F("tuningJobs",l._url),r=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>ud(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=ON(e);return o=F("tunedModels",l._url),r=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>jN(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nD{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const iD=1024*1024*8,sD=3,oD=1e3,rD=2,Kc="x-goog-upload-status";async function lD(t,e,n){var i,s,o;let r=0,l=0,c=new id(new Response),d="upload";for(r=t.size;l<r;){const p=Math.min(iD,r-l),g=t.slice(l,l+p);l+p>=r&&(d+=", finalize");let _=0,w=oD;for(;_<sD&&(c=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(p)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[Kc]));)_++,await uD(w),w=w*rD;if(l+=p,((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[Kc])!=="active")break;if(r<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(c==null?void 0:c.json());if(((o=c==null?void 0:c.headers)===null||o===void 0?void 0:o[Kc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function aD(t){return{size:t.size,type:t.type}}function uD(t){return new Promise(e=>setTimeout(e,t))}class cD{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lD(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await aD(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fD{create(e,n,i){return new dD(e,n,i)}}class dD{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a_="x-goog-api-key";class hD{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(a_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(a_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mD="gl-node/";class pD{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=VI(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new hD(this.apiKey);this.apiClient=new jM({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:mD+"web",uploader:new cD,downloader:new nD}),this.models=new vN(this.apiClient),this.live=new dN(this.apiClient,s,new fD),this.batches=new Ww(this.apiClient),this.chats=new N1(this.models,this.apiClient),this.caches=new w1(this.apiClient),this.files=new O1(this.apiClient),this.operations=new TN(this.apiClient),this.authTokens=new UN(this.apiClient),this.tunings=new tD(this.apiClient)}}var u_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},gD=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],r=t[n++],l=t[n++],c=((s&7)<<18|(o&63)<<12|(r&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],r=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|r&63)}}return e.join("")},OE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],r=s+1<t.length,l=r?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=o>>2,p=(o&3)<<4|l>>4;let g=(l&15)<<2|d>>6,_=d&63;c||(_=64,r||(g=64)),i.push(n[h],n[p],n[g],n[_])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(BE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||l==null||d==null||p==null)throw new yD;const g=o<<2|l>>4;if(i.push(g),d!==64){const _=l<<4&240|d>>2;if(i.push(_),p!==64){const w=d<<6&192|p;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _D=function(t){const e=BE(t);return OE.encodeByteArray(e,!0)},Za=function(t){return _D(t).replace(/\./g,"")},vD=function(t){try{return OE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=()=>TD().__FIREBASE_DEFAULTS__,AD=()=>{if(typeof process>"u"||typeof u_>"u")return;const t=u_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},SD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vD(t[1]);return e&&JSON.parse(e)},Gh=()=>{try{return ED()||AD()||SD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CD=t=>{var e,n;return(n=(e=Gh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},RD=t=>{const e=CD(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},GE=()=>{var t;return(t=Gh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Za(JSON.stringify(n)),Za(JSON.stringify(r)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MD(){var t;const e=(t=Gh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ND(){return!MD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DD(){try{return typeof indexedDB=="object"}catch{return!1}}function bD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="FirebaseError";class Io extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=VD,Object.setPrototypeOf(this,Io.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zE.prototype.create)}}class zE{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],r=o?PD(o,i):"Error",l=`${this.serviceName}: ${r} (${s}).`;return new Io(s,l,i)}}function PD(t,e){return t.replace(UD,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const UD=/\{\$([^}]+)}/g;function cd(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],r=e[s];if(c_(o)&&c_(r)){if(!cd(o,r))return!1}else if(o!==r)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function c_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(t){return t&&t._delegate?t._delegate:t}class Or{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new ID;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qD(e))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=Oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oi){return this.instances.has(e)}getOptions(e=Oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&r.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const r=this.instances.get(s);return r&&e(r,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Oi){return this.component?this.component.multipleInstances?e:Oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kD(t){return t===Oi?void 0:t}function qD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new LD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const OD={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},GD=ae.INFO,zD={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},HD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=zD[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class HE{constructor(e){this.name=e,this._logLevel=GD,this._logHandler=HD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const FD=(t,e)=>e.some(n=>t instanceof n);let f_,d_;function YD(){return f_||(f_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JD(){return d_||(d_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FE=new WeakMap,fd=new WeakMap,YE=new WeakMap,Qc=new WeakMap,zh=new WeakMap;function KD(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",r)},o=()=>{n(_i(t.result)),s()},r=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",r)});return e.then(n=>{n instanceof IDBCursor&&FE.set(n,t)}).catch(()=>{}),zh.set(e,t),e}function QD(t){if(fd.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",r),t.removeEventListener("abort",r)},o=()=>{n(),s()},r=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",r),t.addEventListener("abort",r)});fd.set(t,e)}let dd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||YE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _i(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $D(t){dd=t(dd)}function XD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call($c(this),e,...n);return YE.set(i,e.sort?e.sort():[e]),_i(i)}:JD().includes(t)?function(...e){return t.apply($c(this),e),_i(FE.get(this))}:function(...e){return _i(t.apply($c(this),e))}}function ZD(t){return typeof t=="function"?XD(t):(t instanceof IDBTransaction&&QD(t),FD(t,YD())?new Proxy(t,dd):t)}function _i(t){if(t instanceof IDBRequest)return KD(t);if(Qc.has(t))return Qc.get(t);const e=ZD(t);return e!==t&&(Qc.set(t,e),zh.set(e,t)),e}const $c=t=>zh.get(t);function WD(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const r=indexedDB.open(t,e),l=_i(r);return i&&r.addEventListener("upgradeneeded",c=>{i(_i(r.result),c.oldVersion,c.newVersion,_i(r.transaction),c)}),n&&r.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const jD=["get","getKey","getAll","getAllKeys","count"],eb=["put","add","delete","clear"],Xc=new Map;function h_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xc.get(e))return Xc.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=eb.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||jD.includes(n)))return;const o=async function(r,...l){const c=this.transaction(r,s?"readwrite":"readonly");let d=c.store;return i&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return Xc.set(e,o),o}$D(t=>({...t,get:(e,n,i)=>h_(e,n)||t.get(e,n,i),has:(e,n)=>!!h_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nb(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function nb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hd="@firebase/app",m_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new HE("@firebase/app"),ib="@firebase/app-compat",sb="@firebase/analytics-compat",ob="@firebase/analytics",rb="@firebase/app-check-compat",lb="@firebase/app-check",ab="@firebase/auth",ub="@firebase/auth-compat",cb="@firebase/database",fb="@firebase/data-connect",db="@firebase/database-compat",hb="@firebase/functions",mb="@firebase/functions-compat",pb="@firebase/installations",gb="@firebase/installations-compat",yb="@firebase/messaging",_b="@firebase/messaging-compat",vb="@firebase/performance",Tb="@firebase/performance-compat",Eb="@firebase/remote-config",Ab="@firebase/remote-config-compat",Sb="@firebase/storage",Cb="@firebase/storage-compat",Rb="@firebase/firestore",Ib="@firebase/vertexai-preview",wb="@firebase/firestore-compat",xb="firebase",Mb="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="[DEFAULT]",Nb={[hd]:"fire-core",[ib]:"fire-core-compat",[ob]:"fire-analytics",[sb]:"fire-analytics-compat",[lb]:"fire-app-check",[rb]:"fire-app-check-compat",[ab]:"fire-auth",[ub]:"fire-auth-compat",[cb]:"fire-rtdb",[fb]:"fire-data-connect",[db]:"fire-rtdb-compat",[hb]:"fire-fn",[mb]:"fire-fn-compat",[pb]:"fire-iid",[gb]:"fire-iid-compat",[yb]:"fire-fcm",[_b]:"fire-fcm-compat",[vb]:"fire-perf",[Tb]:"fire-perf-compat",[Eb]:"fire-rc",[Ab]:"fire-rc-compat",[Sb]:"fire-gcs",[Cb]:"fire-gcs-compat",[Rb]:"fire-fst",[wb]:"fire-fst-compat",[Ib]:"fire-vertex","fire-js":"fire-js",[xb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=new Map,Db=new Map,pd=new Map;function p_(t,e){try{t.container.addComponent(e)}catch(n){Bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function eu(t){const e=t.name;if(pd.has(e))return Bn.debug(`There were multiple attempts to register component ${e}.`),!1;pd.set(e,t);for(const n of ja.values())p_(n,t);for(const n of Db.values())p_(n,t);return!0}function bb(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vi=new zE("app","Firebase",Vb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=Mb;function JE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:md,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw vi.create("bad-app-name",{appName:String(s)});if(n||(n=GE()),!n)throw vi.create("no-options");const o=ja.get(s);if(o){if(cd(n,o.options)&&cd(i,o.config))return o;throw vi.create("duplicate-app",{appName:s})}const r=new BD(s);for(const c of pd.values())r.addComponent(c);const l=new Pb(n,i,r);return ja.set(s,l),l}function Lb(t=md){const e=ja.get(t);if(!e&&t===md&&GE())return JE();if(!e)throw vi.create("no-app",{appName:t});return e}function Js(t,e,n){var i;let s=(i=Nb[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),r=e.match(/\s|\//);if(o||r){const l=[`Unable to register library "${s}" with version "${e}":`];o&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&r&&l.push("and"),r&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bn.warn(l.join(" "));return}eu(new Or(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="firebase-heartbeat-database",qb=1,Gr="firebase-heartbeat-store";let Zc=null;function KE(){return Zc||(Zc=WD(kb,qb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gr)}catch(n){console.warn(n)}}}}).catch(t=>{throw vi.create("idb-open",{originalErrorMessage:t.message})})),Zc}async function Bb(t){try{const n=(await KE()).transaction(Gr),i=await n.objectStore(Gr).get(QE(t));return await n.done,i}catch(e){if(e instanceof Io)Bn.warn(e.message);else{const n=vi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bn.warn(n.message)}}}async function g_(t,e){try{const i=(await KE()).transaction(Gr,"readwrite");await i.objectStore(Gr).put(e,QE(t)),await i.done}catch(n){if(n instanceof Io)Bn.warn(n.message);else{const i=vi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bn.warn(i.message)}}}function QE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=1024,Gb=30*24*60*60*1e3;class zb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Fb(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=y_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(r=>r.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const l=new Date(r.date).valueOf();return Date.now()-l<=Gb}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Bn.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=y_(),{heartbeatsToSend:i,unsentEntries:s}=Hb(this._heartbeatsCache.heartbeats),o=Za(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Bn.warn(n),""}}}function y_(){return new Date().toISOString().substring(0,10)}function Hb(t,e=Ob){const n=[];let i=t.slice();for(const s of t){const o=n.find(r=>r.agent===s.agent);if(o){if(o.dates.push(s.date),__(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),__(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Fb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DD()?bD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Bb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return g_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return g_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function __(t){return Za(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(t){eu(new Or("platform-logger",e=>new tb(e),"PRIVATE")),eu(new Or("heartbeat",e=>new zb(e),"PRIVATE")),Js(hd,m_,t),Js(hd,m_,"esm2017"),Js("fire-js","")}Yb("");var v_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ki,$E;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,E){function A(){}A.prototype=E.prototype,S.D=E.prototype,S.prototype=new A,S.prototype.constructor=S,S.C=function(I,N,V){for(var x=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)x[ft-2]=arguments[ft];return E.prototype[N].apply(I,x)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,E,A){A||(A=0);var I=Array(16);if(typeof E=="string")for(var N=0;16>N;++N)I[N]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(N=0;16>N;++N)I[N]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=S.g[0],A=S.g[1],N=S.g[2];var V=S.g[3],x=E+(V^A&(N^V))+I[0]+3614090360&4294967295;E=A+(x<<7&4294967295|x>>>25),x=V+(N^E&(A^N))+I[1]+3905402710&4294967295,V=E+(x<<12&4294967295|x>>>20),x=N+(A^V&(E^A))+I[2]+606105819&4294967295,N=V+(x<<17&4294967295|x>>>15),x=A+(E^N&(V^E))+I[3]+3250441966&4294967295,A=N+(x<<22&4294967295|x>>>10),x=E+(V^A&(N^V))+I[4]+4118548399&4294967295,E=A+(x<<7&4294967295|x>>>25),x=V+(N^E&(A^N))+I[5]+1200080426&4294967295,V=E+(x<<12&4294967295|x>>>20),x=N+(A^V&(E^A))+I[6]+2821735955&4294967295,N=V+(x<<17&4294967295|x>>>15),x=A+(E^N&(V^E))+I[7]+4249261313&4294967295,A=N+(x<<22&4294967295|x>>>10),x=E+(V^A&(N^V))+I[8]+1770035416&4294967295,E=A+(x<<7&4294967295|x>>>25),x=V+(N^E&(A^N))+I[9]+2336552879&4294967295,V=E+(x<<12&4294967295|x>>>20),x=N+(A^V&(E^A))+I[10]+4294925233&4294967295,N=V+(x<<17&4294967295|x>>>15),x=A+(E^N&(V^E))+I[11]+2304563134&4294967295,A=N+(x<<22&4294967295|x>>>10),x=E+(V^A&(N^V))+I[12]+1804603682&4294967295,E=A+(x<<7&4294967295|x>>>25),x=V+(N^E&(A^N))+I[13]+4254626195&4294967295,V=E+(x<<12&4294967295|x>>>20),x=N+(A^V&(E^A))+I[14]+2792965006&4294967295,N=V+(x<<17&4294967295|x>>>15),x=A+(E^N&(V^E))+I[15]+1236535329&4294967295,A=N+(x<<22&4294967295|x>>>10),x=E+(N^V&(A^N))+I[1]+4129170786&4294967295,E=A+(x<<5&4294967295|x>>>27),x=V+(A^N&(E^A))+I[6]+3225465664&4294967295,V=E+(x<<9&4294967295|x>>>23),x=N+(E^A&(V^E))+I[11]+643717713&4294967295,N=V+(x<<14&4294967295|x>>>18),x=A+(V^E&(N^V))+I[0]+3921069994&4294967295,A=N+(x<<20&4294967295|x>>>12),x=E+(N^V&(A^N))+I[5]+3593408605&4294967295,E=A+(x<<5&4294967295|x>>>27),x=V+(A^N&(E^A))+I[10]+38016083&4294967295,V=E+(x<<9&4294967295|x>>>23),x=N+(E^A&(V^E))+I[15]+3634488961&4294967295,N=V+(x<<14&4294967295|x>>>18),x=A+(V^E&(N^V))+I[4]+3889429448&4294967295,A=N+(x<<20&4294967295|x>>>12),x=E+(N^V&(A^N))+I[9]+568446438&4294967295,E=A+(x<<5&4294967295|x>>>27),x=V+(A^N&(E^A))+I[14]+3275163606&4294967295,V=E+(x<<9&4294967295|x>>>23),x=N+(E^A&(V^E))+I[3]+4107603335&4294967295,N=V+(x<<14&4294967295|x>>>18),x=A+(V^E&(N^V))+I[8]+1163531501&4294967295,A=N+(x<<20&4294967295|x>>>12),x=E+(N^V&(A^N))+I[13]+2850285829&4294967295,E=A+(x<<5&4294967295|x>>>27),x=V+(A^N&(E^A))+I[2]+4243563512&4294967295,V=E+(x<<9&4294967295|x>>>23),x=N+(E^A&(V^E))+I[7]+1735328473&4294967295,N=V+(x<<14&4294967295|x>>>18),x=A+(V^E&(N^V))+I[12]+2368359562&4294967295,A=N+(x<<20&4294967295|x>>>12),x=E+(A^N^V)+I[5]+4294588738&4294967295,E=A+(x<<4&4294967295|x>>>28),x=V+(E^A^N)+I[8]+2272392833&4294967295,V=E+(x<<11&4294967295|x>>>21),x=N+(V^E^A)+I[11]+1839030562&4294967295,N=V+(x<<16&4294967295|x>>>16),x=A+(N^V^E)+I[14]+4259657740&4294967295,A=N+(x<<23&4294967295|x>>>9),x=E+(A^N^V)+I[1]+2763975236&4294967295,E=A+(x<<4&4294967295|x>>>28),x=V+(E^A^N)+I[4]+1272893353&4294967295,V=E+(x<<11&4294967295|x>>>21),x=N+(V^E^A)+I[7]+4139469664&4294967295,N=V+(x<<16&4294967295|x>>>16),x=A+(N^V^E)+I[10]+3200236656&4294967295,A=N+(x<<23&4294967295|x>>>9),x=E+(A^N^V)+I[13]+681279174&4294967295,E=A+(x<<4&4294967295|x>>>28),x=V+(E^A^N)+I[0]+3936430074&4294967295,V=E+(x<<11&4294967295|x>>>21),x=N+(V^E^A)+I[3]+3572445317&4294967295,N=V+(x<<16&4294967295|x>>>16),x=A+(N^V^E)+I[6]+76029189&4294967295,A=N+(x<<23&4294967295|x>>>9),x=E+(A^N^V)+I[9]+3654602809&4294967295,E=A+(x<<4&4294967295|x>>>28),x=V+(E^A^N)+I[12]+3873151461&4294967295,V=E+(x<<11&4294967295|x>>>21),x=N+(V^E^A)+I[15]+530742520&4294967295,N=V+(x<<16&4294967295|x>>>16),x=A+(N^V^E)+I[2]+3299628645&4294967295,A=N+(x<<23&4294967295|x>>>9),x=E+(N^(A|~V))+I[0]+4096336452&4294967295,E=A+(x<<6&4294967295|x>>>26),x=V+(A^(E|~N))+I[7]+1126891415&4294967295,V=E+(x<<10&4294967295|x>>>22),x=N+(E^(V|~A))+I[14]+2878612391&4294967295,N=V+(x<<15&4294967295|x>>>17),x=A+(V^(N|~E))+I[5]+4237533241&4294967295,A=N+(x<<21&4294967295|x>>>11),x=E+(N^(A|~V))+I[12]+1700485571&4294967295,E=A+(x<<6&4294967295|x>>>26),x=V+(A^(E|~N))+I[3]+2399980690&4294967295,V=E+(x<<10&4294967295|x>>>22),x=N+(E^(V|~A))+I[10]+4293915773&4294967295,N=V+(x<<15&4294967295|x>>>17),x=A+(V^(N|~E))+I[1]+2240044497&4294967295,A=N+(x<<21&4294967295|x>>>11),x=E+(N^(A|~V))+I[8]+1873313359&4294967295,E=A+(x<<6&4294967295|x>>>26),x=V+(A^(E|~N))+I[15]+4264355552&4294967295,V=E+(x<<10&4294967295|x>>>22),x=N+(E^(V|~A))+I[6]+2734768916&4294967295,N=V+(x<<15&4294967295|x>>>17),x=A+(V^(N|~E))+I[13]+1309151649&4294967295,A=N+(x<<21&4294967295|x>>>11),x=E+(N^(A|~V))+I[4]+4149444226&4294967295,E=A+(x<<6&4294967295|x>>>26),x=V+(A^(E|~N))+I[11]+3174756917&4294967295,V=E+(x<<10&4294967295|x>>>22),x=N+(E^(V|~A))+I[2]+718787259&4294967295,N=V+(x<<15&4294967295|x>>>17),x=A+(V^(N|~E))+I[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(N+(x<<21&4294967295|x>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+V&4294967295}i.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var A=E-this.blockSize,I=this.B,N=this.h,V=0;V<E;){if(N==0)for(;V<=A;)s(this,S,V),V+=this.blockSize;if(typeof S=="string"){for(;V<E;)if(I[N++]=S.charCodeAt(V++),N==this.blockSize){s(this,I),N=0;break}}else for(;V<E;)if(I[N++]=S[V++],N==this.blockSize){s(this,I),N=0;break}}this.h=N,this.o+=E},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var A=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=A&255,A/=256;for(this.u(S),S=Array(16),E=A=0;4>E;++E)for(var I=0;32>I;I+=8)S[A++]=this.g[E]>>>I&255;return S};function o(S,E){var A=l;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=E(S)}function r(S,E){this.h=E;for(var A=[],I=!0,N=S.length-1;0<=N;N--){var V=S[N]|0;I&&V==E||(A[N]=V,I=!1)}this.g=A}var l={};function c(S){return-128<=S&&128>S?o(S,function(E){return new r([E|0],0>E?-1:0)}):new r([S|0],0>S?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return U(d(-S));for(var E=[],A=1,I=0;S>=A;I++)E[I]=S/A|0,A*=4294967296;return new r(E,0)}function h(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return U(h(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(E,8)),I=p,N=0;N<S.length;N+=8){var V=Math.min(8,S.length-N),x=parseInt(S.substring(N,N+V),E);8>V?(V=d(Math.pow(E,V)),I=I.j(V).add(d(x))):(I=I.j(A),I=I.add(d(x)))}return I}var p=c(0),g=c(1),_=c(16777216);t=r.prototype,t.m=function(){if(D(this))return-U(this).m();for(var S=0,E=1,A=0;A<this.g.length;A++){var I=this.i(A);S+=(0<=I?I:4294967296+I)*E,E*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(D(this))return"-"+U(this).toString(S);for(var E=d(Math.pow(S,6)),A=this,I="";;){var N=b(A,E).g;A=C(A,N.j(E));var V=((0<A.g.length?A.g[0]:A.h)>>>0).toString(S);if(A=N,w(A))return V+I;for(;6>V.length;)V="0"+V;I=V+I}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function D(S){return S.h==-1}t.l=function(S){return S=C(this,S),D(S)?-1:w(S)?0:1};function U(S){for(var E=S.g.length,A=[],I=0;I<E;I++)A[I]=~S.g[I];return new r(A,~S.h).add(g)}t.abs=function(){return D(this)?U(this):this},t.add=function(S){for(var E=Math.max(this.g.length,S.g.length),A=[],I=0,N=0;N<=E;N++){var V=I+(this.i(N)&65535)+(S.i(N)&65535),x=(V>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);I=x>>>16,V&=65535,x&=65535,A[N]=x<<16|V}return new r(A,A[A.length-1]&-2147483648?-1:0)};function C(S,E){return S.add(U(E))}t.j=function(S){if(w(this)||w(S))return p;if(D(this))return D(S)?U(this).j(U(S)):U(U(this).j(S));if(D(S))return U(this.j(U(S)));if(0>this.l(_)&&0>S.l(_))return d(this.m()*S.m());for(var E=this.g.length+S.g.length,A=[],I=0;I<2*E;I++)A[I]=0;for(I=0;I<this.g.length;I++)for(var N=0;N<S.g.length;N++){var V=this.i(I)>>>16,x=this.i(I)&65535,ft=S.i(N)>>>16,Rt=S.i(N)&65535;A[2*I+2*N]+=x*Rt,T(A,2*I+2*N),A[2*I+2*N+1]+=V*Rt,T(A,2*I+2*N+1),A[2*I+2*N+1]+=x*ft,T(A,2*I+2*N+1),A[2*I+2*N+2]+=V*ft,T(A,2*I+2*N+2)}for(I=0;I<E;I++)A[I]=A[2*I+1]<<16|A[2*I];for(I=E;I<2*E;I++)A[I]=0;return new r(A,0)};function T(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function R(S,E){this.g=S,this.h=E}function b(S,E){if(w(E))throw Error("division by zero");if(w(S))return new R(p,p);if(D(S))return E=b(U(S),E),new R(U(E.g),U(E.h));if(D(E))return E=b(S,U(E)),new R(U(E.g),E.h);if(30<S.g.length){if(D(S)||D(E))throw Error("slowDivide_ only works with positive integers.");for(var A=g,I=E;0>=I.l(S);)A=k(A),I=k(I);var N=B(A,1),V=B(I,1);for(I=B(I,2),A=B(A,2);!w(I);){var x=V.add(I);0>=x.l(S)&&(N=N.add(A),V=x),I=B(I,1),A=B(A,1)}return E=C(S,N.j(E)),new R(N,E)}for(N=p;0<=S.l(E);){for(A=Math.max(1,Math.floor(S.m()/E.m())),I=Math.ceil(Math.log(A)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),V=d(A),x=V.j(E);D(x)||0<x.l(S);)A-=I,V=d(A),x=V.j(E);w(V)&&(V=g),N=N.add(V),S=C(S,x)}return new R(N,S)}t.A=function(S){return b(this,S).h},t.and=function(S){for(var E=Math.max(this.g.length,S.g.length),A=[],I=0;I<E;I++)A[I]=this.i(I)&S.i(I);return new r(A,this.h&S.h)},t.or=function(S){for(var E=Math.max(this.g.length,S.g.length),A=[],I=0;I<E;I++)A[I]=this.i(I)|S.i(I);return new r(A,this.h|S.h)},t.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),A=[],I=0;I<E;I++)A[I]=this.i(I)^S.i(I);return new r(A,this.h^S.h)};function k(S){for(var E=S.g.length+1,A=[],I=0;I<E;I++)A[I]=S.i(I)<<1|S.i(I-1)>>>31;return new r(A,S.h)}function B(S,E){var A=E>>5;E%=32;for(var I=S.g.length-A,N=[],V=0;V<I;V++)N[V]=0<E?S.i(V+A)>>>E|S.i(V+A+1)<<32-E:S.i(V+A);return new r(N,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,$E=i,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=d,r.fromString=h,Ki=r}).apply(typeof v_<"u"?v_:typeof self<"u"?self:typeof window<"u"?window:{});var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XE,sr,ZE,ma,gd,WE,jE,eA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jl=="object"&&Jl];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function s(u,m){if(m)e:{var y=i;u=u.split(".");for(var v=0;v<u.length-1;v++){var P=u[v];if(!(P in y))break e;y=y[P]}u=u[u.length-1],v=y[u],m=m(v),m!=v&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}function o(u,m){u instanceof String&&(u+="");var y=0,v=!1,P={next:function(){if(!v&&y<u.length){var L=y++;return{value:m(L,u[L]),done:!1}}return v=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}s("Array.prototype.values",function(u){return u||function(){return o(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},l=this||self;function c(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function d(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function h(u,m,y){return u.call.apply(u.bind,arguments)}function p(u,m,y){if(!u)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,v),u.apply(m,P)}}return function(){return u.apply(m,arguments)}}function g(u,m,y){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function _(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var v=y.slice();return v.push.apply(v,arguments),u.apply(this,v)}}function w(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(v,P,L){for(var z=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)z[Ae-2]=arguments[Ae];return m.prototype[P].apply(v,z)}}function D(u){const m=u.length;if(0<m){const y=Array(m);for(let v=0;v<m;v++)y[v]=u[v];return y}return[]}function U(u,m){for(let y=1;y<arguments.length;y++){const v=arguments[y];if(c(v)){const P=u.length||0,L=v.length||0;u.length=P+L;for(let z=0;z<L;z++)u[P+z]=v[z]}else u.push(v)}}class C{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function T(u){return/^[\s\xa0]*$/.test(u)}function R(){var u=l.navigator;return u&&(u=u.userAgent)?u:""}function b(u){return b[" "](u),u}b[" "]=function(){};var k=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function B(u,m,y){for(const v in u)m.call(y,u[v],v,u)}function S(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function E(u){const m={};for(const y in u)m[y]=u[y];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,m){let y,v;for(let P=1;P<arguments.length;P++){v=arguments[P];for(y in v)u[y]=v[y];for(let L=0;L<A.length;L++)y=A[L],Object.prototype.hasOwnProperty.call(v,y)&&(u[y]=v[y])}}function N(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function V(u){l.setTimeout(()=>{throw u},0)}function x(){var u=Ee;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ft{constructor(){this.h=this.g=null}add(m,y){const v=Rt.get();v.set(m,y),this.h?this.h.next=v:this.g=v,this.h=v}}var Rt=new C(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,X=!1,Ee=new ft,te=()=>{const u=l.Promise.resolve(void 0);Q=()=>{u.then(_e)}};var _e=()=>{for(var u;u=x();){try{u.h.call(u.g)}catch(y){V(y)}var m=Rt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}X=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var Yt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};l.addEventListener("test",y,m),l.removeEventListener("test",y,m)}catch{}return u}();function It(u,m){if(Ce.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,v=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(k){e:{try{b(m.nodeName);var P=!0;break e}catch{}P=!1}P||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ou[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&It.aa.h.call(this)}}w(It,Ce);var Ou={2:"touch",3:"pen",4:"mouse"};It.prototype.h=function(){It.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Fn="closure_listenable_"+(1e6*Math.random()|0),fl=0;function Ni(u,m,y,v,P){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!v,this.ha=P,this.key=++fl,this.da=this.fa=!1}function dl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function hl(u){this.src=u,this.g={},this.h=0}hl.prototype.add=function(u,m,y,v,P){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var z=zu(u,m,v,P);return-1<z?(m=u[z],y||(m.fa=!1)):(m=new Ni(m,this.src,L,!!v,P),m.fa=y,u.push(m)),m};function Gu(u,m){var y=m.type;if(y in u.g){var v=u.g[y],P=Array.prototype.indexOf.call(v,m,void 0),L;(L=0<=P)&&Array.prototype.splice.call(v,P,1),L&&(dl(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function zu(u,m,y,v){for(var P=0;P<u.length;++P){var L=u[P];if(!L.da&&L.listener==m&&L.capture==!!y&&L.ha==v)return P}return-1}var Hu="closure_lm_"+(1e6*Math.random()|0),Fu={};function vm(u,m,y,v,P){if(Array.isArray(m)){for(var L=0;L<m.length;L++)vm(u,m[L],y,v,P);return null}return y=Am(y),u&&u[Fn]?u.K(m,y,d(v)?!!v.capture:!1,P):nS(u,m,y,!1,v,P)}function nS(u,m,y,v,P,L){if(!m)throw Error("Invalid event type");var z=d(P)?!!P.capture:!!P,Ae=Ju(u);if(Ae||(u[Hu]=Ae=new hl(u)),y=Ae.add(m,y,v,z,L),y.proxy)return y;if(v=iS(),y.proxy=v,v.src=u,v.listener=y,u.addEventListener)Yt||(P=z),P===void 0&&(P=!1),u.addEventListener(m.toString(),v,P);else if(u.attachEvent)u.attachEvent(Em(m.toString()),v);else if(u.addListener&&u.removeListener)u.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return y}function iS(){function u(y){return m.call(u.src,u.listener,y)}const m=sS;return u}function Tm(u,m,y,v,P){if(Array.isArray(m))for(var L=0;L<m.length;L++)Tm(u,m[L],y,v,P);else v=d(v)?!!v.capture:!!v,y=Am(y),u&&u[Fn]?(u=u.i,m=String(m).toString(),m in u.g&&(L=u.g[m],y=zu(L,y,v,P),-1<y&&(dl(L[y]),Array.prototype.splice.call(L,y,1),L.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ju(u))&&(m=u.g[m.toString()],u=-1,m&&(u=zu(m,y,v,P)),(y=-1<u?m[u]:null)&&Yu(y))}function Yu(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Fn])Gu(m.i,u);else{var y=u.type,v=u.proxy;m.removeEventListener?m.removeEventListener(y,v,u.capture):m.detachEvent?m.detachEvent(Em(y),v):m.addListener&&m.removeListener&&m.removeListener(v),(y=Ju(m))?(Gu(y,u),y.h==0&&(y.src=null,m[Hu]=null)):dl(u)}}}function Em(u){return u in Fu?Fu[u]:Fu[u]="on"+u}function sS(u,m){if(u.da)u=!0;else{m=new It(m,this);var y=u.listener,v=u.ha||u.src;u.fa&&Yu(u),u=y.call(v,m)}return u}function Ju(u){return u=u[Hu],u instanceof hl?u:null}var Ku="__closure_events_fn_"+(1e9*Math.random()>>>0);function Am(u){return typeof u=="function"?u:(u[Ku]||(u[Ku]=function(m){return u.handleEvent(m)}),u[Ku])}function dt(){pe.call(this),this.i=new hl(this),this.M=this,this.F=null}w(dt,pe),dt.prototype[Fn]=!0,dt.prototype.removeEventListener=function(u,m,y,v){Tm(this,u,m,y,v)};function Tt(u,m){var y,v=u.F;if(v)for(y=[];v;v=v.F)y.push(v);if(u=u.M,v=m.type||m,typeof m=="string")m=new Ce(m,u);else if(m instanceof Ce)m.target=m.target||u;else{var P=m;m=new Ce(v,u),I(m,P)}if(P=!0,y)for(var L=y.length-1;0<=L;L--){var z=m.g=y[L];P=ml(z,v,!0,m)&&P}if(z=m.g=u,P=ml(z,v,!0,m)&&P,P=ml(z,v,!1,m)&&P,y)for(L=0;L<y.length;L++)z=m.g=y[L],P=ml(z,v,!1,m)&&P}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],v=0;v<y.length;v++)dl(y[v]);delete u.g[m],u.h--}}this.F=null},dt.prototype.K=function(u,m,y,v){return this.i.add(String(u),m,!1,y,v)},dt.prototype.L=function(u,m,y,v){return this.i.add(String(u),m,!0,y,v)};function ml(u,m,y,v){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var P=!0,L=0;L<m.length;++L){var z=m[L];if(z&&!z.da&&z.capture==y){var Ae=z.listener,nt=z.ha||z.src;z.fa&&Gu(u.i,z),P=Ae.call(nt,v)!==!1&&P}}return P&&!v.defaultPrevented}function Sm(u,m,y){if(typeof u=="function")y&&(u=g(u,y));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:l.setTimeout(u,m||0)}function Cm(u){u.g=Sm(()=>{u.g=null,u.i&&(u.i=!1,Cm(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class oS extends pe{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Cm(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Do(u){pe.call(this),this.h=u,this.g={}}w(Do,pe);var Rm=[];function Im(u){B(u.g,function(m,y){this.g.hasOwnProperty(y)&&Yu(m)},u),u.g={}}Do.prototype.N=function(){Do.aa.N.call(this),Im(this)},Do.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qu=l.JSON.stringify,rS=l.JSON.parse,lS=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function $u(){}$u.prototype.h=null;function wm(u){return u.h||(u.h=u.i())}function xm(){}var bo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xu(){Ce.call(this,"d")}w(Xu,Ce);function Zu(){Ce.call(this,"c")}w(Zu,Ce);var Di={},Mm=null;function pl(){return Mm=Mm||new dt}Di.La="serverreachability";function Nm(u){Ce.call(this,Di.La,u)}w(Nm,Ce);function Vo(u){const m=pl();Tt(m,new Nm(m))}Di.STAT_EVENT="statevent";function Dm(u,m){Ce.call(this,Di.STAT_EVENT,u),this.stat=m}w(Dm,Ce);function Et(u){const m=pl();Tt(m,new Dm(m,u))}Di.Ma="timingevent";function bm(u,m){Ce.call(this,Di.Ma,u),this.size=m}w(bm,Ce);function Po(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},m)}function Uo(){this.g=!0}Uo.prototype.xa=function(){this.g=!1};function aS(u,m,y,v,P,L){u.info(function(){if(u.g)if(L)for(var z="",Ae=L.split("&"),nt=0;nt<Ae.length;nt++){var ce=Ae[nt].split("=");if(1<ce.length){var ht=ce[0];ce=ce[1];var mt=ht.split("_");z=2<=mt.length&&mt[1]=="type"?z+(ht+"="+ce+"&"):z+(ht+"=redacted&")}}else z=null;else z=L;return"XMLHTTP REQ ("+v+") [attempt "+P+"]: "+m+`
`+y+`
`+z})}function uS(u,m,y,v,P,L,z){u.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+P+"]: "+m+`
`+y+`
`+L+" "+z})}function fs(u,m,y,v){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+fS(u,y)+(v?" "+v:"")})}function cS(u,m){u.info(function(){return"TIMEOUT: "+m})}Uo.prototype.info=function(){};function fS(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var v=y[u];if(!(2>v.length)){var P=v[1];if(Array.isArray(P)&&!(1>P.length)){var L=P[0];if(L!="noop"&&L!="stop"&&L!="close")for(var z=1;z<P.length;z++)P[z]=""}}}}return Qu(y)}catch{return m}}var gl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wu;function yl(){}w(yl,$u),yl.prototype.g=function(){return new XMLHttpRequest},yl.prototype.i=function(){return{}},Wu=new yl;function Yn(u,m,y,v){this.j=u,this.i=m,this.l=y,this.R=v||1,this.U=new Do(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pm}function Pm(){this.i=null,this.g="",this.h=!1}var Um={},ju={};function ec(u,m,y){u.L=1,u.v=El(vn(m)),u.m=y,u.P=!0,Lm(u,null)}function Lm(u,m){u.F=Date.now(),_l(u),u.A=vn(u.v);var y=u.A,v=u.R;Array.isArray(v)||(v=[String(v)]),Xm(y.i,"t",v),u.C=0,y=u.j.J,u.h=new Pm,u.g=mp(u.j,y?m:null,!u.m),0<u.O&&(u.M=new oS(g(u.Y,u,u.g),u.O)),m=u.U,y=u.g,v=u.ca;var P="readystatechange";Array.isArray(P)||(P&&(Rm[0]=P.toString()),P=Rm);for(var L=0;L<P.length;L++){var z=vm(y,P[L],v||m.handleEvent,!1,m.h||m);if(!z)break;m.g[z.key]=z}m=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Vo(),aS(u.i,u.u,u.A,u.l,u.R,u.m)}Yn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Tn(u)==3?m.j():this.Y(u)},Yn.prototype.Y=function(u){try{if(u==this.g)e:{const mt=Tn(this.g);var m=this.g.Ba();const ms=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||ip(this.g)))){this.J||mt!=4||m==7||(m==8||0>=ms?Vo(3):Vo(2)),tc(this);var y=this.g.Z();this.X=y;t:if(km(this)){var v=ip(this.g);u="";var P=v.length,L=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bi(this),Lo(this);var z="";break t}this.h.i=new l.TextDecoder}for(m=0;m<P;m++)this.h.h=!0,u+=this.h.i.decode(v[m],{stream:!(L&&m==P-1)});v.length=0,this.h.g+=u,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=y==200,uS(this.i,this.u,this.A,this.l,this.R,mt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,nt=this.g;if((Ae=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Ae)){var ce=Ae;break t}}ce=null}if(y=ce)fs(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nc(this,y);else{this.o=!1,this.s=3,Et(12),bi(this),Lo(this);break e}}if(this.P){y=!0;let sn;for(;!this.J&&this.C<z.length;)if(sn=dS(this,z),sn==ju){mt==4&&(this.s=4,Et(14),y=!1),fs(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Um){this.s=4,Et(15),fs(this.i,this.l,z,"[Invalid Chunk]"),y=!1;break}else fs(this.i,this.l,sn,null),nc(this,sn);if(km(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||z.length!=0||this.h.h||(this.s=1,Et(16),y=!1),this.o=this.o&&y,!y)fs(this.i,this.l,z,"[Invalid Chunked Response]"),bi(this),Lo(this);else if(0<z.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),ac(ht),ht.M=!0,Et(11))}}else fs(this.i,this.l,z,null),nc(this,z);mt==4&&bi(this),this.o&&!this.J&&(mt==4?cp(this.j,this):(this.o=!1,_l(this)))}else MS(this.g),y==400&&0<z.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),bi(this),Lo(this)}}}catch{}finally{}};function km(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function dS(u,m){var y=u.C,v=m.indexOf(`
`,y);return v==-1?ju:(y=Number(m.substring(y,v)),isNaN(y)?Um:(v+=1,v+y>m.length?ju:(m=m.slice(v,v+y),u.C=v+y,m)))}Yn.prototype.cancel=function(){this.J=!0,bi(this)};function _l(u){u.S=Date.now()+u.I,qm(u,u.I)}function qm(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Po(g(u.ba,u),m)}function tc(u){u.B&&(l.clearTimeout(u.B),u.B=null)}Yn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(cS(this.i,this.A),this.L!=2&&(Vo(),Et(17)),bi(this),this.s=2,Lo(this)):qm(this,this.S-u)};function Lo(u){u.j.G==0||u.J||cp(u.j,u)}function bi(u){tc(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Im(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function nc(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||ic(y.h,u))){if(!u.K&&ic(y.h,u)&&y.G==3){try{var v=y.Da.g.parse(m)}catch{v=null}if(Array.isArray(v)&&v.length==3){var P=v;if(P[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)wl(y),Rl(y);else break e;lc(y),Et(18)}}else y.za=P[1],0<y.za-y.T&&37500>P[2]&&y.F&&y.v==0&&!y.C&&(y.C=Po(g(y.Za,y),6e3));if(1>=Gm(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Pi(y,11)}else if((u.K||y.g==u)&&wl(y),!T(m))for(P=y.Da.g.parse(m),m=0;m<P.length;m++){let ce=P[m];if(y.T=ce[0],ce=ce[1],y.G==2)if(ce[0]=="c"){y.K=ce[1],y.ia=ce[2];const ht=ce[3];ht!=null&&(y.la=ht,y.j.info("VER="+y.la));const mt=ce[4];mt!=null&&(y.Aa=mt,y.j.info("SVER="+y.Aa));const ms=ce[5];ms!=null&&typeof ms=="number"&&0<ms&&(v=1.5*ms,y.L=v,y.j.info("backChannelRequestTimeoutMs_="+v)),v=y;const sn=u.g;if(sn){const Ml=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ml){var L=v.h;L.g||Ml.indexOf("spdy")==-1&&Ml.indexOf("quic")==-1&&Ml.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(sc(L,L.h),L.h=null))}if(v.D){const uc=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;uc&&(v.ya=uc,we(v.I,v.D,uc))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),v=y;var z=u;if(v.qa=hp(v,v.J?v.ia:null,v.W),z.K){zm(v.h,z);var Ae=z,nt=v.L;nt&&(Ae.I=nt),Ae.B&&(tc(Ae),_l(Ae)),v.g=z}else ap(v);0<y.i.length&&Il(y)}else ce[0]!="stop"&&ce[0]!="close"||Pi(y,7);else y.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?Pi(y,7):rc(y):ce[0]!="noop"&&y.l&&y.l.ta(ce),y.v=0)}}Vo(4)}catch{}}var hS=class{constructor(u,m){this.g=u,this.map=m}};function Bm(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Om(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Gm(u){return u.h?1:u.g?u.g.size:0}function ic(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function sc(u,m){u.g?u.g.add(m):u.h=m}function zm(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Bm.prototype.cancel=function(){if(this.i=Hm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Hm(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return D(u.i)}function mS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var m=[],y=u.length,v=0;v<y;v++)m.push(u[v]);return m}m=[],y=0;for(v in u)m[y++]=u[v];return m}function pS(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const v in u)m[y++]=v;return m}}}function Fm(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=pS(u),v=mS(u),P=v.length,L=0;L<P;L++)m.call(void 0,v[L],y&&y[L],u)}var Ym=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gS(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var v=u[y].indexOf("="),P=null;if(0<=v){var L=u[y].substring(0,v);P=u[y].substring(v+1)}else L=u[y];m(L,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Vi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Vi){this.h=u.h,vl(this,u.j),this.o=u.o,this.g=u.g,Tl(this,u.s),this.l=u.l;var m=u.i,y=new Bo;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Jm(this,y),this.m=u.m}else u&&(m=String(u).match(Ym))?(this.h=!1,vl(this,m[1]||"",!0),this.o=ko(m[2]||""),this.g=ko(m[3]||"",!0),Tl(this,m[4]),this.l=ko(m[5]||"",!0),Jm(this,m[6]||"",!0),this.m=ko(m[7]||"")):(this.h=!1,this.i=new Bo(null,this.h))}Vi.prototype.toString=function(){var u=[],m=this.j;m&&u.push(qo(m,Km,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(qo(m,Km,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(qo(y,y.charAt(0)=="/"?vS:_S,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",qo(y,ES)),u.join("")};function vn(u){return new Vi(u)}function vl(u,m,y){u.j=y?ko(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Tl(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Jm(u,m,y){m instanceof Bo?(u.i=m,AS(u.i,u.h)):(y||(m=qo(m,TS)),u.i=new Bo(m,u.h))}function we(u,m,y){u.i.set(m,y)}function El(u){return we(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ko(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function qo(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,yS),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function yS(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Km=/[#\/\?@]/g,_S=/[#\?:]/g,vS=/[#\?]/g,TS=/[#\?@]/g,ES=/#/g;function Bo(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Jn(u){u.g||(u.g=new Map,u.h=0,u.i&&gS(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=Bo.prototype,t.add=function(u,m){Jn(this),this.i=null,u=ds(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function Qm(u,m){Jn(u),m=ds(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function $m(u,m){return Jn(u),m=ds(u,m),u.g.has(m)}t.forEach=function(u,m){Jn(this),this.g.forEach(function(y,v){y.forEach(function(P){u.call(m,P,v,this)},this)},this)},t.na=function(){Jn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let v=0;v<m.length;v++){const P=u[v];for(let L=0;L<P.length;L++)y.push(m[v])}return y},t.V=function(u){Jn(this);let m=[];if(typeof u=="string")$m(this,u)&&(m=m.concat(this.g.get(ds(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},t.set=function(u,m){return Jn(this),this.i=null,u=ds(this,u),$m(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Xm(u,m,y){Qm(u,m),0<y.length&&(u.i=null,u.g.set(ds(u,m),D(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var v=m[y];const L=encodeURIComponent(String(v)),z=this.V(v);for(v=0;v<z.length;v++){var P=L;z[v]!==""&&(P+="="+encodeURIComponent(String(z[v]))),u.push(P)}}return this.i=u.join("&")};function ds(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function AS(u,m){m&&!u.j&&(Jn(u),u.i=null,u.g.forEach(function(y,v){var P=v.toLowerCase();v!=P&&(Qm(this,v),Xm(this,P,y))},u)),u.j=m}function SS(u,m){const y=new Uo;if(l.Image){const v=new Image;v.onload=_(Kn,y,"TestLoadImage: loaded",!0,m,v),v.onerror=_(Kn,y,"TestLoadImage: error",!1,m,v),v.onabort=_(Kn,y,"TestLoadImage: abort",!1,m,v),v.ontimeout=_(Kn,y,"TestLoadImage: timeout",!1,m,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=u}else m(!1)}function CS(u,m){const y=new Uo,v=new AbortController,P=setTimeout(()=>{v.abort(),Kn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:v.signal}).then(L=>{clearTimeout(P),L.ok?Kn(y,"TestPingServer: ok",!0,m):Kn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),Kn(y,"TestPingServer: error",!1,m)})}function Kn(u,m,y,v,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),v(y)}catch{}}function RS(){this.g=new lS}function IS(u,m,y){const v=y||"";try{Fm(u,function(P,L){let z=P;d(P)&&(z=Qu(P)),m.push(v+L+"="+encodeURIComponent(z))})}catch(P){throw m.push(v+"type="+encodeURIComponent("_badmap")),P}}function Al(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Al,$u),Al.prototype.g=function(){return new Sl(this.l,this.j)},Al.prototype.i=function(u){return function(){return u}}({});function Sl(u,m){dt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Sl,dt),t=Sl.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Go(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||l).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oo(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Go(this)),this.g&&(this.readyState=3,Go(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zm(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zm(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Oo(this):Go(this),this.readyState==3&&Zm(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Oo(this))},t.Qa=function(u){this.g&&(this.response=u,Oo(this))},t.ga=function(){this.g&&Oo(this)};function Oo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Go(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Go(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Wm(u){let m="";return B(u,function(y,v){m+=v,m+=":",m+=y,m+=`\r
`}),m}function oc(u,m,y){e:{for(v in y){var v=!1;break e}v=!0}v||(y=Wm(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):we(u,m,y))}function Ue(u){dt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ue,dt);var wS=/^https?$/i,xS=["POST","PUT"];t=Ue.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,y,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wu.g(),this.v=this.o?wm(this.o):wm(Wu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(L){jm(this,L);return}if(u=y||"",y=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var P in v)y.set(P,v[P]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const L of v.keys())y.set(L,v.get(L));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(y.keys()).find(L=>L.toLowerCase()=="content-type"),P=l.FormData&&u instanceof l.FormData,!(0<=Array.prototype.indexOf.call(xS,m,void 0))||v||P||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,z]of y)this.g.setRequestHeader(L,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{np(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){jm(this,L)}};function jm(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,ep(u),Cl(u)}function ep(u){u.A||(u.A=!0,Tt(u,"complete"),Tt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Tt(this,"complete"),Tt(this,"abort"),Cl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cl(this,!0)),Ue.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tp(this):this.bb())},t.bb=function(){tp(this)};function tp(u){if(u.h&&typeof r<"u"&&(!u.v[1]||Tn(u)!=4||u.Z()!=2)){if(u.u&&Tn(u)==4)Sm(u.Ea,0,u);else if(Tt(u,"readystatechange"),Tn(u)==4){u.h=!1;try{const z=u.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var v;if(v=z===0){var P=String(u.D).match(Ym)[1]||null;!P&&l.self&&l.self.location&&(P=l.self.location.protocol.slice(0,-1)),v=!wS.test(P?P.toLowerCase():"")}y=v}if(y)Tt(u,"complete"),Tt(u,"success");else{u.m=6;try{var L=2<Tn(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",ep(u)}}finally{Cl(u)}}}}function Cl(u,m){if(u.g){np(u);const y=u.g,v=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Tt(u,"ready");try{y.onreadystatechange=v}catch{}}}function np(u){u.I&&(l.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Tn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),rS(m)}};function ip(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function MS(u){const m={};u=(u.g&&2<=Tn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<u.length;v++){if(T(u[v]))continue;var y=N(u[v]);const P=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const L=m[P]||[];m[P]=L,L.push(y)}S(m,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zo(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function sp(u){this.Aa=0,this.i=[],this.j=new Uo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zo("baseRetryDelayMs",5e3,u),this.cb=zo("retryDelaySeedMs",1e4,u),this.Wa=zo("forwardChannelMaxRetries",2,u),this.wa=zo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Bm(u&&u.concurrentRequestLimit),this.Da=new RS,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sp.prototype,t.la=8,t.G=1,t.connect=function(u,m,y,v){Et(0),this.W=u,this.H=m||{},y&&v!==void 0&&(this.H.OSID=y,this.H.OAID=v),this.F=this.X,this.I=hp(this,null,this.W),Il(this)};function rc(u){if(op(u),u.G==3){var m=u.U++,y=vn(u.I);if(we(y,"SID",u.K),we(y,"RID",m),we(y,"TYPE","terminate"),Ho(u,y),m=new Yn(u,u.j,m),m.L=2,m.v=El(vn(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&l.Image&&(new Image().src=m.v,y=!0),y||(m.g=mp(m.j,null),m.g.ea(m.v)),m.F=Date.now(),_l(m)}dp(u)}function Rl(u){u.g&&(ac(u),u.g.cancel(),u.g=null)}function op(u){Rl(u),u.u&&(l.clearTimeout(u.u),u.u=null),wl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&l.clearTimeout(u.s),u.s=null)}function Il(u){if(!Om(u.h)&&!u.s){u.s=!0;var m=u.Ga;Q||te(),X||(Q(),X=!0),Ee.add(m,u),u.B=0}}function NS(u,m){return Gm(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Po(g(u.Ga,u,m),fp(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const P=new Yn(this,this.j,u);let L=this.o;if(this.S&&(L?(L=E(L),I(L,this.S)):L=this.S),this.m!==null||this.O||(P.H=L,L=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var v=this.i[y];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(m+=v,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=lp(this,P,m),y=vn(this.I),we(y,"RID",u),we(y,"CVER",22),this.D&&we(y,"X-HTTP-Session-Id",this.D),Ho(this,y),L&&(this.O?m="headers="+encodeURIComponent(String(Wm(L)))+"&"+m:this.m&&oc(y,this.m,L)),sc(this.h,P),this.Ua&&we(y,"TYPE","init"),this.P?(we(y,"$req",m),we(y,"SID","null"),P.T=!0,ec(P,y,null)):ec(P,y,m),this.G=2}}else this.G==3&&(u?rp(this,u):this.i.length==0||Om(this.h)||rp(this))};function rp(u,m){var y;m?y=m.l:y=u.U++;const v=vn(u.I);we(v,"SID",u.K),we(v,"RID",y),we(v,"AID",u.T),Ho(u,v),u.m&&u.o&&oc(v,u.m,u.o),y=new Yn(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=lp(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),sc(u.h,y),ec(y,v,m)}function Ho(u,m){u.H&&B(u.H,function(y,v){we(m,v,y)}),u.l&&Fm({},function(y,v){we(m,v,y)})}function lp(u,m,y){y=Math.min(u.i.length,y);var v=u.l?g(u.l.Na,u.l,u):null;e:{var P=u.i;let L=-1;for(;;){const z=["count="+y];L==-1?0<y?(L=P[0].g,z.push("ofs="+L)):L=0:z.push("ofs="+L);let Ae=!0;for(let nt=0;nt<y;nt++){let ce=P[nt].g;const ht=P[nt].map;if(ce-=L,0>ce)L=Math.max(0,P[nt].g-100),Ae=!1;else try{IS(ht,z,"req"+ce+"_")}catch{v&&v(ht)}}if(Ae){v=z.join("&");break e}}}return u=u.i.splice(0,y),m.D=u,v}function ap(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Q||te(),X||(Q(),X=!0),Ee.add(m,u),u.v=0}}function lc(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Po(g(u.Fa,u),fp(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,up(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Po(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),Rl(this),up(this))};function ac(u){u.A!=null&&(l.clearTimeout(u.A),u.A=null)}function up(u){u.g=new Yn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=vn(u.qa);we(m,"RID","rpc"),we(m,"SID",u.K),we(m,"AID",u.T),we(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&we(m,"TO",u.ja),we(m,"TYPE","xmlhttp"),Ho(u,m),u.m&&u.o&&oc(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=El(vn(m)),y.m=null,y.P=!0,Lm(y,u)}t.Za=function(){this.C!=null&&(this.C=null,Rl(this),lc(this),Et(19))};function wl(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function cp(u,m){var y=null;if(u.g==m){wl(u),ac(u),u.g=null;var v=2}else if(ic(u.h,m))y=m.D,zm(u.h,m),v=1;else return;if(u.G!=0){if(m.o)if(v==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var P=u.B;v=pl(),Tt(v,new bm(v,y)),Il(u)}else ap(u);else if(P=m.s,P==3||P==0&&0<m.X||!(v==1&&NS(u,m)||v==2&&lc(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),P){case 1:Pi(u,5);break;case 4:Pi(u,10);break;case 3:Pi(u,6);break;default:Pi(u,2)}}}function fp(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function Pi(u,m){if(u.j.info("Error code "+m),m==2){var y=g(u.fb,u),v=u.Xa;const P=!v;v=new Vi(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||vl(v,"https"),El(v),P?SS(v.toString(),y):CS(v.toString(),y)}else Et(2);u.G=0,u.l&&u.l.sa(m),dp(u),op(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function dp(u){if(u.G=0,u.ka=[],u.l){const m=Hm(u.h);(m.length!=0||u.i.length!=0)&&(U(u.ka,m),U(u.ka,u.i),u.h.i.length=0,D(u.i),u.i.length=0),u.l.ra()}}function hp(u,m,y){var v=y instanceof Vi?vn(y):new Vi(y);if(v.g!="")m&&(v.g=m+"."+v.g),Tl(v,v.s);else{var P=l.location;v=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;var L=new Vi(null);v&&vl(L,v),m&&(L.g=m),P&&Tl(L,P),y&&(L.l=y),v=L}return y=u.D,m=u.ya,y&&m&&we(v,y,m),we(v,"VER",u.la),Ho(u,v),v}function mp(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ue(new Al({eb:y})):new Ue(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pp(){}t=pp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xl(){}xl.prototype.g=function(u,m){return new Pt(u,m)};function Pt(u,m){dt.call(this),this.g=new sp(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!T(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!T(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new hs(this)}w(Pt,dt),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){rc(this.g)},Pt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=Qu(u),u=y);m.i.push(new hS(m.Ya++,u)),m.G==3&&Il(m)},Pt.prototype.N=function(){this.g.l=null,delete this.j,rc(this.g),delete this.g,Pt.aa.N.call(this)};function gp(u){Xu.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}w(gp,Xu);function yp(){Zu.call(this),this.status=1}w(yp,Zu);function hs(u){this.g=u}w(hs,pp),hs.prototype.ua=function(){Tt(this.g,"a")},hs.prototype.ta=function(u){Tt(this.g,new gp(u))},hs.prototype.sa=function(u){Tt(this.g,new yp)},hs.prototype.ra=function(){Tt(this.g,"b")},xl.prototype.createWebChannel=xl.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,eA=function(){return new xl},jE=function(){return pl()},WE=Di,gd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gl.NO_ERROR=0,gl.TIMEOUT=8,gl.HTTP_ERROR=6,ma=gl,Vm.COMPLETE="complete",ZE=Vm,xm.EventType=bo,bo.OPEN="a",bo.CLOSE="b",bo.ERROR="c",bo.MESSAGE="d",dt.prototype.listen=dt.prototype.K,sr=xm,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,XE=Ue}).apply(typeof Jl<"u"?Jl:typeof self<"u"?self:typeof window<"u"?window:{});const T_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new HE("@firebase/firestore");function Wo(){return ns.logLevel}function Y(t,...e){if(ns.logLevel<=ae.DEBUG){const n=e.map(Hh);ns.debug(`Firestore (${wo}): ${t}`,...n)}}function On(t,...e){if(ns.logLevel<=ae.ERROR){const n=e.map(Hh);ns.error(`Firestore (${wo}): ${t}`,...n)}}function lo(t,...e){if(ns.logLevel<=ae.WARN){const n=e.map(Hh);ns.warn(`Firestore (${wo}): ${t}`,...n)}}function Hh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${wo}) INTERNAL ASSERTION FAILED: `+t;throw On(e),new Error(e)}function qe(t,e){t||ee()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Io{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class Kb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Qb{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0);let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qi,e.enqueueRetryable(()=>s(this.currentUser))};const r=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),r())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qi)}},0),r()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(qe(typeof i.accessToken=="string"),new tA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string"),new gt(e)}}class $b{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Xb{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new $b(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wb{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){qe(this.o===void 0);const i=o=>{o.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const r=o.token!==this.R;return this.R=o.token,Y("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string"),this.R=n.token,new Zb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=jb(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%e.length))}return i}}function de(t,e){return t<e?-1:t>e?1:0}function ao(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new tt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new tt(0,0))}static max(){return new Z(new tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,i){n===void 0?n=0:n>e.length&&ee(),i===void 0?i=e.length-n:i>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return zr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zr?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=e.get(s),r=n.get(s);if(o<r)return-1;if(o>r)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Pe extends zr{construct(e,n,i){return new Pe(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new J(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const t2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends zr{construct(e,n,i){return new _t(e,n,i)}static isValidIdentifier(e){return t2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new _t(["__name__"])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new J(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let r=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new J(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new J(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,s+=2}else l==="`"?(r=!r,s++):l!=="."||r?(i+=l,s++):(o(),s++)}if(o(),r)throw new J(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(n)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(Pe.fromString(e))}static fromName(e){return new K(Pe.fromString(e).popFirst(5))}static empty(){return new K(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new Pe(e.slice()))}}function n2(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(i===1e9?new tt(n+1,0):new tt(n,i));return new Ci(s,K.empty(),e)}function i2(t){return new Ci(t.readTime,t.key,-1)}class Ci{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ci(Z.min(),K.empty(),-1)}static max(){return new Ci(Z.max(),K.empty(),-1)}}function s2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class r2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fh(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==o2)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,i)=>{n(e)})}static reject(e){return new O((n,i)=>{i(e)})}static waitFor(e){return new O((n,i)=>{let s=0,o=0,r=!1;e.forEach(l=>{++s,l.next(()=>{++o,r&&o===s&&n()},c=>i(c))}),r=!0,o===s&&n()})}static or(e){let n=O.resolve(!1);for(const i of e)n=n.next(s=>s?O.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new O((i,s)=>{const o=e.length,r=new Array(o);let l=0;for(let c=0;c<o;c++){const d=c;n(e[d]).next(h=>{r[d]=h,++l,l===o&&i(r)},h=>s(h))}})}static doWhile(e,n){return new O((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function l2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ol(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Yh.oe=-1;function Nu(t){return t==null}function tu(t){return t===0&&1/t==-1/0}function a2(t){return typeof t=="number"&&Number.isInteger(t)&&!tu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function rl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kl(this.root,e,this.comparator,!0)}}class Kl{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??st.RED,this.left=s??st.EMPTY,this.right=o??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new st(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return st.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,i,s,o){return this}insert(e,n,i){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new A_(this.data.getIterator())}getIteratorFrom(e){return new A_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ut(this.comparator);return n.data=e,n}}class A_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new li([])}unionWith(e){let n=new ut(_t.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new li(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ao(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new iA("Invalid base64 string: "+o):o}}(e);return new ct(n)}static fromUint8Array(e){const n=function(s){let o="";for(let r=0;r<s.length;++r)o+=String.fromCharCode(s[r]);return o}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const u2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(t){if(qe(!!t),typeof t=="string"){let e=0;const n=u2.exec(t);if(qe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function is(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Kh(t){const e=t.mapValue.fields.__previous_value__;return Jh(e)?Kh(e):e}function Hr(t){const e=Ri(t.mapValue.fields.__local_write_time__.timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n,i,s,o,r,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=r,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d}}class Fr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Fr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Fr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql={mapValue:{}};function ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jh(t)?4:d2(t)?9007199254740991:f2(t)?10:11:ee()}function gn(t,e){if(t===e)return!0;const n=ss(t);if(n!==ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hr(t).isEqual(Hr(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const r=Ri(s.timestampValue),l=Ri(o.timestampValue);return r.seconds===l.seconds&&r.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return is(s.bytesValue).isEqual(is(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return Be(s.geoPointValue.latitude)===Be(o.geoPointValue.latitude)&&Be(s.geoPointValue.longitude)===Be(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Be(s.integerValue)===Be(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const r=Be(s.doubleValue),l=Be(o.doubleValue);return r===l?tu(r)===tu(l):isNaN(r)&&isNaN(l)}return!1}(t,e);case 9:return ao(t.arrayValue.values||[],e.arrayValue.values||[],gn);case 10:case 11:return function(s,o){const r=s.mapValue.fields||{},l=o.mapValue.fields||{};if(E_(r)!==E_(l))return!1;for(const c in r)if(r.hasOwnProperty(c)&&(l[c]===void 0||!gn(r[c],l[c])))return!1;return!0}(t,e);default:return ee()}}function Yr(t,e){return(t.values||[]).find(n=>gn(n,e))!==void 0}function uo(t,e){if(t===e)return 0;const n=ss(t),i=ss(e);if(n!==i)return de(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(o,r){const l=Be(o.integerValue||o.doubleValue),c=Be(r.integerValue||r.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return S_(t.timestampValue,e.timestampValue);case 4:return S_(Hr(t),Hr(e));case 5:return de(t.stringValue,e.stringValue);case 6:return function(o,r){const l=is(o),c=is(r);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,r){const l=o.split("/"),c=r.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=de(l[d],c[d]);if(h!==0)return h}return de(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,r){const l=de(Be(o.latitude),Be(r.latitude));return l!==0?l:de(Be(o.longitude),Be(r.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return C_(t.arrayValue,e.arrayValue);case 10:return function(o,r){var l,c,d,h;const p=o.fields||{},g=r.fields||{},_=(l=p.value)===null||l===void 0?void 0:l.arrayValue,w=(c=g.value)===null||c===void 0?void 0:c.arrayValue,D=de(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return D!==0?D:C_(_,w)}(t.mapValue,e.mapValue);case 11:return function(o,r){if(o===Ql.mapValue&&r===Ql.mapValue)return 0;if(o===Ql.mapValue)return 1;if(r===Ql.mapValue)return-1;const l=o.fields||{},c=Object.keys(l),d=r.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const g=de(c[p],h[p]);if(g!==0)return g;const _=uo(l[c[p]],d[h[p]]);if(_!==0)return _}return de(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ee()}}function S_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Ri(t),i=Ri(e),s=de(n.seconds,i.seconds);return s!==0?s:de(n.nanos,i.nanos)}function C_(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=uo(n[s],i[s]);if(o)return o}return de(n.length,i.length)}function co(t){return yd(t)}function yd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Ri(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return is(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=yd(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const r of i)o?o=!1:s+=",",s+=`${r}:${yd(n.fields[r])}`;return s+"}"}(t.mapValue):ee()}function R_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _d(t){return!!t&&"integerValue"in t}function Qh(t){return!!t&&"arrayValue"in t}function I_(t){return!!t&&"nullValue"in t}function w_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wc(t){return!!t&&"mapValue"in t}function f2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ar(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return rl(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Ar(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ar(t.arrayValue.values[n]);return e}return Object.assign({},t)}function d2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Wc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ar(n)}setAll(e){let n=_t.emptyPath(),i={},s=[];e.forEach((r,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,i,s),i={},s=[],n=l.popLast()}r?i[l.lastSegment()]=Ar(r):s.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());Wc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Wc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){rl(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new cn(Ar(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n,i,s,o,r,l){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=r,this.documentState=l}static newInvalidDocument(e){return new yt(e,0,Z.min(),Z.min(),Z.min(),cn.empty(),0)}static newFoundDocument(e,n,i,s){return new yt(e,1,n,Z.min(),i,s,0)}static newNoDocument(e,n){return new yt(e,2,n,Z.min(),Z.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new yt(e,3,n,Z.min(),Z.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.position=e,this.inclusive=n}}function x_(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],r=t.position[s];if(o.field.isKeyField()?i=K.comparator(K.fromName(r.referenceValue),n.key):i=uo(r,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function M_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n="asc"){this.field=e,this.dir=n}}function h2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{}class Ke extends sA{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new p2(e,n,i):n==="array-contains"?new _2(e,i):n==="in"?new v2(e,i):n==="not-in"?new T2(e,i):n==="array-contains-any"?new E2(e,i):new Ke(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new g2(e,i):new y2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(uo(n,this.value)):n!==null&&ss(this.value)===ss(n)&&this.matchesComparison(uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ln extends sA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ln(e,n)}matches(e){return oA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function oA(t){return t.op==="and"}function rA(t){return m2(t)&&oA(t)}function m2(t){for(const e of t.filters)if(e instanceof ln)return!1;return!0}function vd(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+co(t.value);if(rA(t))return t.filters.map(e=>vd(e)).join(",");{const e=t.filters.map(n=>vd(n)).join(",");return`${t.op}(${e})`}}function lA(t,e){return t instanceof Ke?function(i,s){return s instanceof Ke&&i.op===s.op&&i.field.isEqual(s.field)&&gn(i.value,s.value)}(t,e):t instanceof ln?function(i,s){return s instanceof ln&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,r,l)=>o&&lA(r,s.filters[l]),!0):!1}(t,e):void ee()}function aA(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${co(n.value)}`}(t):t instanceof ln?function(n){return n.op.toString()+" {"+n.getFilters().map(aA).join(" ,")+"}"}(t):"Filter"}class p2 extends Ke{constructor(e,n,i){super(e,n,i),this.key=K.fromName(i.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class g2 extends Ke{constructor(e,n){super(e,"in",n),this.keys=uA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class y2 extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=uA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function uA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>K.fromName(i.referenceValue))}class _2 extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qh(n)&&Yr(n.arrayValue,this.value)}}class v2 extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yr(this.value.arrayValue,n)}}class T2 extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Yr(this.value.arrayValue,n)}}class E2 extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Yr(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n=null,i=[],s=[],o=null,r=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=r,this.endAt=l,this.ue=null}}function N_(t,e=null,n=[],i=[],s=null,o=null,r=null){return new A2(t,e,n,i,s,o,r)}function $h(t){const e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>vd(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Nu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>co(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>co(i)).join(",")),e.ue=n}return e.ue}function Xh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!h2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!M_(t.startAt,e.startAt)&&M_(t.endAt,e.endAt)}function Td(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n=null,i=[],s=[],o=null,r="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=r,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function S2(t,e,n,i,s,o,r,l){return new ll(t,e,n,i,s,o,r,l)}function cA(t){return new ll(t)}function D_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fA(t){return t.collectionGroup!==null}function Sr(t){const e=le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(r){let l=new ut(_t.comparator);return r.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new iu(o,i))}),n.has(_t.keyField().canonicalString())||e.ce.push(new iu(_t.keyField(),i))}return e.ce}function pn(t){const e=le(t);return e.le||(e.le=C2(e,Sr(t))),e.le}function C2(t,e){if(t.limitType==="F")return N_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new iu(s.field,o)});const n=t.endAt?new nu(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new nu(t.startAt.position,t.startAt.inclusive):null;return N_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Ed(t,e){const n=t.filters.concat([e]);return new ll(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ad(t,e,n){return new ll(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Du(t,e){return Xh(pn(t),pn(e))&&t.limitType===e.limitType}function dA(t){return`${$h(pn(t))}|lt:${t.limitType}`}function Ts(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>aA(s)).join(", ")}]`),Nu(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>co(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>co(s)).join(",")),`Target(${i})`}(pn(t))}; limitType=${t.limitType})`}function bu(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):K.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of Sr(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(r,l,c){const d=x_(r,l,c);return r.inclusive?d<=0:d<0}(i.startAt,Sr(i),s)||i.endAt&&!function(r,l,c){const d=x_(r,l,c);return r.inclusive?d>=0:d>0}(i.endAt,Sr(i),s))}(t,e)}function R2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hA(t){return(e,n)=>{let i=!1;for(const s of Sr(t)){const o=I2(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function I2(t,e,n){const i=t.field.isKeyField()?K.comparator(e.key,n.key):function(o,r,l){const c=r.data.field(o),d=l.data.field(o);return c!==null&&d!==null?uo(c,d):ee()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){rl(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return nA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=new ze(K.comparator);function Ii(){return w2}const mA=new ze(K.comparator);function or(...t){let e=mA;for(const n of t)e=e.insert(n.key,n);return e}function x2(t){let e=mA;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Gi(){return Cr()}function pA(){return Cr()}function Cr(){return new xo(t=>t.toString(),(t,e)=>t.isEqual(e))}const M2=new ut(K.comparator);function ue(...t){let e=M2;for(const n of t)e=e.add(n);return e}const N2=new ut(de);function D2(){return N2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tu(e)?"-0":e}}function gA(t){return{integerValue:""+t}}function b2(t,e){return a2(e)?gA(e):Zh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(){this._=void 0}}function V2(t,e,n){return t instanceof Sd?function(s,o){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Jh(o)&&(o=Kh(o)),o&&(r.fields.__previous_value__=o),{mapValue:r}}(n,e):t instanceof su?yA(t,e):t instanceof ou?_A(t,e):function(s,o){const r=U2(s,o),l=b_(r)+b_(s.Pe);return _d(r)&&_d(s.Pe)?gA(l):Zh(s.serializer,l)}(t,e)}function P2(t,e,n){return t instanceof su?yA(t,e):t instanceof ou?_A(t,e):n}function U2(t,e){return t instanceof Cd?function(i){return _d(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Sd extends Vu{}class su extends Vu{constructor(e){super(),this.elements=e}}function yA(t,e){const n=vA(e);for(const i of t.elements)n.some(s=>gn(s,i))||n.push(i);return{arrayValue:{values:n}}}class ou extends Vu{constructor(e){super(),this.elements=e}}function _A(t,e){let n=vA(e);for(const i of t.elements)n=n.filter(s=>!gn(s,i));return{arrayValue:{values:n}}}class Cd extends Vu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function b_(t){return Be(t.integerValue||t.doubleValue)}function vA(t){return Qh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function L2(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof su&&s instanceof su||i instanceof ou&&s instanceof ou?ao(i.elements,s.elements,gn):i instanceof Cd&&s instanceof Cd?gn(i.Pe,s.Pe):i instanceof Sd&&s instanceof Sd}(t.transform,e.transform)}class $i{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $i}static exists(e){return new $i(void 0,e)}static updateTime(e){return new $i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wh{}function TA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new q2(t.key,$i.none()):new jh(t.key,t.data,$i.none());{const n=t.data,i=cn.empty();let s=new ut(_t.comparator);for(let o of e.fields)if(!s.has(o)){let r=n.field(o);r===null&&o.length>1&&(o=o.popLast(),r=n.field(o)),r===null?i.delete(o):i.set(o,r),s=s.add(o)}return new Pu(t.key,i,new li(s.toArray()),$i.none())}}function k2(t,e,n){t instanceof jh?function(s,o,r){const l=s.value.clone(),c=P_(s.fieldTransforms,o,r.transformResults);l.setAll(c),o.convertToFoundDocument(r.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Pu?function(s,o,r){if(!pa(s.precondition,o))return void o.convertToUnknownDocument(r.version);const l=P_(s.fieldTransforms,o,r.transformResults),c=o.data;c.setAll(EA(s)),c.setAll(l),o.convertToFoundDocument(r.version,c).setHasCommittedMutations()}(t,e,n):function(s,o,r){o.convertToNoDocument(r.version).setHasCommittedMutations()}(0,e,n)}function Rr(t,e,n,i){return t instanceof jh?function(o,r,l,c){if(!pa(o.precondition,r))return l;const d=o.value.clone(),h=U_(o.fieldTransforms,c,r);return d.setAll(h),r.convertToFoundDocument(r.version,d).setHasLocalMutations(),null}(t,e,n,i):t instanceof Pu?function(o,r,l,c){if(!pa(o.precondition,r))return l;const d=U_(o.fieldTransforms,c,r),h=r.data;return h.setAll(EA(o)),h.setAll(d),r.convertToFoundDocument(r.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,i):function(o,r,l){return pa(o.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):l}(t,e,n)}function V_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ao(i,s,(o,r)=>L2(o,r))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jh extends Wh{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Pu extends Wh{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function EA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function P_(t,e,n){const i=new Map;qe(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],r=o.transform,l=e.data.field(o.field);i.set(o.field,P2(r,l,n[s]))}return i}function U_(t,e,n){const i=new Map;for(const s of t){const o=s.transform,r=n.data.field(s.field);i.set(s.field,V2(o,r,e))}return i}class q2 extends Wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&k2(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Rr(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Rr(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=pA();return this.mutations.forEach(s=>{const o=e.get(s.key),r=o.overlayedDocument;let l=this.applyToLocalView(r,o.mutatedFields);l=n.has(s.key)?null:l;const c=TA(r,l);c!==null&&i.set(s.key,c),r.isValidDocument()||r.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&ao(this.mutations,e.mutations,(n,i)=>V_(n,i))&&ao(this.baseMutations,e.baseMutations,(n,i)=>V_(n,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,re;function AA(t){if(t===void 0)return On("GRPC error has no .code"),G.UNKNOWN;switch(t){case He.OK:return G.OK;case He.CANCELLED:return G.CANCELLED;case He.UNKNOWN:return G.UNKNOWN;case He.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case He.INTERNAL:return G.INTERNAL;case He.UNAVAILABLE:return G.UNAVAILABLE;case He.UNAUTHENTICATED:return G.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case He.NOT_FOUND:return G.NOT_FOUND;case He.ALREADY_EXISTS:return G.ALREADY_EXISTS;case He.PERMISSION_DENIED:return G.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case He.ABORTED:return G.ABORTED;case He.OUT_OF_RANGE:return G.OUT_OF_RANGE;case He.UNIMPLEMENTED:return G.UNIMPLEMENTED;case He.DATA_LOSS:return G.DATA_LOSS;default:return ee()}}(re=He||(He={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=new Ki([4294967295,4294967295],0);function L_(t){const e=z2().encode(t),n=new $E;return n.update(e),new Uint8Array(n.digest())}function k_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ki([n,i],0),new Ki([s,o],0)]}class em{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new rr(`Invalid padding: ${n}`);if(i<0)throw new rr(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new rr(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new rr(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ki.fromNumber(this.Ie)}Ee(e,n,i){let s=e.add(n.multiply(Ki.fromNumber(i)));return s.compare(H2)===1&&(s=new Ki([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=L_(e),[i,s]=k_(n);for(let o=0;o<this.hashCount;o++){const r=this.Ee(i,s,o);if(!this.de(r))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),r=new em(o,s,n);return i.forEach(l=>r.insert(l)),r}insert(e){if(this.Ie===0)return;const n=L_(e),[i,s]=k_(n);for(let o=0;o<this.hashCount;o++){const r=this.Ee(i,s,o);this.Ae(r)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class rr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,al.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Uu(Z.min(),s,new ze(de),Ii(),ue())}}class al{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new al(i,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n,i,s){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=s}}class SA{constructor(e,n){this.targetId=e,this.me=n}}class CA{constructor(e,n,i=ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class q_{constructor(){this.fe=0,this.ge=O_(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),n=ue(),i=ue();return this.ge.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:ee()}}),new al(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=O_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class F2{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ii(),this.qe=B_(),this.Qe=new ze(de)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,i=e.me.count,s=this.Je(n);if(s){const o=s.target;if(Td(o))if(i===0){const r=new K(o.path);this.Ue(n,r,yt.newNoDocument(r,Z.min()))}else qe(i===1);else{const r=this.Ye(n);if(r!==i){const l=this.Ze(e),c=l?this.Xe(l,e,r):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let r,l;try{r=is(i).toUint8Array()}catch(c){if(c instanceof iA)return lo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new em(r,s,o)}catch(c){return lo(c instanceof rr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const r=this.Le.tt(),l=`projects/${r.projectId}/databases/${r.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,o,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((o,r)=>{const l=this.Je(r);if(l){if(o.current&&Td(l.target)){const c=new K(l.target.path);this.ke.get(c)!==null||this.it(r,c)||this.Ue(r,c,yt.newNoDocument(c,e))}o.be&&(n.set(r,o.ve()),o.Ce())}});let i=ue();this.qe.forEach((o,r)=>{let l=!0;r.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.ke.forEach((o,r)=>r.setReadTime(e));const s=new Uu(e,n,this.Qe,this.ke,i);return this.ke=Ii(),this.qe=B_(),this.Qe=new ze(de),s}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new q_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ut(de),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new q_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function B_(){return new ze(K.comparator)}function O_(){return new ze(K.comparator)}const Y2={asc:"ASCENDING",desc:"DESCENDING"},J2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K2={and:"AND",or:"OR"};class Q2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Rd(t,e){return t.useProto3Json||Nu(e)?e:{value:e}}function Id(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ks(t){return qe(!!t),Z.fromTimestamp(function(n){const i=Ri(n);return new tt(i.seconds,i.nanos)}(t))}function IA(t,e){return wd(t,e).canonicalString()}function wd(t,e){const n=function(s){return new Pe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function wA(t){const e=Pe.fromString(t);return qe(bA(e)),e}function jc(t,e){const n=wA(e);if(n.get(1)!==t.databaseId.projectId)throw new J(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(MA(n))}function xA(t,e){return IA(t.databaseId,e)}function $2(t){const e=wA(t);return e.length===4?Pe.emptyPath():MA(e)}function G_(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MA(t){return qe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function X2(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(d,h){return d.useProto3Json?(qe(h===void 0||typeof h=="string"),ct.fromBase64String(h||"")):(qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ct.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),r=e.targetChange.cause,l=r&&function(d){const h=d.code===void 0?G.UNKNOWN:AA(d.code);return new J(h,d.message||"")}(r);n=new CA(i,s,o,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=jc(t,i.document.name),o=Ks(i.document.updateTime),r=i.document.createTime?Ks(i.document.createTime):Z.min(),l=new cn({mapValue:{fields:i.document.fields}}),c=yt.newFoundDocument(s,o,r,l),d=i.targetIds||[],h=i.removedTargetIds||[];n=new ga(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=jc(t,i.document),o=i.readTime?Ks(i.readTime):Z.min(),r=yt.newNoDocument(s,o),l=i.removedTargetIds||[];n=new ga([],l,r.key,r)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=jc(t,i.document),o=i.removedTargetIds||[];n=new ga([],o,s,null)}else{if(!("filter"in e))return ee();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,r=new G2(s,o),l=i.targetId;n=new SA(l,r)}}return n}function Z2(t,e){return{documents:[xA(t,e.path)]}}function W2(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=xA(t,s);const o=function(d){if(d.length!==0)return DA(ln.create(d,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const r=function(d){if(d.length!==0)return d.map(h=>function(g){return{field:Es(g.field),direction:tV(g.dir)}}(h))}(e.orderBy);r&&(n.structuredQuery.orderBy=r);const l=Rd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function j2(t){let e=$2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){qe(i===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){const g=NA(p);return g instanceof ln&&rA(g)?g.getFilters():[g]}(n.where));let r=[];n.orderBy&&(r=function(p){return p.map(g=>function(w){return new iu(As(w.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Nu(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,_=p.values||[];return new nu(_,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,_=p.values||[];return new nu(_,g)}(n.endAt)),S2(e,s,r,o,l,"F",c,d)}function eV(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function NA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=As(n.unaryFilter.field);return Ke.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=As(n.unaryFilter.field);return Ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=As(n.unaryFilter.field);return Ke.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=As(n.unaryFilter.field);return Ke.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(As(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ln.create(n.compositeFilter.filters.map(i=>NA(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function tV(t){return Y2[t]}function nV(t){return J2[t]}function iV(t){return K2[t]}function Es(t){return{fieldPath:t.canonicalString()}}function As(t){return _t.fromServerFormat(t.fieldPath)}function DA(t){return t instanceof Ke?function(n){if(n.op==="=="){if(w_(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NAN"}};if(I_(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(w_(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NAN"}};if(I_(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Es(n.field),op:nV(n.op),value:n.value}}}(t):t instanceof ln?function(n){const i=n.getFilters().map(s=>DA(s));return i.length===1?i[0]:{compositeFilter:{op:iV(n.op),filters:i}}}(t):ee()}function bA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,i,s,o=Z.min(),r=Z.min(),l=ct.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e){this.ct=e}}function oV(t){const e=j2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ad(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(){this.un=new lV}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Ci.min())}updateCollectionGroup(e,n,i){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class lV{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new ut(Pe.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new ut(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fo(0)}static kn(){return new fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(){this.changes=new xo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?O.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Rr(i.mutation,s,li.empty(),tt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ue()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ue()){const s=Gi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let r=or();return o.forEach((l,c)=>{r=r.insert(l,c.overlayedDocument)}),r}))}getOverlayedDocuments(e,n){const i=Gi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ue()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((r,l)=>{n.set(r,l)})})}computeViews(e,n,i,s){let o=Ii();const r=Cr(),l=function(){return Cr()}();return n.forEach((c,d)=>{const h=i.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Pu)?o=o.insert(d.key,d):h!==void 0?(r.set(d.key,h.mutation.getFieldMask()),Rr(h.mutation,d,h.mutation.getFieldMask(),tt.now())):r.set(d.key,li.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((d,h)=>r.set(d,h)),n.forEach((d,h)=>{var p;return l.set(d,new uV(h,(p=r.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const i=Cr();let s=new ze((r,l)=>r-l),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>{for(const l of r)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=i.get(c)||li.empty();h=l.applyToLocalView(d,h),i.set(c,h);const p=(s.get(l.batchId)||ue()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const r=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,p=pA();h.forEach(g=>{if(!o.has(g)){const _=TA(n.get(g),i.get(g));_!==null&&p.set(g,_),o=o.add(g)}}),r.push(this.documentOverlayCache.saveOverlays(e,d,p))}return O.waitFor(r)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(r){return K.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const r=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):O.resolve(Gi());let l=-1,c=o;return r.next(d=>O.forEach(d,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),o.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,c,d,ue())).next(h=>({batchId:l,changes:x2(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(i=>{let s=or();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let r=or();return this.indexManager.getCollectionParents(e,o).next(l=>O.forEach(l,c=>{const d=function(p,g){return new ll(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,i,s).next(h=>{h.forEach((p,g)=>{r=r.insert(p,g)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(r=>(o=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(r=>{o.forEach((c,d)=>{const h=d.getKey();r.get(h)===null&&(r=r.insert(h,yt.newInvalidDocument(h)))});let l=or();return r.forEach((c,d)=>{const h=o.get(c);h!==void 0&&Rr(h.mutation,d,li.empty(),tt.now()),bu(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ks(s.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:oV(s.bundledQuery),readTime:Ks(s.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(){this.overlays=new ze(K.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Gi();return O.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.ht(e,n,o)}),O.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.Ir.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),O.resolve()}getOverlaysForCollection(e,n,i){const s=Gi(),o=n.length+1,r=new K(n.child("")),l=this.overlays.getIteratorFrom(r);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&c.largestBatchId>i&&s.set(c.getKey(),c)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new ze((d,h)=>d-h);const r=this.overlays.getIterator();for(;r.hasNext();){const d=r.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let h=o.get(d.largestBatchId);h===null&&(h=Gi(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Gi(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return O.resolve(l)}ht(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const r=this.Ir.get(s.largestBatchId).delete(i.key);this.Ir.set(s.largestBatchId,r)}this.overlays=this.overlays.insert(i.key,new O2(n,i));let o=this.Ir.get(n);o===void 0&&(o=ue(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(){this.Tr=new ut(Ze.Er),this.dr=new ut(Ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Ze(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Ze(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new K(new Pe([])),i=new Ze(n,e),s=new Ze(n,e+1),o=[];return this.dr.forEachInRange([i,s],r=>{this.Vr(r),o.push(r.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new Pe([])),i=new Ze(n,e),s=new Ze(n,e+1);let o=ue();return this.dr.forEachInRange([i,s],r=>{o=o.add(r.key)}),o}containsKey(e){const n=new Ze(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ze{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||de(e.wr,n.wr)}static Ar(e,n){return de(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ut(Ze.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new B2(o,n,i,s);this.mutationQueue.push(r);for(const l of s)this.br=this.br.add(new Ze(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(r)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.vr(i),o=s<0?0:s;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ze(n,0),s=new Ze(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,s],r=>{const l=this.Dr(r.wr);o.push(l)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ut(de);return n.forEach(s=>{const o=new Ze(s,0),r=new Ze(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,r],l=>{i=i.add(l.wr)})}),O.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;K.isDocumentKey(o)||(o=o.child(""));const r=new Ze(new K(o),0);let l=new ut(de);return this.br.forEachWhile(c=>{const d=c.key.path;return!!i.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.wr)),!0)},r),O.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(i=>{const s=this.Dr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){qe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return O.forEach(n.mutations,s=>{const o=new Ze(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Ze(n,0),s=this.br.firstAfterOrEqual(i);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.Mr=e,this.docs=function(){return new ze(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,r=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:r}),this.size+=r-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return O.resolve(i?i.document.mutableCopy():yt.newInvalidDocument(n))}getEntries(e,n){let i=Ii();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():yt.newInvalidDocument(s))}),O.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Ii();const r=n.path,l=new K(r.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!r.isPrefixOf(d.path))break;d.path.length>r.length+1||s2(i2(h),i)<=0||(s.has(h.key)||bu(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,n,i,s){ee()}Or(e,n){return O.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new gV(this)}getSize(e){return O.resolve(this.size)}}class gV extends aV{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(i)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e){this.persistence=e,this.Nr=new xo(n=>$h(n),Xh),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new tm,this.targetCount=0,this.kr=fo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,s)=>n(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.Nr.forEach((r,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.Nr.delete(r),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),O.waitFor(o).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return O.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),O.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(r=>{o.push(s.markPotentiallyOrphaned(e,r))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return O.resolve(i)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Yh(0),this.Kr=!1,this.Kr=!0,this.$r=new hV,this.referenceDelegate=e(this),this.Ur=new yV(this),this.indexManager=new rV,this.remoteDocumentCache=function(s){return new pV(s)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new sV(n),this.Gr=new fV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new mV(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){Y("MemoryPersistence","Starting transaction:",e);const s=new vV(this.Qr.next());return this.referenceDelegate.zr(),i(s).next(o=>this.referenceDelegate.jr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Hr(e,n){return O.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class vV extends r2{constructor(e){super(),this.currentSequenceNumber=e}}class nm{constructor(e){this.persistence=e,this.Jr=new tm,this.Yr=null}static Zr(e){return new nm(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),O.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,i=>{const s=K.fromPath(i);return this.ei(e,s).next(o=>{o||n.removeEntry(s,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=s}static Wi(e,n){let i=ue(),s=ue();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new im(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ND()?8:l2(xD())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.Yi(e,n).next(r=>{o.result=r}).next(()=>{if(!o.result)return this.Zi(e,n,s,i).next(r=>{o.result=r})}).next(()=>{if(o.result)return;const r=new TV;return this.Xi(e,n,r).next(l=>{if(o.result=l,this.zi)return this.es(e,n,r,l.size)})}).next(()=>o.result)}es(e,n,i,s){return i.documentReadCount<this.ji?(Wo()<=ae.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Ts(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Wo()<=ae.DEBUG&&Y("QueryEngine","Query:",Ts(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Hi*s?(Wo()<=ae.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Ts(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pn(n))):O.resolve())}Yi(e,n){if(D_(n))return O.resolve(null);let i=pn(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ad(n,null,"F"),i=pn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const r=ue(...o);return this.Ji.getDocuments(e,r).next(l=>this.indexManager.getMinOffset(e,i).next(c=>{const d=this.ts(n,l);return this.ns(n,d,r,c.readTime)?this.Yi(e,Ad(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,i,s){return D_(n)||s.isEqual(Z.min())?O.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const r=this.ts(n,o);return this.ns(n,r,i,s)?O.resolve(null):(Wo()<=ae.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ts(n)),this.rs(e,r,n,n2(s,-1)).next(l=>l))})}ts(e,n){let i=new ut(hA(e));return n.forEach((s,o)=>{bu(e,o)&&(i=i.add(o))}),i}ns(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,n,i){return Wo()<=ae.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Ts(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ci.min(),i)}rs(e,n,i,s){return this.Ji.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(r=>{o=o.insert(r.key,r)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,n,i,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new ze(de),this._s=new xo(o=>$h(o),Xh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function SV(t,e,n,i){return new AV(t,e,n,i)}async function VA(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const r=[],l=[];let c=ue();for(const d of s){r.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of o){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(i,c).next(d=>({hs:d,removedBatchIds:r,addedBatchIds:l}))})})}function PA(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function CV(t,e){const n=le(t),i=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const r=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((h,p)=>{const g=s.get(p);if(!g)return;l.push(n.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(o,h.addedDocuments,p)));let _=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(ct.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,i)),s=s.insert(p,_),function(D,U,C){return D.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(g,_,h)&&l.push(n.Ur.updateTargetData(o,_))});let c=Ii(),d=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),l.push(RV(o,r,e.documentUpdates).next(h=>{c=h.Ps,d=h.Is})),!i.isEqual(Z.min())){const h=n.Ur.getLastRemoteSnapshotVersion(o).next(p=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(h)}return O.waitFor(l).next(()=>r.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,d)).next(()=>c)}).then(o=>(n.os=s,o))}function RV(t,e,n){let i=ue(),s=ue();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let r=Ii();return n.forEach((l,c)=>{const d=o.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Z.min())?(e.removeEntry(l,c.readTime),r=r.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),r=r.insert(l,c)):Y("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ps:r,Is:s}})}function IV(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Ur.getTargetData(i,e).next(o=>o?(s=o,O.resolve(s)):n.Ur.allocateTargetId(i).next(r=>(s=new ai(e,r,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.os.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function xd(t,e,n){const i=le(t),s=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,r=>i.persistence.referenceDelegate.removeTarget(r,s))}catch(r){if(!ol(r))throw r;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${r}`)}i.os=i.os.remove(e),i._s.delete(s.target)}function z_(t,e,n){const i=le(t);let s=Z.min(),o=ue();return i.persistence.runTransaction("Execute query","readwrite",r=>function(c,d,h){const p=le(c),g=p._s.get(h);return g!==void 0?O.resolve(p.os.get(g)):p.Ur.getTargetData(d,h)}(i,r,pn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(r,l.targetId).next(c=>{o=c})}).next(()=>i.ss.getDocumentsMatchingQuery(r,e,n?s:Z.min(),n?o:ue())).next(l=>(wV(i,R2(e),l),{documents:l,Ts:o})))}function wV(t,e,n){let i=t.us.get(e)||Z.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class H_{constructor(){this.activeTargetIds=D2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xV{constructor(){this.so=new H_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new H_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l=null;function ef(){return $l===null?$l=function(){return 268435456+Math.round(2147483648*Math.random())}():$l++,"0x"+$l.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class bV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(n,i,s,o,r){const l=ef(),c=this.xo(n,i.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,r),this.No(n,c,d,s).then(h=>(Y("RestConnection",`Received RPC '${n}' ${l}: `,h),h),h=>{throw lo("RestConnection",`RPC '${n}' ${l} failed with error: `,h,"url: ",c,"request:",s),h})}Lo(n,i,s,o,r,l){return this.Mo(n,i,s,o,r)}Oo(n,i,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,r)=>n[r]=o),s&&s.headers.forEach((o,r)=>n[r]=o)}xo(n,i){const s=NV[n];return`${this.Do}/v1/${i}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,s){const o=ef();return new Promise((r,l)=>{const c=new XE;c.setWithCredentials(!0),c.listenOnce(ZE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ma.NO_ERROR:const h=c.getResponseJson();Y(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),r(h);break;case ma.TIMEOUT:Y(pt,`RPC '${e}' ${o} timed out`),l(new J(G.DEADLINE_EXCEEDED,"Request time out"));break;case ma.HTTP_ERROR:const p=c.getStatus();if(Y(pt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const w=function(U){const C=U.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(C)>=0?C:G.UNKNOWN}(_.status);l(new J(w,_.message))}else l(new J(G.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new J(G.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{Y(pt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);Y(pt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,i,15)})}Bo(e,n,i){const s=ef(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=eA(),l=jE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const h=o.join("");Y(pt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const p=r.createWebChannel(h,c);let g=!1,_=!1;const w=new DV({Io:U=>{_?Y(pt,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(g||(Y(pt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),Y(pt,`RPC '${e}' stream ${s} sending:`,U),p.send(U))},To:()=>p.close()}),D=(U,C,T)=>{U.listen(C,R=>{try{T(R)}catch(b){setTimeout(()=>{throw b},0)}})};return D(p,sr.EventType.OPEN,()=>{_||(Y(pt,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),D(p,sr.EventType.CLOSE,()=>{_||(_=!0,Y(pt,`RPC '${e}' stream ${s} transport closed`),w.So())}),D(p,sr.EventType.ERROR,U=>{_||(_=!0,lo(pt,`RPC '${e}' stream ${s} transport errored:`,U),w.So(new J(G.UNAVAILABLE,"The operation could not be completed")))}),D(p,sr.EventType.MESSAGE,U=>{var C;if(!_){const T=U.data[0];qe(!!T);const R=T,b=R.error||((C=R[0])===null||C===void 0?void 0:C.error);if(b){Y(pt,`RPC '${e}' stream ${s} received error:`,b);const k=b.status;let B=function(A){const I=He[A];if(I!==void 0)return AA(I)}(k),S=b.message;B===void 0&&(B=G.INTERNAL,S="Unknown error status: "+k+" with message "+b.message),_=!0,w.So(new J(B,S)),p.close()}else Y(pt,`RPC '${e}' stream ${s} received:`,T),w.bo(T)}}),D(l,WE.STAT_EVENT,U=>{U.stat===gd.PROXY?Y(pt,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===gd.NOPROXY&&Y(pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function tf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t){return new Q2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n,i=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-i);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e,n,i,s,o,r,l,c){this.ui=e,this.Ho=i,this.Jo=s,this.connection=o,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new UA(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(On(n.toString()),On("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Yo===n&&this.P_(i,s)},i=>{e(()=>{const s=new J(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(s)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{i(()=>this.I_(s))}),this.stream.onMessage(s=>{i(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PV extends VV{constructor(e,n,i,s,o,r){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,r),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=X2(this.serializer,e),i=function(o){if(!("targetChange"in o))return Z.min();const r=o.targetChange;return r.targetIds&&r.targetIds.length?Z.min():r.readTime?Ks(r.readTime):Z.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=G_(this.serializer),n.addTarget=function(o,r){let l;const c=r.target;if(l=Td(c)?{documents:Z2(o,c)}:{query:W2(o,c)._t},l.targetId=r.targetId,r.resumeToken.approximateByteSize()>0){l.resumeToken=RA(o,r.resumeToken);const d=Rd(o,r.expectedCount);d!==null&&(l.expectedCount=d)}else if(r.snapshotVersion.compareTo(Z.min())>0){l.readTime=Id(o,r.snapshotVersion.toTimestamp());const d=Rd(o,r.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const i=eV(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=G_(this.serializer),n.removeTarget=e,this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV extends class{}{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new J(G.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,r])=>this.connection.Mo(e,wd(n,i),s,o,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(G.UNKNOWN,o.toString())})}Lo(e,n,i,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,l])=>this.connection.Lo(e,wd(n,i),s,r,l,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new J(G.UNKNOWN,r.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class LV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(On(n),this.D_=!1):Y("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(r=>{i.enqueueAndForget(async()=>{cl(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=le(c);d.L_.add(4),await ul(d),d.q_.set("Unknown"),d.L_.delete(4),await ku(d)}(this))})}),this.q_=new LV(i,s)}}async function ku(t){if(cl(t))for(const e of t.B_)await e(!0)}async function ul(t){for(const e of t.B_)await e(!1)}function LA(t,e){const n=le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),lm(n)?rm(n):Mo(n).r_()&&om(n,e))}function sm(t,e){const n=le(t),i=Mo(n);n.N_.delete(e),i.r_()&&kA(n,e),n.N_.size===0&&(i.r_()?i.o_():cl(n)&&n.q_.set("Unknown"))}function om(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mo(t).A_(e)}function kA(t,e){t.Q_.xe(e),Mo(t).R_(e)}function rm(t){t.Q_=new F2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Mo(t).start(),t.q_.v_()}function lm(t){return cl(t)&&!Mo(t).n_()&&t.N_.size>0}function cl(t){return le(t).L_.size===0}function qA(t){t.Q_=void 0}async function qV(t){t.q_.set("Online")}async function BV(t){t.N_.forEach((e,n)=>{om(t,e)})}async function OV(t,e){qA(t),lm(t)?(t.q_.M_(e),rm(t)):t.q_.set("Unknown")}async function GV(t,e,n){if(t.q_.set("Online"),e instanceof CA&&e.state===2&&e.cause)try{await async function(s,o){const r=o.cause;for(const l of o.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,r),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(i){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Y_(t,i)}else if(e instanceof ga?t.Q_.Ke(e):e instanceof SA?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const i=await PA(t.localStore);n.compareTo(i)>=0&&await function(o,r){const l=o.Q_.rt(r);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.N_.get(d);h&&o.N_.set(d,h.withResumeToken(c.resumeToken,r))}}),l.targetMismatches.forEach((c,d)=>{const h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(ct.EMPTY_BYTE_STRING,h.snapshotVersion)),kA(o,c);const p=new ai(h.target,c,d,h.sequenceNumber);om(o,p)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){Y("RemoteStore","Failed to raise snapshot:",i),await Y_(t,i)}}async function Y_(t,e,n){if(!ol(e))throw e;t.L_.add(1),await ul(t),t.q_.set("Offline"),n||(n=()=>PA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ku(t)})}async function J_(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const i=cl(n);n.L_.add(3),await ul(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ku(n)}async function zV(t,e){const n=le(t);e?(n.L_.delete(2),await ku(n)):e||(n.L_.add(2),await ul(n),n.q_.set("Unknown"))}function Mo(t){return t.K_||(t.K_=function(n,i,s){const o=le(n);return o.w_(),new PV(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:qV.bind(null,t),Ro:BV.bind(null,t),mo:OV.bind(null,t),d_:GV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),lm(t)?rm(t):t.q_.set("Unknown")):(await t.K_.stop(),qA(t))})),t.K_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(r=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const r=Date.now()+i,l=new am(e,n,r,s,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function BA(t,e){if(On("AsyncQueue",`${e}: ${t}`),ol(t))return new J(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.comparator=e?(n,i)=>e(n,i)||K.comparator(n.key,i.key):(n,i)=>K.comparator(n.key,i.key),this.keyedMap=or(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new Qs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Qs;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(){this.W_=new ze(K.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class ho{constructor(e,n,i,s,o,r,l,c,d){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=r,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,i,s,o){const r=[];return n.forEach(l=>{r.push({type:0,doc:l})}),new ho(e,n,Qs.emptySet(n),r,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Du(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class FV{constructor(){this.queries=Q_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const s=le(n),o=s.queries;s.queries=Q_(),o.forEach((r,l)=>{for(const c of l.j_)c.onError(i)})})(this,new J(G.ABORTED,"Firestore shutting down"))}}function Q_(){return new xo(t=>dA(t),Du)}async function YV(t,e){const n=le(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.H_()&&e.J_()&&(i=2):(o=new HV,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(s,!0);break;case 1:o.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(r){const l=BA(r,`Initialization of query '${Ts(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&um(n)}async function JV(t,e){const n=le(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const r=o.j_.indexOf(e);r>=0&&(o.j_.splice(r,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function KV(t,e){const n=le(t);let i=!1;for(const s of e){const o=s.query,r=n.queries.get(o);if(r){for(const l of r.j_)l.X_(s)&&(i=!0);r.z_=s}}i&&um(n)}function QV(t,e,n){const i=le(t),s=i.queries.get(e);if(s)for(const o of s.j_)o.onError(n);i.queries.delete(e)}function um(t){t.Y_.forEach(e=>{e.next()})}var Md,$_;($_=Md||(Md={})).ea="default",$_.Cache="cache";class $V{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new ho(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Md.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.key=e}}class GA{constructor(e){this.key=e}}class XV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=hA(e),this.Ra=new Qs(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new K_,s=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,r=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const g=s.get(h),_=bu(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),D=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let U=!1;g&&_?g.data.isEqual(_.data)?w!==D&&(i.track({type:3,doc:_}),U=!0):this.ga(g,_)||(i.track({type:2,doc:_}),U=!0,(c&&this.Aa(_,c)>0||d&&this.Aa(_,d)<0)&&(l=!0)):!g&&_?(i.track({type:0,doc:_}),U=!0):g&&!_&&(i.track({type:1,doc:g}),U=!0,(c||d)&&(l=!0)),U&&(_?(r=r.add(_),o=D?o.add(h):o.delete(h)):(r=r.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;r.size>this.query.limit;){const h=this.query.limitType==="F"?r.last():r.first();r=r.delete(h.key),o=o.delete(h.key),i.track({type:1,doc:h})}return{Ra:r,fa:i,ns:l,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const r=e.fa.G_();r.sort((h,p)=>function(_,w){const D=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return D(_)-D(w)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(i),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,r.length!==0||d?{snapshot:new ho(this.query,e.Ra,o,r,e.mutatedKeys,c===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new K_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ue(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new GA(i))}),this.da.forEach(i=>{e.has(i)||n.push(new OA(i))}),n}ba(e){this.Ta=e.Ts,this.da=ue();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ho.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ZV{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class WV{constructor(e){this.key=e,this.va=!1}}class jV{constructor(e,n,i,s,o,r){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=r,this.Ca={},this.Fa=new xo(l=>dA(l),Du),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(K.comparator),this.Na=new Map,this.La=new tm,this.Ba={},this.ka=new Map,this.qa=fo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function eP(t,e,n=!0){const i=JA(t);let s;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await zA(i,e,n,!0),s}async function tP(t,e){const n=JA(t);await zA(n,e,!0,!1)}async function zA(t,e,n,i){const s=await IV(t.localStore,pn(e)),o=s.targetId,r=t.sharedClientState.addLocalQueryTarget(o,n);let l;return i&&(l=await nP(t,e,o,r==="current",s.resumeToken)),t.isPrimaryClient&&n&&LA(t.remoteStore,s),l}async function nP(t,e,n,i,s){t.Ka=(p,g,_)=>async function(D,U,C,T){let R=U.view.ma(C);R.ns&&(R=await z_(D.localStore,U.query,!1).then(({documents:S})=>U.view.ma(S,R)));const b=T&&T.targetChanges.get(U.targetId),k=T&&T.targetMismatches.get(U.targetId)!=null,B=U.view.applyChanges(R,D.isPrimaryClient,b,k);return Z_(D,U.targetId,B.wa),B.snapshot}(t,p,g,_);const o=await z_(t.localStore,e,!0),r=new XV(e,o.Ts),l=r.ma(o.documents),c=al.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),d=r.applyChanges(l,t.isPrimaryClient,c);Z_(t,n,d.wa);const h=new ZV(e,n,r);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function iP(t,e,n){const i=le(t),s=i.Fa.get(e),o=i.Ma.get(s.targetId);if(o.length>1)return i.Ma.set(s.targetId,o.filter(r=>!Du(r,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await xd(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&sm(i.remoteStore,s.targetId),Nd(i,s.targetId)}).catch(Fh)):(Nd(i,s.targetId),await xd(i.localStore,s.targetId,!0))}async function sP(t,e){const n=le(t),i=n.Fa.get(e),s=n.Ma.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),sm(n.remoteStore,i.targetId))}async function HA(t,e){const n=le(t);try{const i=await CV(n.localStore,e);e.targetChanges.forEach((s,o)=>{const r=n.Na.get(o);r&&(qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?r.va=!0:s.modifiedDocuments.size>0?qe(r.va):s.removedDocuments.size>0&&(qe(r.va),r.va=!1))}),await YA(n,i,e)}catch(i){await Fh(i)}}function X_(t,e,n){const i=le(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Fa.forEach((o,r)=>{const l=r.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(r,l){const c=le(r);c.onlineState=l;let d=!1;c.queries.forEach((h,p)=>{for(const g of p.j_)g.Z_(l)&&(d=!0)}),d&&um(c)}(i.eventManager,e),s.length&&i.Ca.d_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function oP(t,e,n){const i=le(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Na.get(e),o=s&&s.key;if(o){let r=new ze(K.comparator);r=r.insert(o,yt.newNoDocument(o,Z.min()));const l=ue().add(o),c=new Uu(Z.min(),new Map,new ze(de),r,l);await HA(i,c),i.Oa=i.Oa.remove(o),i.Na.delete(e),cm(i)}else await xd(i.localStore,e,!1).then(()=>Nd(i,e,n)).catch(Fh)}function Nd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||FA(t,i)})}function FA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(sm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),cm(t))}function Z_(t,e,n){for(const i of n)i instanceof OA?(t.La.addReference(i.key,e),rP(t,i)):i instanceof GA?(Y("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||FA(t,i.key)):ee()}function rP(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(Y("SyncEngine","New document in limbo: "+n),t.xa.add(i),cm(t))}function cm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(Pe.fromString(e)),i=t.qa.next();t.Na.set(i,new WV(n)),t.Oa=t.Oa.insert(n,i),LA(t.remoteStore,new ai(pn(cA(n.path)),i,"TargetPurposeLimboResolution",Yh.oe))}}async function YA(t,e,n){const i=le(t),s=[],o=[],r=[];i.Fa.isEmpty()||(i.Fa.forEach((l,c)=>{r.push(i.Ka(c,e,n).then(d=>{var h;if((d||n)&&i.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){s.push(d);const p=im.Wi(c.targetId,d);o.push(p)}}))}),await Promise.all(r),i.Ca.d_(s),await async function(c,d){const h=le(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(d,g=>O.forEach(g.$i,_=>h.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>O.forEach(g.Ui,_=>h.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!ol(p))throw p;Y("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const _=h.os.get(g),w=_.snapshotVersion,D=_.withLastLimboFreeSnapshotVersion(w);h.os=h.os.insert(g,D)}}}(i.localStore,o))}async function lP(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const i=await VA(n.localStore,e);n.currentUser=e,function(o,r){o.ka.forEach(l=>{l.forEach(c=>{c.reject(new J(G.CANCELLED,r))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await YA(n,i.hs)}}function aP(t,e){const n=le(t),i=n.Na.get(e);if(i&&i.va)return ue().add(i.key);{let s=ue();const o=n.Ma.get(e);if(!o)return s;for(const r of o){const l=n.Fa.get(r);s=s.unionWith(l.view.Va)}return s}}function JA(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oP.bind(null,e),e.Ca.d_=KV.bind(null,e.eventManager),e.Ca.$a=QV.bind(null,e.eventManager),e}class ru{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return SV(this.persistence,new EV,e.initialUser,this.serializer)}Ga(e){return new _V(nm.Zr,this.serializer)}Wa(e){return new xV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ru.provider={build:()=>new ru};class Dd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>X_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lP.bind(null,this.syncEngine),await zV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new FV}()}createDatastore(e){const n=Lu(e.databaseInfo.databaseId),i=function(o){return new bV(o)}(e.databaseInfo);return function(o,r,l,c){return new UV(o,r,l,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,r,l){return new kV(i,s,o,r,l)}(this.localStore,this.datastore,e.asyncQueue,n=>X_(this.syncEngine,n,0),function(){return F_.D()?new F_:new MV}())}createSyncEngine(e,n){return function(s,o,r,l,c,d,h){const p=new jV(s,o,r,l,c,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=le(s);Y("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await ul(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Dd.provider={build:()=>new Dd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):On("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=gt.UNAUTHENTICATED,this.clientId=e2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async r=>{Y("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(i,r=>(Y("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=BA(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function nf(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await VA(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function W_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fP(t);Y("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>J_(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>J_(e.remoteStore,s)),t._onlineComponents=e}async function fP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await nf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;lo("Error using user provided cache. Falling back to memory cache: "+n),await nf(t,new ru)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await nf(t,new ru);return t._offlineComponents}async function dP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await W_(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await W_(t,new Dd))),t._onlineComponents}async function hP(t){const e=await dP(t),n=e.eventManager;return n.onListen=eP.bind(null,e.syncEngine),n.onUnlisten=iP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sP.bind(null,e.syncEngine),n}function mP(t,e,n={}){const i=new Qi;return t.asyncQueue.enqueueAndForget(async()=>function(o,r,l,c,d){const h=new uP({next:g=>{h.Za(),r.enqueueAndForget(()=>JV(o,p)),g.fromCache&&c.source==="server"?d.reject(new J(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new $V(l,h,{includeMetadataChanges:!0,_a:!0});return YV(o,p)}(await hP(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=new Map;function pP(t,e,n,i){if(e===!0&&i===!0)throw new J(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ev(t){if(K.isDocumentKey(t))throw new J(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function bd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qu(t);throw new J(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new J(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new J(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new J(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new J(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fm{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tv(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Jb;switch(i.type){case"firstParty":return new Xb(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new J(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=j_.get(n);i&&(Y("ComponentProvider","Removing Datastore"),j_.delete(n),i.terminate())}(this),Promise.resolve()}}function gP(t,e,n,i={}){var s;const o=(t=bd(t,fm))._getSettings(),r=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==r&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:r,ssl:!1})),i.mockUserToken){let l,c;if(typeof i.mockUserToken=="string")l=i.mockUserToken,c=gt.MOCK_USER;else{l=wD(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new J(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new gt(d)}t._authCredentials=new Kb(new tA(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new No(this.firestore,e,this._query)}}class Hn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hn(this.firestore,e,this._key)}}class $s extends No{constructor(e,n,i){super(e,n,cA(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new K(e))}withConverter(e){return new $s(this.firestore,e,this._path)}}function yP(t,e,...n){if(t=Wa(t),t instanceof fm){const i=Pe.fromString(e,...n);return ev(i),new $s(t,null,i)}{if(!(t instanceof Hn||t instanceof $s))throw new J(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Pe.fromString(e,...n));return ev(i),new $s(t.firestore,null,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new UA(this,"async_queue_retry"),this.Vu=()=>{const i=tf();i&&Y("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=tf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=tf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Qi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ol(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const s=function(r){let l=r.message||"";return r.stack&&(l=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),l}(i);throw On("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=am.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(s),s}fu(){this.Eu&&ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class QA extends fm{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new nv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nv(e),this._firestoreClient=void 0,await e}}}function _P(t,e){const n=typeof t=="object"?t:Lb(),i=typeof t=="string"?t:"(default)",s=bb(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=RD("firestore");o&&gP(s,...o)}return s}function vP(t){if(t._terminated)throw new J(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TP(t),t._firestoreClient}function TP(t){var e,n,i;const s=t._freezeSettings(),o=function(l,c,d,h){return new c2(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,KA(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new cP(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mo(ct.fromBase64String(e))}catch(n){throw new J(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mo(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=/^__.*__$/;function ZA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class mm{constructor(e,n,i,s,o,r){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new mm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.Ou(e),s}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Vd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ZA(this.Cu)&&EP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class AP{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Lu(e)}Qu(e,n,i,s=!1){return new mm({Cu:e,methodName:n,qu:i,path:_t.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function SP(t){const e=t._freezeSettings(),n=Lu(t._databaseId);return new AP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function CP(t,e,n,i=!1){return pm(n,t.Qu(i?4:3,e))}function pm(t,e){if(WA(t=Wa(t)))return IP("Unsupported field value:",e,t),RP(t,e);if(t instanceof XA)return function(i,s){if(!ZA(s.Cu))throw s.Bu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,s){const o=[];let r=0;for(const l of i){let c=pm(l,s.Lu(r));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),r++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=Wa(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return b2(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=tt.fromDate(i);return{timestampValue:Id(s.serializer,o)}}if(i instanceof tt){const o=new tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Id(s.serializer,o)}}if(i instanceof dm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof mo)return{bytesValue:RA(s.serializer,i._byteString)};if(i instanceof Hn){const o=s.databaseId,r=i.firestore._databaseId;if(!r.isEqual(o))throw s.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:IA(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof hm)return function(r,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Zh(l.serializer,c)})}}}}}}(i,s);throw s.Bu(`Unsupported field value: ${qu(i)}`)}(t,e)}function RP(t,e){const n={};return nA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rl(t,(i,s)=>{const o=pm(s,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function WA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof dm||t instanceof mo||t instanceof Hn||t instanceof XA||t instanceof hm)}function IP(t,e,n){if(!WA(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=qu(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}const wP=new RegExp("[~\\*/\\[\\]]");function xP(t,e,n){if(e.search(wP)>=0)throw Vd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $A(...e.split("."))._internalPath}catch{throw Vd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vd(t,e,n,i,s){const o=i&&!i.isEmpty(),r=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(o||r)&&(c+=" (found",o&&(c+=` in field ${i}`),r&&(c+=` in document ${s}`),c+=")"),new J(G.INVALID_ARGUMENT,l+t+c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MP extends jA{data(){return super.data()}}function gm(t,e){return typeof e=="string"?xP(t,e):e instanceof $A?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ym{}class DP extends ym{}function iv(t,e,...n){let i=[];e instanceof ym&&i.push(e),i=i.concat(n),function(o){const r=o.filter(c=>c instanceof _m).length,l=o.filter(c=>c instanceof Bu).length;if(r>1||r>0&&l>0)throw new J(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class Bu extends DP{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Bu(e,n,i)}_apply(e){const n=this._parse(e);return eS(e._query,n),new No(e.firestore,e.converter,Ed(e._query,n))}_parse(e){const n=SP(e.firestore);return function(o,r,l,c,d,h,p){let g;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new J(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){rv(p,h);const _=[];for(const w of p)_.push(ov(c,o,w));g={arrayValue:{values:_}}}else g=ov(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||rv(p,h),g=CP(l,r,p,h==="in"||h==="not-in");return Ke.create(d,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function sv(t,e,n){const i=e,s=gm("where",t);return Bu._create(s,i,n)}class _m extends ym{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _m(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let r=s;const l=o.getFlattenedFilters();for(const c of l)eS(r,c),r=Ed(r,c)}(e._query,n),new No(e.firestore,e.converter,Ed(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ov(t,e,n){if(typeof(n=Wa(n))=="string"){if(n==="")throw new J(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fA(e)&&n.indexOf("/")!==-1)throw new J(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Pe.fromString(n));if(!K.isDocumentKey(i))throw new J(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return R_(t,new K(i))}if(n instanceof Hn)return R_(t,n._key);throw new J(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qu(n)}.`)}function rv(t,e){if(!Array.isArray(t)||t.length===0)throw new J(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eS(t,e){const n=function(s,o){for(const r of s)for(const l of r.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new J(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bP{convertValue(e,n="none"){switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return rl(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,s;const o=(s=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(r=>Be(r.doubleValue));return new hm(o)}convertGeoPoint(e){return new dm(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Kh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Hr(e));default:return null}}convertTimestamp(e){const n=Ri(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Pe.fromString(e);qe(bA(i));const s=new Fr(i.get(1),i.get(3)),o=new K(i.popFirst(5));return s.isEqual(n)||On(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class VP extends jA{constructor(e,n,i,s,o,r){super(e,n,i,s,r),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ya(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(gm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class ya extends VP{data(e={}){return super.data(e)}}class PP{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Xl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new ya(this._firestore,this._userDataWriter,i.key,i,new Xl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let r=0;return s._snapshot.docChanges.map(l=>{const c=new ya(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:r++}})}{let r=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const c=new ya(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=r.indexOf(l.doc.key),r=r.delete(l.doc.key)),l.type!==1&&(r=r.add(l.doc),h=r.indexOf(l.doc.key)),{type:UP(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function UP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}class LP extends bP{constructor(e){super(),this.firestore=e}convertBytes(e){return new mo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,n)}}function lv(t){t=bd(t,No);const e=bd(t.firestore,QA),n=vP(e),i=new LP(e);return NP(t._query),mP(n,t._query).then(s=>new PP(e,i,t,s))}(function(e,n=!0){(function(s){wo=s})(Ub),eu(new Or("firestore",(i,{instanceIdentifier:s,options:o})=>{const r=i.getProvider("app").getImmediate(),l=new QA(new Qb(i.getProvider("auth-internal")),new Wb(i.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new J(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fr(d.options.projectId,h)}(r,s),r);return o=Object.assign({useFetchStreams:n},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),Js(T_,"4.7.3",e),Js(T_,"4.7.3","esm2017")})();var kP="firebase",qP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Js(kP,qP,"app");const BP={apiKey:"AIzaSyBc934ZufzHPXbCAtafc3gagswF-_bacYg",authDomain:"course-results-5f0c1.firebaseapp.com",projectId:"course-results-5f0c1",storageBucket:"course-results-5f0c1.firebasestorage.app",messagingSenderId:"267687091931",appId:"1:267687091931:web:11f2c5c3b5e4ce9a5bb6fe"},OP=JE(BP),GP=_P(OP),_a=()=>M.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white"}),zP=({query:t,setQuery:e,onSearch:n,isLoading:i,error:s})=>{const o=r=>{r.preventDefault(),n()};return M.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[M.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:"ابحث عن نتيجتك"}),M.jsx("p",{className:"text-slate-500 mb-8 max-w-md",children:"أدخل الكود الخاص بك أو رقم الموبايل المسجل لدينا للاستعلام عن نتيجتك في الكورس وطباعة شهادة التقدير."}),M.jsxs("form",{onSubmit:o,className:"w-full max-w-md",children:[M.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[M.jsx("input",{type:"text",value:t,onChange:r=>e(r.target.value),placeholder:"ادخل الكود أو رقم الموبايل هنا...",className:"flex-grow w-full px-4 py-3 text-lg text-center text-gray-700 bg-gray-50 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition",disabled:i}),M.jsx("button",{type:"submit",className:"w-full sm:w-auto px-8 py-3 bg-indigo-600 text-white font-bold text-lg rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-75 disabled:bg-indigo-300 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2",disabled:i,children:i?M.jsx(_a,{}):"بحث"})]}),s&&M.jsx("p",{className:"text-red-500 mt-4 font-semibold",children:s})]})]})},HP="https://i.postimg.cc/y8htBK2y/1.png",tS=({className:t,alt:e="شعار كنيسة القديس بولس الرسول",style:n})=>M.jsx("img",{src:HP,alt:e,className:t,style:n}),FP=t=>t>=90?"ممتاز":t>=80?"جيد جدًا":t>=70?"جيد":t>=60?"مقبول":"ناجح",av={gold:{border:"#D4AF37",text:"#5D4037",header:"#4A2C2A",background:"#FDFBF5",frameAccent:"#EADCB3"},blue:{border:"#4A90E2",text:"#004085",header:"#002752",background:"#F0F8FF",frameAccent:"#B0C4DE"},green:{border:"#2E7D32",text:"#1B5E20",header:"#003300",background:"#F5FFF5",frameAccent:"#A5D6A7"},maroon:{border:"#880E4F",text:"#560027",header:"#4A001F",background:"#FFF5F8",frameAccent:"#F48FB1"}},YP=({result:t,fontFamily:e,colorScheme:n,certificateDesign:i,fontColor:s,certificateRef:o,certificateTexts:r})=>{const l=av[n]||av.gold,d=((_,w)=>{const D={textShadow:"1px 1px 3px rgba(0, 0, 0, 0.25)"};if(w==="default")return{...D,color:_};switch(w){case"shinyGold":return{...D,color:"#B8860B"};case"royalBlue":return{...D,color:"#4169E1"};case"emeraldGreen":return{...D,color:"#2ECC71"};case"deepMaroon":return{...D,color:"#AD1457"};default:return{...D,color:_}}})(l.header,s),h={color:l.text},p=e==="'Amiri', serif"?"text-base sm:text-xl md:text-2xl leading-relaxed max-w-3xl":"text-sm sm:text-lg md:text-xl leading-relaxed max-w-3xl",g=({children:_})=>{const w="pt-0 pb-4 sm:pb-6 px-4 sm:px-6";switch(i){case"nader":case"rare":return M.jsx("div",{style:{backgroundImage:"url('https://i.postimg.cc/Fs1d8n0C/2.png')",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",backgroundPosition:"center"},className:"h-full flex flex-col pt-8 pb-6 px-10 sm:pt-10 sm:pb-8 sm:px-12",children:_});case"nader_new_ar":return M.jsx("div",{style:{backgroundImage:"url('https://i.postimg.cc/28Q2tymW/6.png')",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",backgroundPosition:"center"},className:"h-full flex flex-col pt-8 pb-6 px-10 sm:pt-10 sm:pb-8 sm:px-12",children:_});case"nader_new_en":return M.jsx("div",{style:{backgroundImage:"url('https://i.postimg.cc/hjJgzp5P/5.png')",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",backgroundPosition:"center"},className:"h-full flex flex-col pt-8 pb-6 px-10 sm:pt-10 sm:pb-8 sm:px-12",children:_});case"modern":return M.jsx("div",{style:{padding:"8px",border:`2px solid ${l.border}`},className:"h-full flex flex-col",children:M.jsx("div",{style:{border:`6px solid ${l.frameAccent}`},className:`h-full flex flex-col ${w}`,children:_})});case"formal":return M.jsx("div",{style:{padding:"4px",border:`1px solid ${l.border}`},className:"h-full flex flex-col",children:M.jsx("div",{style:{padding:"4px",border:`4px solid ${l.border}`},className:"h-full flex flex-col",children:M.jsx("div",{style:{border:`1px solid ${l.border}`},className:`h-full flex flex-col ${w}`,children:_})})});case"vintage":return M.jsx("div",{style:{padding:"4px",border:`1px solid ${l.frameAccent}`},className:"h-full flex flex-col",children:M.jsx("div",{style:{padding:"8px",border:`6px groove ${l.border}`},className:"h-full flex flex-col",children:M.jsx("div",{style:{border:`1px solid ${l.frameAccent}`},className:`h-full flex flex-col ${w}`,children:_})})});case"classic":default:return M.jsx("div",{style:{padding:"12px",border:`12px double ${l.border}`},className:`h-full flex flex-col ${w}`,children:_})}};return M.jsx("div",{ref:o,className:"w-full max-w-5xl bg-white shadow-lg flex flex-col",style:{backgroundColor:l.background,aspectRatio:"297 / 210"},children:M.jsx(g,{children:M.jsxs("div",{className:"w-full h-full relative",children:[M.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundImage:"url('https://i.postimg.cc/3NwDhXRv/image.png')",backgroundSize:"35%",backgroundPosition:"center 65%",backgroundRepeat:"no-repeat",opacity:.1}}),M.jsxs("div",{className:"w-full h-full flex flex-col text-center",style:{fontFamily:e,position:"relative"},children:[M.jsxs("header",{className:"flex flex-row items-start justify-between gap-x-4 mb-2 sm:mb-4 md:mb-6 px-1 md:px-4",children:[M.jsx("img",{src:"https://i.postimg.cc/7YGfNYTP/Add-a-new-certificate-design-option-called-minimalist-with-a-simple-clean-border-and-minimal-deco.png",alt:"شعار مجتمع يسوع",className:"w-16 h-16 sm:w-24 sm:h-24 md:w-32 md:h-32 object-contain flex-shrink-0"}),M.jsxs("div",{className:"text-center mt-0 sm:mt-2 md:mt-3",children:[M.jsx("h2",{className:"text-2xl sm:text-3xl md:text-5xl font-bold",style:{...d,fontFamily:"'El Messiri', sans-serif"},children:r.mainTitle}),M.jsx("p",{className:"text-xs sm:text-base md:text-lg mt-5 sm:mt-6 font-semibold whitespace-pre-wrap",style:{...h,fontFamily:"'Cairo', sans-serif"},children:r.subTitle})]}),M.jsx(tS,{className:"w-16 h-16 sm:w-24 sm:h-24 md:w-32 md:h-32 object-contain flex-shrink-0"})]}),M.jsxs("main",{className:"flex-grow flex flex-col items-center justify-center px-1 md:px-4",children:[M.jsx("p",{className:"mt-1 sm:mt-2 md:mt-4 text-xs sm:text-base md:text-lg",style:h,children:r.introLine}),M.jsx("h3",{className:"my-1 sm:my-2 md:my-4 text-xl sm:text-3xl md:text-4xl font-bold",style:{...d,fontFamily:e},children:t.name}),M.jsxs("p",{className:p,style:h,children:[r.bodyLine1," ",M.jsx("strong",{style:d,children:t.service})," ",r.bodyLine2," ",M.jsx("strong",{style:d,children:r.bodyLine3})," ",r.bodyLine4," ",M.jsx("strong",{style:d,children:typeof t.score=="number"?FP(t.score):"ناجح"}),"."]})]}),M.jsxs("footer",{className:"mt-auto pt-2 sm:pt-4 md:pt-8 pb-4 sm:pb-6 md:pb-8 px-2 sm:px-4 md:px-8 flex justify-between items-center w-full",children:[M.jsxs("div",{className:"text-center",children:[M.jsx("p",{className:"text-[10px] sm:text-sm md:text-base font-semibold",style:h,children:r.patronageTitle}),M.jsx("p",{className:"text-[10px] sm:text-sm md:text-base whitespace-pre-wrap",style:h,children:r.patronName})]}),M.jsxs("div",{className:"text-center",children:[M.jsx("p",{className:"text-[10px] sm:text-sm md:text-base font-semibold",style:h,children:r.responsiblePriestTitle}),M.jsx("div",{className:"border-t mt-8 sm:mt-10 w-20 sm:w-32 md:w-44",style:{borderColor:l.text}})]})]})]})]})})})},JP={"'Noto Naskh Arabic', serif":"نسخ (Naskh)","'Cairo', sans-serif":"نادر (Cairo)","'Amiri', serif":"أميري (Amiri)","'El Messiri', sans-serif":"المسيري (El Messiri)","'Dancing Script', cursive":"Dancing Script","'Lobster', cursive":"Lobster"},KP={gold:"ذهبي وبني",blue:"أزرق ووميض",green:"أخضر وذهبي",maroon:"عنابي وذهبي"},QP={default:"لون التصميم الافتراضي",shinyGold:"ذهبي",royalBlue:"أزرق ملكي",emeraldGreen:"أخضر زمردي",deepMaroon:"عنابي غامق"},$P={classic:"كلاسيكي (مزدوج)",modern:"حديث (بسيط)",formal:"رسمي (متعدد)",vintage:"عتيق (زخارف قديمة)",rare:"الإطار الذهبي",nader_new_ar:"نادر",nader_new_en:"Nader"},XP=({fontFamily:t,setFontFamily:e,colorScheme:n,setColorScheme:i,certificateDesign:s,setCertificateDesign:o,fontColor:r,setFontColor:l})=>M.jsx("div",{className:"w-full max-w-5xl mb-6 bg-gray-50/80 backdrop-blur-sm p-4 rounded-lg border border-gray-200 shadow-sm",children:M.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"font-family",className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع خط الاسم"}),M.jsx("select",{id:"font-family",value:t,onChange:c=>e(c.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:Object.entries(JP).map(([c,d])=>M.jsx("option",{value:c,style:{fontFamily:c},children:d},c))})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"color-scheme",className:"block text-sm font-medium text-gray-700 mb-1",children:"نظام الألوان"}),M.jsx("select",{id:"color-scheme",value:n,onChange:c=>i(c.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:Object.entries(KP).map(([c,d])=>M.jsx("option",{value:c,children:d},c))})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"font-color",className:"block text-sm font-medium text-gray-700 mb-1",children:"لون الخط"}),M.jsx("select",{id:"font-color",value:r,onChange:c=>l(c.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:Object.entries(QP).map(([c,d])=>M.jsx("option",{value:c,children:d},c))})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"certificate-design",className:"block text-sm font-medium text-gray-700 mb-1",children:"تصميم الإطار"}),M.jsx("select",{id:"certificate-design",value:s,onChange:c=>o(c.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:Object.entries($P).map(([c,d])=>M.jsx("option",{value:c,children:d},c))})]})]})}),ZP=({result:t,onBackToResult:e,certificateTexts:n})=>{const[i,s]=Re.useState("'Noto Naskh Arabic', serif"),[o,r]=Re.useState("blue"),[l,c]=Re.useState("vintage"),[d,h]=Re.useState("default"),[p,g]=Re.useState(!1),[_,w]=Re.useState(!1),D=Re.useRef(null),U=()=>{const T=D.current;if(!T||!window.html2canvas||!window.jspdf){alert("لا يمكن تحميل الشهادة الآن، يرجى المحاولة مرة أخرى.");return}g(!0);const{jsPDF:R}=window.jspdf;window.html2canvas(T,{scale:3,useCORS:!0,backgroundColor:null}).then(b=>{const k=b.toDataURL("image/png"),B=new R({orientation:"landscape",unit:"px",format:"a4"}),S=B.internal.pageSize.getWidth(),E=B.internal.pageSize.getHeight();B.addImage(k,"PNG",0,0,S,E),B.save(`شهادة-${t.name}.pdf`)}).catch(b=>{console.error("Error generating PDF:",b),alert("حدث خطأ أثناء إنشاء ملف PDF.")}).finally(()=>{g(!1)})},C=()=>{const T=D.current;if(!T||!window.html2canvas){alert("لا يمكن حفظ الشهادة كصورة الآن، يرجى المحاولة مرة أخرى.");return}w(!0),window.html2canvas(T,{scale:3,useCORS:!0,backgroundColor:null}).then(R=>{const b=document.createElement("a");b.href=R.toDataURL("image/png"),b.download=`شهادة-${t.name}.png`,document.body.appendChild(b),b.click(),document.body.removeChild(b)}).catch(R=>{console.error("Error generating image:",R),alert("حدث خطأ أثناء إنشاء الصورة.")}).finally(()=>{w(!1)})};return M.jsxs("div",{className:"flex flex-col items-center w-full",children:[M.jsx("div",{className:"no-print w-full",children:M.jsx(XP,{fontFamily:i,setFontFamily:s,colorScheme:o,setColorScheme:r,certificateDesign:l,setCertificateDesign:c,fontColor:d,setFontColor:h})}),M.jsx("div",{id:"certificate-print-area",className:"w-full mt-4 sm:mt-6",children:M.jsx(YP,{result:t,fontFamily:i,colorScheme:o,certificateDesign:l,fontColor:d,certificateRef:D,certificateTexts:n})}),M.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4 mt-4 sm:mt-6 w-full max-w-5xl no-print",children:[M.jsx("button",{onClick:U,disabled:p||_,className:"w-full sm:w-auto bg-green-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-75 transition-transform transform hover:scale-105 disabled:bg-green-300 disabled:cursor-wait",children:p?"جاري التحميل...":"حفظ الشهادة PDF"}),M.jsx("button",{onClick:C,disabled:p||_,className:"w-full sm:w-auto bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-opacity-75 transition-transform transform hover:scale-105 disabled:bg-sky-300 disabled:cursor-wait",children:_?"جاري الحفظ...":"حفظ الشهادة كصورة"}),M.jsx("button",{onClick:e,className:"w-full sm:w-auto bg-gray-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-75 transition-transform transform hover:scale-105",children:"العودة للنتيجة"})]})]})},uv=t=>t==="غائب"?"text-red-600 font-bold":t>=90?"text-green-600 font-bold":t>=80?"text-sky-600 font-bold":t>=70?"text-amber-600 font-bold":"text-red-500 font-bold",WP=t=>t>=90?"text-green-600 font-bold":t>=75?"text-sky-600 font-bold":t>=50?"text-amber-500 font-bold":"text-red-500 font-bold",jP=({results:t,onShowCertificate:e,onGenerateMessage:n,motivationalMessage:i,isMessageLoading:s,onGenerateAdvice:o,spiritualAdvice:r,isAdviceLoading:l,onNewSearch:c,onGenerateSpecialMessage:d,specialMessage:h,isSpecialMessageLoading:p})=>{const g=s||l||p,_=h||r||i,w=t[0],D=w.name,U=w.score==="غائب",C=w.attendance===0;return M.jsxs("div",{className:"text-center",children:[M.jsxs("div",{className:"animate-fade-in-up text-center",children:[M.jsx("h2",{className:"text-3xl font-bold text-slate-700",children:"أهلاً بك"}),M.jsx("p",{className:"text-4xl font-bold text-indigo-600 mt-1",style:{fontFamily:"'El Messiri', sans-serif"},children:D}),M.jsx("p",{className:"text-lg text-slate-500 mt-4 mb-8",children:"نسعد بعرض نتيجتك في كورس مجتمع يسوع."})]}),M.jsxs("div",{className:"animate-fade-in-up bg-white/60 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-lg max-w-3xl mx-auto mb-8",children:[M.jsxs("div",{className:"flex flex-col sm:flex-row justify-around gap-6 text-center border-b border-gray-200 pb-6 mb-6",children:[M.jsxs("div",{className:"flex flex-col items-center",children:[M.jsx("div",{className:"flex items-center justify-center h-16 w-16 rounded-full bg-sky-100 text-sky-600 mb-3",children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),M.jsx("p",{className:"text-md text-slate-500 font-semibold",children:"نسبة الحضور"}),M.jsxs("p",{className:`text-3xl mt-1 ${WP(w.attendance)}`,children:[w.attendance,"%"]})]}),M.jsxs("div",{className:"flex flex-col items-center",children:[M.jsx("div",{className:"flex items-center justify-center h-16 w-16 rounded-full bg-amber-100 text-amber-600 mb-3",children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.52 4.674c.3.921-.755 1.688-1.54 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.784.57-1.838-.197-1.539-1.118l1.52-4.674a1 1 0 00-.363-1.118L2.98 9.11c-.783-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.52-4.674z"})})}),M.jsx("p",{className:"text-md text-slate-500 font-semibold",children:"الدرجة النهائية"}),U?M.jsx("p",{className:`text-2xl mt-1 ${uv(w.score)}`,children:"غائب"}):M.jsxs("p",{className:`text-3xl mt-1 ${uv(w.score)}`,children:[w.score,M.jsx("span",{className:"text-2xl text-slate-500 font-normal",children:" / 100"})]})]})]}),M.jsxs("div",{children:[M.jsx("h3",{className:"text-xl font-bold text-indigo-800 mb-4 text-center",children:"الخدمات المسجل بها"}),M.jsx("ul",{className:"space-y-3",children:t.map((T,R)=>M.jsxs("li",{className:"flex justify-between items-center bg-gray-50 hover:bg-gray-100 p-4 rounded-xl shadow-sm transition-colors duration-200",children:[M.jsxs("div",{className:"flex items-center gap-3",children:[M.jsx("span",{className:"text-indigo-500",children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),M.jsx("span",{className:"font-semibold text-slate-700 text-lg",children:T.service})]}),M.jsx("button",{onClick:()=>e(T),disabled:U,className:"px-4 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-75 transition-all duration-300 transform hover:scale-105 text-sm disabled:bg-gray-400 disabled:cursor-not-allowed disabled:transform-none",children:"عرض الشهادة"})]},R))}),U&&M.jsx("p",{className:"text-slate-500 text-sm mt-3 text-center",children:"لا يمكن إصدار شهادة لحالة الغياب."})]})]}),M.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[M.jsx("button",{onClick:n,disabled:g,className:"w-full sm:w-auto px-6 py-3 bg-amber-500 text-white font-bold text-lg rounded-lg hover:bg-amber-600 focus:outline-none focus:ring-2 focus:ring-amber-400 focus:ring-opacity-75 disabled:bg-amber-300 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2",children:s?M.jsx(_a,{}):"رسالة تشجيع"}),M.jsx("button",{onClick:o,disabled:g,className:"w-full sm:w-auto px-6 py-3 bg-teal-600 text-white font-bold text-lg rounded-lg hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-opacity-75 disabled:bg-teal-300 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2",children:l?M.jsx(_a,{}):"نصيحة روحية"}),C&&M.jsx("button",{onClick:d,disabled:g,className:"w-full sm:w-auto px-6 py-3 bg-rose-600 text-white font-bold text-lg rounded-lg hover:bg-rose-700 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-opacity-75 disabled:bg-rose-300 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2",children:p?M.jsx(_a,{}):"رسالة شخصية"})]}),M.jsx("div",{className:"mt-8 p-6 bg-yellow-50/80 rounded-lg min-h-[10rem] flex items-center justify-center text-center transition-all duration-500 max-w-2xl mx-auto shadow-md relative backdrop-blur-sm",children:g?M.jsx("div",{className:"flex items-center justify-center",role:"status",children:M.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-slate-500"})}):_?M.jsx("blockquote",{className:"relative w-full animate-fade-in-up border-r-4 border-yellow-400 pr-4",children:M.jsx("p",{className:"text-lg md:text-xl text-slate-800 leading-loose whitespace-pre-wrap",style:{fontFamily:"'Amiri', serif"},children:_})}):M.jsx("p",{className:"text-slate-500",children:"اكتشف رسالة ملهمة أو نصيحة روحية عبر الضغط على الأزرار أعلاه."})}),M.jsxs("button",{onClick:c,className:"mt-10 px-6 py-3 bg-gray-100 text-slate-600 font-semibold rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-75 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2",children:[M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),M.jsx("span",{children:"بحث جديد"})]})]})},eU=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),tU=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563.097-1.159.162-1.77.162a9 9 0 115.912-8.95.75.75 0 011.112.465z"})}),nU=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.623 0-1.602-.39-3.124-1.098-4.445A11.951 11.951 0 0012 3c-2.236 0-4.34-.74-6.042-2.036z"})}),iU=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12.75 19.5v-.75a7.5 7.5 0 00-7.5-7.5H4.5m0-6.75h.75c7.87 0 14.25 6.38 14.25 14.25v.75M6 18.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})}),sU=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),oU={mainTitle:"العنوان الرئيسي للشهادة",subTitle:"العنوان الفرعي (اسم الجهة)",introLine:"جملة التقديم الأولية",bodyLine1:"النص قبل اسم الخدمة",bodyLine2:"النص قبل اسم الكورس",bodyLine3:"اسم الكورس",bodyLine4:"النص بعد اسم الكورس وقبل التقدير",patronageTitle:"عنوان الراعي",patronName:"اسم الراعي وتفاصيله",responsiblePriestTitle:"لقب الكاهن المسؤول"},rU=({onBack:t,certificateTexts:e,setCertificateTexts:n})=>{const[i,s]=Re.useState("variables"),o=(r,l)=>{n(c=>({...c,[r]:l}))};return M.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col animate-fade-in-up",children:[M.jsxs("div",{className:"w-full flex flex-row-reverse md:flex-row gap-8",children:[M.jsxs("main",{className:"w-full md:w-3/4",children:[M.jsx("h1",{className:"text-2xl md:text-3xl font-semibold text-slate-800",children:"إدارة المفاتيح والمتغيرات"}),M.jsx("p",{className:"mt-2 text-slate-600",children:"المفاتيح (Secrets) هي بيانات حساسة مشفرة مثل مفاتيح API. المتغيرات (Variables) تستخدم لتخزين بيانات الإعدادات غير الحساسة."}),M.jsx("div",{className:"mt-6 border-b border-gray-300",children:M.jsxs("div",{className:"flex gap-x-4",children:[M.jsx("button",{onClick:()=>s("secrets"),className:`px-3 py-2 text-sm font-medium transition-colors ${i==="secrets"?"border-b-2 border-orange-500 text-slate-800":"text-slate-500 hover:text-slate-800"}`,children:"المفاتيح"}),M.jsx("button",{onClick:()=>s("variables"),className:`px-3 py-2 text-sm font-medium transition-colors ${i==="variables"?"border-b-2 border-orange-500 text-slate-800":"text-slate-500 hover:text-slate-800"}`,children:"المتغيرات"})]})}),i==="secrets"&&M.jsxs("div",{className:"mt-6 space-y-6",children:[M.jsxs("div",{className:"border border-gray-300 rounded-lg",children:[M.jsx("h2",{className:"text-lg font-semibold text-slate-800 p-4 border-b border-gray-300",children:"مفاتيح واجهة برمجة التطبيقات (API Keys)"}),M.jsxs("div",{className:"p-6 text-center text-slate-600 bg-gray-50",children:[M.jsx("p",{children:"لم يتم تكوين أي مفاتيح API بعد."}),M.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-800 text-sm",children:[M.jsx("strong",{children:"تحذير أمني:"})," يجب عدم تخزين أو استخدام مفاتيح Gemini API مباشرة في تطبيق الواجهة الأمامية. يجب أن تتم جميع الطلبات عبر خادم خلفي آمن لحماية مفتاحك من السرقة."]}),M.jsx("button",{className:"mt-4 px-4 py-2 bg-gray-200 text-slate-800 font-semibold text-sm rounded-md border border-gray-300 hover:bg-gray-300 transition-colors",children:"إدارة المفاتيح"})]})]}),M.jsxs("div",{className:"border border-gray-300 rounded-lg",children:[M.jsx("h2",{className:"text-lg font-semibold text-slate-800 p-4 border-b border-gray-300",children:"مفاتيح التطبيق"}),M.jsxs("div",{className:"p-6 text-center text-slate-600 bg-gray-50",children:[M.jsx("p",{children:"لا يوجد مفاتيح محفوظة للتطبيق."}),M.jsx("button",{className:"mt-4 px-5 py-2 bg-green-600 text-white font-semibold text-sm rounded-md hover:bg-green-700 transition-colors",children:"إضافة مفتاح جديد"})]})]})]}),i==="variables"&&M.jsxs("div",{className:"mt-6 border border-gray-300 rounded-lg",children:[M.jsxs("div",{className:"p-4 border-b border-gray-300",children:[M.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"متغيرات نصوص الشهادة"}),M.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"قم بتعديل النصوص التي تظهر في شهادة التقدير. التغييرات ستُطبق فوراً."})]}),M.jsx("div",{className:"p-6 bg-gray-50 grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.keys(e).map(r=>M.jsxs("div",{children:[M.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-1.5",children:oU[r]}),M.jsx("textarea",{id:r,rows:r==="patronName"?3:2,value:e[r],onChange:l=>o(r,l.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]},r))})]})]}),M.jsx("aside",{className:"hidden md:block w-1/4",children:M.jsxs("nav",{className:"space-y-4",children:[M.jsxs("div",{children:[M.jsx("h3",{className:"text-xs text-slate-500 font-semibold uppercase tracking-wider mb-2",children:"عام"}),M.jsx("ul",{className:"space-y-1",children:M.jsx("li",{children:M.jsxs("a",{href:"#",className:"flex items-center gap-x-3 px-3 py-1.5 text-slate-700 rounded-md hover:bg-gray-200 transition-colors text-sm",children:[M.jsx(eU,{}),M.jsx("span",{children:"الإعدادات العامة"})]})})})]}),M.jsxs("div",{children:[M.jsx("h3",{className:"text-xs text-slate-500 font-semibold uppercase tracking-wider mb-2",children:"الوصول"}),M.jsx("ul",{className:"space-y-1",children:M.jsx("li",{children:M.jsxs("a",{href:"#",className:"flex items-center gap-x-3 px-3 py-1.5 text-slate-700 rounded-md hover:bg-gray-200 transition-colors text-sm",children:[M.jsx(sU,{}),M.jsx("span",{children:"المتعاونون"})]})})})]}),M.jsxs("div",{children:[M.jsx("h3",{className:"text-xs text-slate-500 font-semibold uppercase tracking-wider mb-2",children:"الأمان"}),M.jsxs("ul",{className:"space-y-1",children:[M.jsx("li",{children:M.jsxs("a",{href:"#",className:"flex items-center gap-x-3 px-3 py-1.5 text-slate-700 rounded-md hover:bg-gray-200 transition-colors text-sm",children:[M.jsx(nU,{}),M.jsx("span",{children:"أمان متقدم"})]})}),M.jsx("li",{children:M.jsxs("a",{href:"#",className:"flex items-center gap-x-3 px-3 py-1.5 text-slate-700 rounded-md hover:bg-gray-200 transition-colors text-sm",children:[M.jsx(tU,{}),M.jsx("span",{children:"مفاتيح النشر"})]})}),M.jsxs("li",{children:[M.jsxs("a",{href:"#",className:"flex items-center gap-x-3 px-3 py-1.5 text-slate-900 bg-gray-200 rounded-md transition-colors text-sm font-semibold border-l-2 border-blue-600",children:[M.jsx(iU,{}),M.jsx("span",{children:"المفاتيح والمتغيرات"})]}),M.jsx("ul",{className:"mt-1 ml-6 space-y-1",children:M.jsx("li",{children:M.jsx("a",{href:"#",className:"flex items-center gap-x-2 px-3 py-1 text-blue-600 rounded-md text-sm font-semibold",children:M.jsx("span",{children:"الإجراءات"})})})})]})]})]})]})})]}),M.jsx("button",{onClick:t,className:"mt-10 mx-auto px-6 py-2 bg-gray-500 text-white font-bold rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-75 transition-transform transform hover:scale-105",children:"العودة للتطبيق"})]})},sf=(t,e)=>{console.error("Error during content generation:",t),e("عفواً، خدمة الرسائل الذكية غير متاحة حالياً بسبب مشكلة في الإعدادات. يرجى التواصل مع مسؤول الخدمة.")},lU=()=>{const[t,e]=Re.useState(""),[n,i]=Re.useState(null),[s,o]=Re.useState(!1),[r,l]=Re.useState(""),[c,d]=Re.useState(null),[h,p]=Re.useState(""),[g,_]=Re.useState(!1),[w,D]=Re.useState(""),[U,C]=Re.useState(!1),[T,R]=Re.useState(""),[b,k]=Re.useState(!1),[B,S]=Re.useState(!1),[E,A]=Re.useState({mainTitle:"شهادة تقدير",subTitle:"الأمانة العامة لكنيسة القديس بولس بالعبور  إجتماع الخدام العام",introLine:"بكل الحب والتقدير تتشرف الأمانة العامة للخدمة بمنح هذه الشهادة الي",bodyLine1:"الخادم في",bodyLine2:"وذلك لاجتيازه بنجاح",bodyLine3:"كورس مجتمع يسوع",bodyLine4:"لخدام وخادمات الكنيسة، بتقدير عام",patronageTitle:"تحت رعاية",patronName:`القمص روفائيل الأنبا بيشوي
النائب البابوي لمدينة العبور`,responsiblePriestTitle:"الأب الكاهن المسئول"}),{ai:I,apiKeyError:N}=Re.useMemo(()=>{const te="AIzaSyDxfL01SjznmaGwUSCE-EjNPHMD_5nv9oo",_e="عفواً، خدمة الرسائل الذكية غير متاحة حالياً بسبب مشكلة في الإعدادات. يرجى التواصل مع مسؤول الخدمة.";try{return{ai:new pD({apiKey:te}),apiKeyError:""}}catch(pe){return console.error("Error initializing GoogleGenAI (likely an invalid key format):",pe),{ai:null,apiKeyError:_e}}},[]),V=te=>{const _e=String(te||"").trim();return _e.startsWith("0")?_e.substring(1):_e},x=Re.useCallback(async()=>{if(!t.trim()){l("يرجى إدخال الكود أو رقم الموبايل"),i(null);return}o(!0),l(""),i(null);try{const te=t.trim(),_e=V(te),pe=yP(GP,"students"),Ce=iv(pe,sv("code","==",te)),Yt=iv(pe,sv("mobileNumber","==",_e)),[It,Ou]=await Promise.all([lv(Ce),lv(Yt)]),Fn=new Map;It.forEach(Ni=>{Fn.set(Ni.id,Ni.data())}),Ou.forEach(Ni=>{Fn.set(Ni.id,Ni.data())});const fl=Array.from(Fn.values());fl.length>0?i(fl):(i(null),l("لم يتم العثور على نتائج. يرجى التأكد من الكود أو رقم الموبايل."))}catch(te){console.error("Error searching Firestore:",te),l("حدث خطأ أثناء البحث. يرجى المحاولة مرة أخرى.")}finally{o(!1)}},[t]),ft=()=>{e(""),i(null),d(null),l(""),p(""),D(""),R("")},Rt=te=>{d(te)},H=async()=>{if(!n||n.length===0)return;if(_(!0),p(""),D(""),R(""),N||!I){p(N),_(!1);return}const te=n[0],_e=n.find(pe=>pe.score!=="غائب");try{const pe=`اكتب رسالة تشجيعية وملهمة قصيرة (سطرين أو ثلاثة) ذات طابع مسيحي لـ "${te.name}" الذي أكمل كورس "مجتمع يسوع". ${_e&&_e.score!=="غائب"?`وكانت إحدى درجاته ${_e.score} من 100.`:""}`,Ce=await I.models.generateContent({model:"gemini-2.5-flash",contents:pe});p(Ce.text)}catch(pe){sf(pe,p)}finally{_(!1)}},Q=async()=>{if(!n||n.length===0)return;if(C(!0),D(""),p(""),R(""),N||!I){D(N),C(!1);return}const te=n[0];try{const _e=`اكتب نصيحة روحية قصيرة (من 3 إلى 5 أسطر) للخادم الروحي "${te.name}"، مستوحاة من تعاليم وكتابات قداسة البابا شنودة الثالث عن الخدمة والخدام.`,pe=await I.models.generateContent({model:"gemini-2.5-flash",contents:_e});D(pe.text)}catch(_e){sf(_e,D)}finally{C(!1)}},X=async()=>{if(!n||n.length===0)return;if(k(!0),R(""),p(""),D(""),N||!I){R(N),k(!1);return}const te=n[0];try{const _e=te.name,pe=_e.split(" ")[0],Ce=`اكتب رسالة شخصية ذات طابع مسيحي روحي إلى ${_e}.
        يجب أن تبدأ الرسالة بمخاطبة ${_e} مباشرة.
        يجب أن تذكر اسمه الأول، "${pe}"، مرتين في متن الرسالة.
        الرسالة يجب أن تحثه بلطف ومحبة على أهمية الحضور والمشاركة في اجتماعات الكورس القادمة، وتؤكد على أن وجوده ومشاركته يضيفان قيمة كبيرة للمجموعة وأن الجميع يفتقده.
        الرسالة يجب ألا تزيد عن 12 سطراً.
        مهم جداً: لا تقم بإضافة أي خاتمة أو توقيع في نهاية الرسالة، فقط محتوى الرسالة نفسها.`,It=(await I.models.generateContent({model:"gemini-2.5-flash",contents:Ce})).text.trim()+`

راعي الامانة العامة / أبونا يوسيف سيدهم`;R(It)}catch(_e){sf(_e,R)}finally{k(!1)}},Ee=()=>c?M.jsx(ZP,{result:c,onBackToResult:()=>d(null),certificateTexts:E}):n?M.jsx(jP,{results:n,onShowCertificate:Rt,onGenerateMessage:H,motivationalMessage:h,isMessageLoading:g,onGenerateAdvice:Q,spiritualAdvice:w,isAdviceLoading:U,onGenerateSpecialMessage:X,specialMessage:T,isSpecialMessageLoading:b,onNewSearch:ft}):M.jsx(zP,{query:t,setQuery:e,onSearch:x,isLoading:s,error:r});return M.jsxs("div",{className:"min-h-screen bg-gray-100 text-gray-800 flex flex-col items-center p-4",style:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:[M.jsxs("header",{className:"w-full max-w-4xl mx-auto text-center py-8 no-print",children:[M.jsx(tS,{className:"w-40 h-40 object-contain mx-auto",alt:"شعار كنيسة القديس بولس الرسول بالعبور"}),M.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-800 mt-4",children:"كنيسة القديس بولس الرسول بالعبور"}),M.jsx("p",{className:"text-2xl text-slate-700 mt-1",children:"كورس مجتمع يسوع"}),M.jsx("p",{className:"text-xl text-slate-600 mt-2",children:"استعلام عن النتائج وإصدار شهادات التقدير"})]}),B?M.jsx(rU,{onBack:()=>S(!1),certificateTexts:E,setCertificateTexts:A}):M.jsx("main",{className:"w-full max-w-4xl mx-auto flex-grow",children:M.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-10 transition-all duration-500 printable-content-wrapper",children:Ee()})}),M.jsxs("footer",{className:"w-full text-center p-4 text-slate-500 mt-8 no-print",children:[M.jsxs("p",{children:["© ",new Date().getFullYear()," كنيسة القديس بولس الرسول بالعبور. كل الحقوق محفوظة."]}),!B&&M.jsx("button",{onClick:()=>S(!0),className:"mt-2 text-slate-500 hover:text-slate-700 underline text-sm",children:"الإعدادات"})]})]})},cv=document.getElementById("root");cv&&MI.createRoot(cv).render(M.jsx($S.StrictMode,{children:M.jsx(lU,{})}));
